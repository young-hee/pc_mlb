<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.plgrim.ncp.commons.sysinflow">

	<!-- /* 몰 코드값 조회 */ -->
	<select id="selectSysInflowAll" parameterType="sysInflow" resultType="sysInflow">
        SELECT /* com.plgrim.ncp.base.repository.sys.selectSysInflowAll ken 20150430 */
              INFLOW_SN
             , USE_YN
             , EXCUT_REM_NM
             , ADVT_AFF_COM_ID
             , INFLOW_SECT_CD
             , INFLOW_CHNNL_TP_CD
             , BEG_DT
             , END_DT
             , PC_URL
             , MOBILE_URL
             , FEE_RT
             , FEE_USE_YN
             , ADVT_MATR_NM
             , ONLNE_UNT_DSCR
             , CREAT_CD
             , LP_CD
             , INFLOW_DSCR
             , REGTR_ID
             , REG_DT
             , UDTER_ID
             , UDT_DT
         FROM  SYS_INFLOW t
       WHERE 1=1
	   <include refid="com.plgrim.ncp.commons.sysinflow.sysInflowWhere" />
	   ORDER BY ADVT_AFF_COM_ID
	</select>
	
	<select id="selectSysInflow" parameterType="sysInflow" resultType="sysInflow">
        SELECT /* com.plgrim.ncp.base.repository.sys.selectSysInflow jason */
              INFLOW_SN
             , USE_YN
             , EXCUT_REM_NM
             , ADVT_AFF_COM_ID
             , INFLOW_SECT_CD
             , INFLOW_CHNNL_TP_CD
             , BEG_DT
             , END_DT
             , PC_URL
             , MOBILE_URL
             , FEE_RT
             , FEE_USE_YN
             , ADVT_MATR_NM
             , ONLNE_UNT_DSCR
             , CREAT_CD
             , LP_CD
             , INFLOW_DSCR
             , REGTR_ID
             , REG_DT
             , UDTER_ID
             , UDT_DT
         FROM  SYS_INFLOW t
       WHERE 1=1
       <include refid="com.plgrim.ncp.commons.sysinflow.sysInflowWhere" />
	</select>

	<sql id="sysInflowWhere">
        <if test='inflowSn != null and inflowSn != ""'>
        	AND    INFLOW_SN = #{inflowSn}     
        </if>     
        <if test='advtAffComId != null and advtAffComId != ""'>
        	AND    ADVT_AFF_COM_ID = #{advtAffComId}      /* 업체유형 */
        </if>             	
        <if test='mallId != null and mallId != ""'>
        	AND    MALL_ID = #{mallId}
        </if>
	</sql>

</mapper>