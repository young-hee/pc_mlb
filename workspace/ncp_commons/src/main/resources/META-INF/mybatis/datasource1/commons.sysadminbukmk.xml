<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.plgrim.ncp.commons.sysadminbukmk">
	
	<resultMap id="resultSysAdminBukmk" type="com.plgrim.ncp.commons.result.SysAdminBukmkResult">
		<result property="sysAdminBukmk.adminId" column="admin_id" />
		<result property="sysAdminBukmk.menuSn" column="menu_sn" />
		<result property="menuNm" column="menu_nm" />
		<result property="menuUrl" column="menu_Url" />
	</resultMap>
	
	<!-- 즐겨찾기 목록 조회 -->
	<select id="selectAdminBookmarkList" parameterType="java.util.Map" resultMap="resultSysAdminBukmk">
        SELECT /* [commons.sysadminbukmk.xml]["selectAdminBookmarkList"][즐겨찾기 목록 조회][Ed] */
		        sab.admin_id /* 사용자id */
		       ,sab.menu_sn /* 메뉴번호 */
		       ,sm.menu_nm /* 메뉴명 */
		       ,  (  SELECT menu_url FROM sys_menu  WHERE menu_tp_cd = 'FILE' AND first_pge_yn ='Y'  AND upper_menu_sn = sm.menu_sn  and rownum = 1 ) menu_Url       /* 메뉴url */
		FROM    sys_admin_bukmk sab
		INNER JOIN sys_menu sm
		ON
		    sab.admin_id = #{adminId,jdbcType=VARCHAR}
		    AND        
		    sab.menu_sn = sm.menu_sn
		    AND
		    sm.use_yn = 'Y'
		    AND
		    sm.bo_site_id =  #{boSiteId,jdbcType=VARCHAR}
		INNER JOIN sys_admin_author_grp_mapng saagm
		ON
		    sab.admin_id = saagm.admin_id
		    AND
		    saagm.use_yn ='Y'
		INNER JOIN sys_author sa
		ON
		    sa.author_grp_sn = saagm.author_grp_sn
		    AND
		    sa.menu_sn = sm.menu_sn 
		ORDER BY sab.reg_dt
	</select>
</mapper>