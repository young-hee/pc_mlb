<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">


<mapper namespace="com.plgrim.ncp.biz.display">

	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryFoResult" id="dspCtgryFoResultMap">
	
	   <result property="dspCtgry.dspCtgryNo" column="DSP_CTGRY_NO" />                  
	   <result property="dspCtgry.upperDspCtgryNo" column="UPPER_DSP_CTGRY_NO" />      
	   <result property="dspCtgry.dspCtgryNm" column="DSP_CTGRY_NM" />                 
	   <result property="dspCtgry.ctgryTpCd" column="CTGRY_TP_CD" />                   
	   <result property="dspCtgry.ctgrySectCd" column="CTGRY_SECT_CD" />
	   <result property="dspCtgry.godDspUnitCd" column="GOD_DSP_UNIT_CD" />
	   <result property="dspCtgry.ctgryDpthCd" column="CTGRY_DPTH_CD" />     
	   <result property="dspCtgry.dspGodSortStdrCd" column="DSP_GOD_SORT_STDR_CD"/>        
	   <result property="dspCtgry.leafCtgryYn" column="LEAF_CTGRY_YN" />
	   <result property="dspCtgry.dspYn" column="DSP_YN" />                 
	   <result property="dspCtgry.spcifyUrlDspYn" column="SPCIFY_URL_DSP_YN" />   
	   <result property="dspCtgry.ctgryDivLneYn" column="CTGRY_DIV_LNE_YN"/>
	   <result property="dspCtgry.ctgryDivLneCssCd" column="CTGRY_DIV_LNE_CSS_CD"/>
	   <result property="dspCtgry.deleteYn" column="DELETE_YN"/>         
	   <result property="dspCtgry.ctgryOutptTpCd" column="CTGRY_OUTPT_TP_CD" />    
	   <result property="dspCtgry.outptSectCd" column="OUTPT_SECT_CD" />    
	   <result property="dspCtgry.outptLinkUrl" column="OUTPT_LINK_URL" />  
	   <result property="dspCtgry.sortSeq" column="SORT_SEQ" />         
	   <result property="dspCtgry.pcListExpsrCntCd" column="PC_LIST_EXPSR_CNT_CD" />
	   <result property="dspCtgry.mobileListExpsrCntCd" column="MOBILE_LIST_EXPSR_CNT_CD" />
	   <result property="dspCtgry.listExpsrImgTurn" column="LIST_EXPSR_IMG_TURN" />
	   <result property="dspCtgry.aplMallId" column="APL_MALL_ID" />
	   <result property="dspCtgry.dspBrndId" column="DSP_BRND_ID" /> 
	   <result property="dspCtgry.expsrLvlCd" column="EXPSR_LVL_CD"/>     
	   <result property="dspCtgry.rprstImgFileNm" column="RPRST_IMG_FILE_NM" />  
	   <result property="dspCtgry.rprstImgFileUrl" column="RPRST_IMG_FILE_URL" />   
	   <result property="dspCtgry.rprstImgAltrtvCont" column="RPRST_IMG_ALTRTV_CONT" /> 
	   <result property="dspCtgry.bcrnStyleClassId" column="BCRN_STYLE_CLASS_ID" />
	   <result property="dspCtgry.regtrId" column="REGTR_ID" />  
	   <result property="dspCtgry.regDt" column="REG_DT" />         
	   <result property="dspCtgry.udterId" column="UDTER_ID" />    
	   <result property="dspCtgry.udtDt" column="UDT_DT" />        
	   
	   <result property="dspTmplat.tmplatSn" column="TMPLAT_SN"/>
	   <!-- 
	   <result property="dspTmplat.tmplatTpCd" column="TMPLAT_TP_CD"/>
	   <result property="dspTmplat.dvcSectCd" column="DVC_SECT_CD"/>
	   <result property="dspTmplat.tmplatNm" column="TMPLAT_NM"/>
	   <result property="dspTmplat.tmplatDscr" column="TMPLAT_DSCR"/>
	    -->
	   <result property="dspTmplat.tmplatCnncUrl" column="TMPLAT_CNNC_URL" />
	   <!-- 
	   <result property="dspTmplat.tmplatUseYn" column="TMPLAT_USE_YN" />
	    -->
	   <result property="dspCtgryLang.dspCtgryNo" column="DCLANG_DSP_CTGRY_NO" />
	   <result property="dspCtgryLang.langCd" column="LANG_CD"/>
	   <result property="dspCtgryLang.dspCtgryNm" column="DCLANG_DSP_CTGRY_NM"/>
	   <result property="dspCtgryLang.rprstImgFileUrl" column="DCLANG_RPRST_IMG_FILE_URL"/>
	   <result property="dspCtgryLang.rprstImgAltrtvCont" column="DCLANG_RPRST_IMG_ALTRTV_CONT"/>
	   <result property="dspCtgryLang.rprstImgFileNm" column="DCLANG_RPRST_IMG_FILE_NM"/>
	</resultMap>
	
	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryFoResult" id="subDspCtgryFoResultMap">
	
	   <result property="dspCtgry.dspCtgryNo" column="DSP_CTGRY_NO" />                  
	   <result property="dspCtgry.upperDspCtgryNo" column="UPPER_DSP_CTGRY_NO" />      
	   <result property="dspCtgry.dspCtgryNm" column="DSP_CTGRY_NM" />                 
	   <result property="dspCtgry.ctgryTpCd" column="CTGRY_TP_CD" />                   
	   <result property="dspCtgry.godDspUnitCd" column="GOD_DSP_UNIT_CD" />          
	   <result property="dspCtgry.ctgryDpthCd" column="CTGRY_DPTH_CD" />     
	   <result property="dspCtgry.dspGodSortStdrCd" column="DSP_GOD_SORT_STDR_CD"/>         
	   <result property="dspCtgry.leafCtgryYn" column="LEAF_CTGRY_YN" />         
	   <result property="dspCtgry.dspYn" column="DSP_YN" />                 
	   <result property="dspCtgry.spcifyUrlDspYn" column="SPCIFY_URL_DSP_YN" />   
	   <result property="dspCtgry.ctgryDivLneYn" column="CTGRY_DIV_LNE_YN"/>
	   <result property="dspCtgry.ctgryDivLneCssCd" column="CTGRY_DIV_LNE_CSS_CD"/>
	   <result property="dspCtgry.deleteYn" column="DELETE_YN"/>          
	   <result property="dspCtgry.ctgryOutptTpCd" column="CTGRY_OUTPT_TP_CD" />   
	   <result property="dspCtgry.outptSectCd" column="OUTPT_SECT_CD" />    
	   <result property="dspCtgry.outptLinkUrl" column="OUTPT_LINK_URL" />  
	   <result property="dspCtgry.sortSeq" column="SORT_SEQ" />         
	   <result property="dspCtgry.aplMallId" column="APL_MALL_ID" />    
	   <result property="dspCtgry.dspBrndId" column="DSP_BRND_ID" />  
	   <result property="dspCtgry.expsrLvlCd" column="EXPSR_LVL_CD"/>    
	   <result property="dspCtgry.rprstImgFileNm" column="RPRST_IMG_FILE_NM" />  
	   <result property="dspCtgry.rprstImgFileUrl" column="RPRST_IMG_FILE_URL" />   
	   <result property="dspCtgry.rprstImgAltrtvCont" column="RPRST_IMG_ALTRTV_CONT" /> 
	   <result property="dspCtgry.bcrnStyleClassId" column="BCRN_STYLE_CLASS_ID" />
	   <result property="dspCtgry.pcMobileTmplatIndUseYn" column="PC_MOBILE_TMPLAT_IND_USE_YN" />
	   <result property="dspCtgry.pcTmplatSn" column="PC_TMPLAT_SN"/>
       <result property="dspCtgry.mobileTmplatSn" column="MOBILE_TMPLAT_SN"/>
	   <result property="dspCtgry.regtrId" column="REGTR_ID" />  
	   <result property="dspCtgry.regDt" column="REG_DT" />         
	   <result property="dspCtgry.udterId" column="UDTER_ID" />    
	   <result property="dspCtgry.udtDt" column="UDT_DT" />        
	   
	   <result property="dspTmplat.tmplatSn" column="TMPLAT_SN"/>
	   <result property="dspTmplat.tmplatTpCd" column="TMPLAT_TP_CD"/>
	   <result property="dspTmplat.dvcSectCd" column="DVC_SECT_CD"/>
	   <result property="dspTmplat.tmplatNm" column="TMPLAT_NM"/>
	   <result property="dspTmplat.tmplatDscr" column="TMPLAT_DSCR"/>
	   <result property="dspTmplat.tmplatCnncUrl" column="TMPLAT_CNNC_URL" />
	   <result property="dspTmplat.tmplatUseYn" column="TMPLAT_USE_YN" />
	   
	   <result property="dspCtgryLang.dspCtgryNo" column="DCLANG_DSP_CTGRY_NO" />
	   <result property="dspCtgryLang.langCd" column="LANG_CD"/>
	   <result property="dspCtgryLang.dspCtgryNm" column="DCLANG_DSP_CTGRY_NM"/>
	   <result property="dspCtgryLang.rprstImgFileUrl" column="DCLANG_RPRST_IMG_FILE_URL"/>
	   <result property="dspCtgryLang.rprstImgAltrtvCont" column="DCLANG_RPRST_IMG_ALTRTV_CONT"/>
	   <result property="dspCtgryLang.rprstImgFileNm" column="DCLANG_RPRST_IMG_FILE_NM"/>	   
	</resultMap>
	
	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryFoResult" id="ctgryNewFoResultMap">
	
	   <result property="dspCtgry.dspCtgryNo" column="DSP_CTGRY_NO" />                  
	   <result property="dspCtgry.upperDspCtgryNo" column="UPPER_DSP_CTGRY_NO" />      
	   <result property="dspCtgry.dspCtgryNm" column="DSP_CTGRY_NM" />                 
	   <result property="dspCtgry.ctgryTpCd" column="CTGRY_TP_CD" />                   
	   <result property="dspCtgry.godDspUnitCd" column="GOD_DSP_UNIT_CD" />          
	   <result property="dspCtgry.ctgryDpthCd" column="CTGRY_DPTH_CD" />     
	   <result property="dspCtgry.dspGodSortStdrCd" column="DSP_GOD_SORT_STDR_CD"/>        
	   <result property="dspCtgry.leafCtgryYn" column="LEAF_CTGRY_YN" />         
	   <result property="dspCtgry.dspYn" column="DCTGRY_DSP_YN" />                 
	   <result property="dspCtgry.spcifyUrlDspYn" column="SPCIFY_URL_DSP_YN" />   
	   <result property="dspCtgry.dspCtgrySectLneYn" column="DSP_CTGRY_SECT_LNE_YN"/>
	   <result property="dspCtgry.dspCtgrySectLneCssCd" column="DSP_CTGRY_SECT_LNE_CSS_CD"/>
	   <result property="dspCtgry.deleteYn" column="DELETE_YN"/>          
	   <result property="dspCtgry.ctgryOutptTpCd" column="CTGRY_OUTPT_TP_CD" />   
	   <result property="dspCtgry.outptSectCd" column="OUTPT_SECT_CD" />    
	   <result property="dspCtgry.outptLinkUrl" column="OUTPT_LINK_URL" />  
	   <result property="dspCtgry.sortSeq" column="DCTGRY_SORT_SEQ" />         
	   <result property="dspCtgry.aplMallId" column="APL_MALL_ID" />    
	   <result property="dspCtgry.dspBrndId" column="DSP_BRND_ID" />  
	   <result property="dspCtgry.expsrLvlCd" column="EXPSR_LVL_CD"/>          

	   <result property="dspCtgryLang.dspCtgryNo" column="DCLANG_DSP_CTGRY_NO" />
	   <result property="dspCtgryLang.langCd" column="LANG_CD"/>
	   <result property="dspCtgryLang.dspCtgryNm" column="DCLANG_DSP_CTGRY_NM"/>
	   <result property="dspCtgryLang.rprstImgFileUrl" column="DCLANG_RPRST_IMG_FILE_URL"/>
	   <result property="dspCtgryLang.rprstImgAltrtvCont" column="DCLANG_RPRST_IMG_ALTRTV_CONT"/>
	   <result property="dspCtgryLang.rprstImgFileNm" column="DCLANG_RPRST_IMG_FILE_NM"/>

	</resultMap>
	
	<resultMap type="godImg" id="GodImgFoResultMap">
		<result property="godNo" column="GIMG_GOD_NO"/>
		<result property="imgTurn" column="IMG_TURN" />
		<result property="imgSizeCd" column="IMG_SIZE_CD" />
		<result property="imgUrl" column="IMG_URL" />
		<result property="rprstImgYn" column="RPRST_IMG_YN"/>
		<result property="imgDscr" column="IMG_DSCR" />
		<result property="imgAprvYn" column="IMG_APRV_YN"/>
		<result property="imgUseYn" column="IMG_USE_YN"/>
		<result property="imgLastUdtDt" column="IMG_LAST_UDT_DT"/>
	</resultMap>
	
	<resultMap type="godItm" id="GodItemFoResultMap">
       <result property="itmNo" column="ITM_NO"/>
       <result property="godNo" column="GITM_GOD_NO"/>
       <result property="skuNo" column="SKU_NO"/>
       <result property="itmStatCd" column="ITM_STAT_CD"/>
       <result property="itmNm" column="ITM_NM"/>
       <result property="optCd1" column="OPT_CD_1"/>
       <result property="optValCd1" column="OPT_VAL_CD_1"/>
       <result property="optCd2" column="OPT_CD_2"/>
       <result property="optValCd2" column="OPT_VAL_CD_2"/>
       <result property="optCd3" column="OPT_CD_3"/>
       <result property="optValCd3" column="OPT_VAL_CD_3"/>
       <result property="optCd4" column="OPT_CD_4"/>
       <result property="optValCd4" column="OPT_VAL_CD_4"/>
       <result property="optCd5" column="OPT_CD_5"/>
       <result property="optValCd5" column="OPT_VAL_CD_5"/>
	</resultMap>
	
	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryGodFoResult" id="dspCtgryGodFoResultMap">
	
       <result property="dspCtgryCnncGod.dspCtgryNo" column="DSP_CTGRY_NO"/>
       <result property="dspCtgryCnncGod.godNo" column="GOD_NO AS DCCGOD_GOD_NO"/>
       <result property="dspCtgryCnncGod.rprstGodYn" column="RPRST_GOD_YN"/>
       <result property="dspCtgryCnncGod.sortSeq" column="SORT_SEQ"/>
       
	   <result property="god.godNo" column="GOD_NO"/>
       <result property="god.erpGodNo" column="ERP_GOD_NO"/>
       <result property="god.dsgnGrpNo" column="DSGN_GRP_NO"/>
       <result property="god.godNm" column="GOD_NM"/>
       <result property="god.mobileGodNm" column="MOBILE_GOD_NM"/>
       <result property="god.tagNm" column="TAG_NM"/>
       <result property="god.colorTagNm" column="COLOR_TAG_NM"/>
       <result property="god.themaTagNm" column="THEMA_TAG_NM"/>
       <result property="god.textIconCont" column="TEXT_ICON_CONT"/>
       <result property="god.godAprvSectCd" column="GOD_APRV_SECT_CD"/>
       <result property="god.godSaleSectCd" column="GOD_SALE_SECT_CD"/>
       <result property="god.saleBegDate" column="SALE_BEG_DATE"/>
       <result property="god.saleEndDate" column="SALE_END_DATE"/>
       <result property="god.colorNm" column="COLOR_NM"/>
       <result property="god.colorCd" column="COLOR_CD"/>
       <result property="god.clorChipImgUrl" column="CLOR_CHIP_IMG_URL"/>
       <result property="god.godTpCd" column="GOD_TP_CD"/>
       <result property="god.partmalSectCd" column="PARTMAL_SECT_CD"/>
       <result property="god.brndId" column="GOD_BRND_ID" />
       <result property="god.brndGrpId" column="GOD_BRND_GRP_ID"/>
       <result property="god.stdCtgryNo" column="STD_CTGRY_NO"/>
       <result property="god.tdfSect" column="TDF_SECT"/>
       <result property="god.sesonGrpCd" column="SESON_GRP_CD"/>
       <result property="god.sesonCd" column="SESON_CD"/>
       <result property="god.prdlstCd" column="PRDLST_CD"/>
       <result property="god.srsId" column="SRS_ID"/>
       <result property="god.lneId" column="LNE_ID"/>

       <result property="god.resveSaleGodYn" column="RESVE_SALE_GOD_YN"/>
       <result property="god.resveOrdPaySectCd" column="RESVE_ORD_PAY_SECT_CD"/>
       <result property="god.resveOrdPartPayAmt" column="RESVE_ORD_PART_PAY_AMT"/>
       <result property="god.resveOrdPayClosDt" column="RESVE_ORD_PAY_CLOS_DT"/>
       <result property="god.resveOrdDlivyPrearngeDate" column="RESVE_ORD_DLIVY_PREARNGE_DATE"/>
       <result property="god.dmstcDlvCstPlcSn" column="DMSTC_DLV_CST_PLC_SN"/>
       <result property="god.ovseaDlvPsbYn" column="OVSEA_DLV_PSB_YN"/>
       <result property="god.ovseaDlvDmstcDlvCstPlcSn" column="OVSEA_DLV_DMSTC_DLV_CST_PLC_SN"/>
       <result property="god.ovseaDlvCstPlcSn" column="OVSEA_DLV_CST_PLC_SN"/>
       <result property="god.godWt" column="GOD_WT"/>
       <result property="god.godVol" column="GOD_VOL"/>
       <result property="god.shopPkupPsbYn" column="SHOP_PKUP_PSB_YN"/>
       <result property="god.dspYn" column="DSP_YN"/>
       <result property="god.spcifyUrlDspYn" column="SPCIFY_URL_DSP_YN"/>
       <result property="god.firstDspDt" column="FIRST_DSP_DT"/>
       <result property="god.prcCmprSiteExpsrYn" column="PRC_CMPR_SITE_EXPSR_YN"/>
       <result property="god.godSrchSnm" column="GOD_SRCH_SNM"/>
       <result property="god.comId" column="COM_ID"/>
       <result property="god.buyAgeLmitCd" column="BUY_AGE_LMIT_CD"/>
       <result property="god.recomendSexCd" column="RECOMEND_SEX_CD"/>
       <result property="god.recomendAgeCd" column="RECOMEND_AGE_CD"/>
       <result property="god.safeCrtfcTgtYn" column="SAFE_CRTFC_TGT_YN"/>
       <result property="god.kcCrtfcNo" column="KC_CRTFC_NO"/>
       <result property="god.invManageYn" column="INV_MANAGE_YN"/>
       <result property="god.lmttInvYn" column="LMTT_INV_YN"/>
       <result property="god.erpInvIntrlckYn" column="ERP_INV_INTRLCK_YN"/>
       <result property="god.minOrdQty" column="MIN_ORD_QTY"/>
       <result property="god.maxOrdQty" column="MAX_ORD_QTY"/>
       <result property="god.otltYn" column="OTLT_YN"/>

       <result property="god.rtlPrc" column="RTL_PRC"/>
       <result property="god.csmrPrc" column="CSMR_PRC"/>
       <result property="god.empPrc" column="EMP_PRC"/>
       <result property="god.regtrId" column="REGTR_ID"/>
       <result property="god.regDt" column="REG_DT"/>
       <result property="god.udterId" column="UDTER_ID"/>
       <result property="god.udtDt" column="UDT_DT"/>
       <result property="god.firstDspDt" column="FIRST_DSP_DT"/>

	   <result property="dspGodPrc.rtlPrc" column="RTL_PRC" />
       <result property="dspGodPrc.godDcRt" column="DGPRC_GOD_DC_RT"/>
       <result property="dspGodPrc.lastSalePrc" column="DGPRC_LAST_SALE_PRC"/>
       <result property="dspGodPrc.cpnDcRt" column="DGPRC_CPN_DC_RT"/>
       
       <result property="sysBrnd.brndId" column="BRND_ID"/>
       <result property="sysBrnd.upperBrndId" column="UPPER_BRND_ID"/>
       <result property="sysBrnd.brndNm" column="BRND_NM"/>
       <result property="sysBrnd.brndDscr" column="BRND_DSCR"/>
       <result property="sysBrnd.brndImgUrl" column="BRND_IMG_URL"/>
       <result property="sysBrnd.useYn" column="USE_YN"/>
       <result property="sysBrnd.sortSeq" column="BRND_SORT_SEQ"/>
       
       <result property="godLangbyGodNm.godNo" column="GLGNM_GOD_NO"/>
       <result property="godLangbyGodNm.langCd" column="LANG_CD"/>
       <result property="godLangbyGodNm.godNm" column="GLGNM_GOD_NM"/>
       <result property="godLangbyGodNm.mobileGodNm" column="GLGNM_MOBILE_GOD_NM"/>
       <result property="godLangbyGodNm.tagNm" column="GLGNM_TAG_NM"/>
       <result property="godLangbyGodNm.colorTagNm" column="GLGNM_COLOR_TAG_NM"/>
       <result property="godLangbyGodNm.themaTagNm" column="GLGNM_THEMA_TAG_NM"/>
       <result property="godLangbyGodNm.colorNm" column="GLGNM_COLOR_NM"/>
       <!-- 
       <collection property="godItmList" resultMap="GodItemFoResultMap" /> -->
       <result property="imgFrontUrl" column="IMG_FRONT_URL" />
       <result property="imgBackUrl" column="IMG_BACK_URL" />
       
       <result property="mnfcturDate" column="MNFCTUR_DATE" />
       <result property="sesonGrpNm" column="SESON_GRP_NM" />
       
	</resultMap>

	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryGodFoResult" id="dspGoodsFinderGodFoResultMap">

       <result property="dspCtgryCnncGod.dspCtgryNo" column="DSP_CTGRY_NO"/>
       <result property="dspCtgryCnncGod.godNo" column="GOD_NO AS DCCGOD_GOD_NO"/>
       <result property="dspCtgryCnncGod.rprstGodYn" column="RPRST_GOD_YN"/>
       <result property="dspCtgryCnncGod.sortSeq" column="SORT_SEQ"/>

	   <result property="god.godNo" column="GOD_NO"/>
       <result property="god.erpGodNo" column="ERP_GOD_NO"/>
       <result property="god.dsgnGrpNo" column="DSGN_GRP_NO"/>
       <result property="god.godNm" column="GOD_NM"/>
       <result property="god.mobileGodNm" column="MOBILE_GOD_NM"/>
       <result property="god.tagNm" column="TAG_NM"/>
       <result property="god.colorTagNm" column="COLOR_TAG_NM"/>
       <result property="god.themaTagNm" column="THEMA_TAG_NM"/>
       <result property="god.textIconCont" column="TEXT_ICON_CONT"/>
       <result property="god.godAprvSectCd" column="GOD_APRV_SECT_CD"/>
       <result property="god.godSaleSectCd" column="GOD_SALE_SECT_CD"/>
       <result property="god.saleBegDate" column="SALE_BEG_DATE"/>
       <result property="god.saleEndDate" column="SALE_END_DATE"/>
       <result property="god.colorNm" column="COLOR_NM"/>
       <result property="god.colorCd" column="COLOR_CD"/>
       <result property="god.clorChipImgUrl" column="CLOR_CHIP_IMG_URL"/>
       <result property="god.godTpCd" column="GOD_TP_CD"/>
       <result property="god.partmalSectCd" column="PARTMAL_SECT_CD"/>
       <result property="god.brndId" column="GOD_BRND_ID" />
       <result property="god.brndGrpId" column="GOD_BRND_GRP_ID"/>
       <result property="god.stdCtgryNo" column="STD_CTGRY_NO"/>
       <result property="god.tdfSect" column="TDF_SECT"/>
       <result property="god.sesonGrpCd" column="SESON_GRP_CD"/>
       <result property="god.sesonCd" column="SESON_CD"/>
       <result property="god.prdlstCd" column="PRDLST_CD"/>
       <result property="god.srsId" column="SRS_ID"/>
       <result property="god.lneId" column="LNE_ID"/>

       <result property="god.resveSaleGodYn" column="RESVE_SALE_GOD_YN"/>
       <result property="god.resveOrdPaySectCd" column="RESVE_ORD_PAY_SECT_CD"/>
       <result property="god.resveOrdPartPayAmt" column="RESVE_ORD_PART_PAY_AMT"/>
       <result property="god.resveOrdPayClosDt" column="RESVE_ORD_PAY_CLOS_DT"/>
       <result property="god.resveOrdDlivyPrearngeDate" column="RESVE_ORD_DLIVY_PREARNGE_DATE"/>
       <result property="god.dmstcDlvCstPlcSn" column="DMSTC_DLV_CST_PLC_SN"/>
       <result property="god.ovseaDlvPsbYn" column="OVSEA_DLV_PSB_YN"/>
       <result property="god.ovseaDlvDmstcDlvCstPlcSn" column="OVSEA_DLV_DMSTC_DLV_CST_PLC_SN"/>
       <result property="god.ovseaDlvCstPlcSn" column="OVSEA_DLV_CST_PLC_SN"/>
       <result property="god.godWt" column="GOD_WT"/>
       <result property="god.godVol" column="GOD_VOL"/>
       <result property="god.shopPkupPsbYn" column="SHOP_PKUP_PSB_YN"/>
       <result property="god.dspYn" column="DSP_YN"/>
       <result property="god.spcifyUrlDspYn" column="SPCIFY_URL_DSP_YN"/>
       <result property="god.firstDspDt" column="FIRST_DSP_DT"/>
       <result property="god.prcCmprSiteExpsrYn" column="PRC_CMPR_SITE_EXPSR_YN"/>
       <result property="god.godSrchSnm" column="GOD_SRCH_SNM"/>
       <result property="god.comId" column="COM_ID"/>
       <result property="god.buyAgeLmitCd" column="BUY_AGE_LMIT_CD"/>
       <result property="god.recomendSexCd" column="RECOMEND_SEX_CD"/>
       <result property="god.recomendAgeCd" column="RECOMEND_AGE_CD"/>
       <result property="god.safeCrtfcTgtYn" column="SAFE_CRTFC_TGT_YN"/>
       <result property="god.kcCrtfcNo" column="KC_CRTFC_NO"/>
       <result property="god.invManageYn" column="INV_MANAGE_YN"/>
       <result property="god.lmttInvYn" column="LMTT_INV_YN"/>
       <result property="god.erpInvIntrlckYn" column="ERP_INV_INTRLCK_YN"/>
       <result property="god.minOrdQty" column="MIN_ORD_QTY"/>
       <result property="god.maxOrdQty" column="MAX_ORD_QTY"/>
       <result property="god.otltYn" column="OTLT_YN"/>

       <result property="god.rtlPrc" column="RTL_PRC"/>
       <result property="god.csmrPrc" column="CSMR_PRC"/>
       <result property="god.empPrc" column="EMP_PRC"/>
       <result property="god.regtrId" column="REGTR_ID"/>
       <result property="god.regDt" column="REG_DT"/>
       <result property="god.udterId" column="UDTER_ID"/>
       <result property="god.udtDt" column="UDT_DT"/>
       <result property="god.firstDspDt" column="FIRST_DSP_DT"/>

	   <result property="dspGodPrc.rtlPrc" column="RTL_PRC" />
       <result property="dspGodPrc.godDcRt" column="DGPRC_GOD_DC_RT"/>
       <result property="dspGodPrc.lastSalePrc" column="DGPRC_LAST_SALE_PRC"/>
       <result property="dspGodPrc.cpnDcRt" column="DGPRC_CPN_DC_RT"/>

       <result property="sysBrnd.brndId" column="BRND_ID"/>
       <result property="sysBrnd.upperBrndId" column="UPPER_BRND_ID"/>
       <result property="sysBrnd.brndNm" column="BRND_NM"/>
       <result property="sysBrnd.brndDscr" column="BRND_DSCR"/>
       <result property="sysBrnd.brndImgUrl" column="BRND_IMG_URL"/>
       <result property="sysBrnd.useYn" column="USE_YN"/>
       <result property="sysBrnd.sortSeq" column="BRND_SORT_SEQ"/>

       <result property="godLangbyGodNm.godNo" column="GLGNM_GOD_NO"/>
       <result property="godLangbyGodNm.langCd" column="LANG_CD"/>
       <result property="godLangbyGodNm.godNm" column="GLGNM_GOD_NM"/>
       <result property="godLangbyGodNm.mobileGodNm" column="GLGNM_MOBILE_GOD_NM"/>
       <result property="godLangbyGodNm.tagNm" column="GLGNM_TAG_NM"/>
       <result property="godLangbyGodNm.colorTagNm" column="GLGNM_COLOR_TAG_NM"/>
       <result property="godLangbyGodNm.themaTagNm" column="GLGNM_THEMA_TAG_NM"/>
       <result property="godLangbyGodNm.colorNm" column="GLGNM_COLOR_NM"/>

       <result property="imgFrontUrl" column="IMG_FRONT_URL" />
       <result property="imgBackUrl" column="IMG_BACK_URL" />

       <result property="mnfcturDate" column="MNFCTUR_DATE" />
       <result property="sesonGrpNm" column="SESON_GRP_NM" />
	</resultMap>

	<resultMap type="com.plgrim.ncp.biz.display.result.GodIconFoResult" id="godIconFoResultMap">
        <result property="godIconCnnc.godNo" column="GOD_NO" />
        <result property="godIconCnnc.iconTurn" column="GTCNNC_ICON_TURN"/>
        
        <result property="godIcon.iconTurn" column="ICON_TURN"/>
        <result property="godIcon.iconNm" column="ICON_NM"/>
        <result property="godIcon.iconImgUrl" column="ICON_IMG_URL"/>
        <result property="godIcon.iconDscr" column="ICON_DSCR"/>
        <result property="godIcon.autoDspYn" column="AUTO_DSP_YN"/>

	</resultMap>
	
	<resultMap type="com.plgrim.ncp.biz.display.result.DspCtgryFoResult" id="ctgryFoResultMap">
	   <result property="dspCtgry.dspCtgryNo" column="DSP_CTGRY_NO" />                  
	   <result property="dspCtgry.upperDspCtgryNo" column="UPPER_DSP_CTGRY_NO" />      
	   <result property="dspCtgry.dspCtgryNm" column="DSP_CTGRY_NM" />                 
	   <result property="dspCtgry.ctgryDpthCd" column="CTGRY_DPTH_CD" />                   
	   <result property="dspCtgry.aplMallId" column="APL_MALL_ID" />    
	   <result property="dspCtgry.dspBrndId" column="DSP_BRND_ID" />  
	   <result property="dspCtgry.expsrLvlCd" column="EXPSR_LVL_CD"/> 
	   <result property="dspCtgry.rprstImgFileNm" column="RPRST_IMG_FILE_NM" />  
	   <result property="dspCtgry.rprstImgFileUrl" column="RPRST_IMG_FILE_URL" />   
	   <result property="dspCtgry.rprstImgAltrtvCont" column="RPRST_IMG_ALTRTV_CONT" />        
	   <result property="dspCtgryLang.dspCtgryNo" column="DCLANG_DSP_CTGRY_NO" />
	   <result property="dspCtgryLang.langCd" column="LANG_CD"/>
	   <result property="dspCtgryLang.dspCtgryNm" column="DCLANG_DSP_CTGRY_NM"/>
	   <result property="dspCtgryLang.rprstImgFileUrl" column="DCLANG_RPRST_IMG_FILE_URL"/>
	   <result property="dspCtgryLang.rprstImgAltrtvCont" column="DCLANG_RPRST_IMG_ALTRTV_CONT"/>
	   <result property="dspCtgryLang.rprstImgFileNm" column="DCLANG_RPRST_IMG_FILE_NM"/>
	</resultMap>
	
	<select id="selectGodExistDspCtgryFoList2" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="subDspCtgryFoResultMap">
    	SELECT /* [display.category.xml][selectGodExistDspCtgryFoList][selectGodExistDspCtgryFoList][주문욱] */ 
    		t1.dsp_ctgry_no
		FROM dsp_ctgry t1
		WHERE t1.spcify_url_dsp_yn = 'N'
		  AND t1.apl_mall_id = 'DXM'
          AND t1.delete_yn = 'N'
          AND t1.dsp_yn = 'Y'
		  AND EXISTS (
		  	SELECT /*+ ORDERED INDEX(T2 IX2_DSP_CTGRY_CNNC_GOD) */ 1 
            FROM dsp_ctgry_cnnc_god t2
             JOIN god t3 ON t3.god_no = t2.god_no
		     <if test="sttSectCd != null">
			 	JOIN DSP_BST_GOD t8 ON t3.GOD_NO = t8.GOD_NO AND t8.stt_sect_cd = #{sttSectCd}
			 </if>
            WHERE 1 = 1
             AND t3.god_aprv_sect_cd = 'APRV_COMPT'
             AND t3.god_sale_sect_cd IN ('SALE_PROGRS', 'SLDOUT')
             AND t3.dsp_yn = 'Y'
             AND t3.spcify_url_dsp_yn = 'N'
			 <if test='empYn == "N"'>
				AND t3.EMP_ONLY_YN = 'N'
			 </if>
			 <if test="special == 'OUTLET'">
				AND t3.OTLT_YN = 'Y'
			 </if>
			 <if test="searchConditionBrandIds != null">
				AND t3.BRND_ID IN
				<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
					#{brands}
				</foreach>
		     </if>
		  	 <!-- NEW -->
			 <if test="newGodCondition != null">
				AND t3.REG_DT &gt;= sysdate - 14
			 </if>
             AND t2.dsp_ctgry_no = t1.dsp_ctgry_no 
             AND t2.dsp_yn = 'Y'
           )

	</select>
	
	<select id="selectGodExistDspCtgryFoList_cashe" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="subDspCtgryFoResultMap">
			SELECT /* [display.category.xml][selectGodExistDspCtgryFoList][selectGodExistDspCtgryFoList][주문욱] */ 
				t1.dsp_ctgry_no 
			FROM dsp_ctgry t1 
			WHERE t1.spcify_url_dsp_yn = 'N' 
				AND t1.apl_mall_id = 'DXM'
				AND t1.delete_yn = 'N' 
				AND t1.dsp_yn = 'Y'
				AND EXISTS ( 
				    SELECT /*+ ORDERED INDEX(T2 IX2_DSP_CTGRY_CNNC_GOD) INDEX(T3 PK_GOD) */ 1 
				    FROM dsp_ctgry_cnnc_god t2 JOIN god t3 ON t3.god_no = t2.god_no 
				    WHERE 1 = 1 
				        AND t3.god_aprv_sect_cd = 'APRV_COMPT' 
				        AND t3.god_sale_sect_cd IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
				        AND t3.dsp_yn = 'Y' 
				        AND t3.spcify_url_dsp_yn = 'N' 
					 	<if test='empYn == "N"'>
						AND t3.EMP_ONLY_YN = 'N'
					 	</if>
					 	<if test="special == 'OUTLET'">
						AND t3.OTLT_YN = 'Y'
					 	</if>
					    <if test="searchConditionBrandIds != null">
						AND t3.BRND_ID IN
						<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
							#{brands}
						</foreach>
				        </if>
				        <!-- NEW는 최근2주 등록된 상품 중 판매금액 순 -->
						<if test="newGodCondition != null">
						AND t3.REG_DT &gt;= sysdate-14
						</if>
				        AND t2.dsp_ctgry_no = t1.dsp_ctgry_no 
				        AND t2.dsp_yn = 'Y' 
				        
				)
				<if test="sttSectCd != null">
				AND EXISTS (
				    SELECT  1 
				    FROM dsp_ctgry_bst_god t4 JOIN god t5 ON t5.god_no = t4.god_no AND t4.stt_sect_cd = #{sttSectCd} AND stt_rank &lt;= 60
				    WHERE 1 = 1 
				        AND t5.god_aprv_sect_cd = 'APRV_COMPT' 
				        AND t5.god_sale_sect_cd IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
				        AND t5.dsp_yn = 'Y' 
				        AND t5.spcify_url_dsp_yn = 'N' 
				        AND t5.EMP_ONLY_YN = 'N' 
				        AND t4.dsp_ctgry_no = t1.dsp_ctgry_no  
				)
				</if>

	</select>
	
	<select id="selectGodExistDspCtgryFoList_bak" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="subDspCtgryFoResultMap">
	   SELECT /* [display.category.xml][selectGodExistDspCtgryFoList][selectGodExistDspCtgryFoList][주문욱] */ 
	        b.* 
	        <!-- 
	       ,t4.DSP_CTGRY_NO AS DCLANG_DSP_CTGRY_NO
	       ,t4.LANG_CD
	       ,t4.DSP_CTGRY_NM AS DCLANG_DSP_CTGRY_NM
	       ,t4.RPRST_IMG_FILE_URL AS DCLANG_RPRST_IMG_FILE_URL
	       ,t4.RPRST_IMG_ALTRTV_CONT AS DCLANG_RPRST_IMG_ALTRTV_CONT
	       ,t4.RPRST_IMG_FILE_NM AS DCLANG_RPRST_IMG_FILE_NM
	        -->
	    FROM (
	    SELECT 
	                a.DSP_CTGRY_NO
	                <!-- 
	               ,a.UPPER_DSP_CTGRY_NO
	               ,a.DSP_CTGRY_NM
	               ,a.CTGRY_TP_CD
	               ,a.GOD_DSP_UNIT_CD
	               ,a.CTGRY_DPTH_CD
	               ,a.DSP_GOD_SORT_STDR_CD
	               ,a.LEAF_CTGRY_YN
	               ,a.DSP_YN
	               ,a.SPCIFY_URL_DSP_YN
	               ,a.CTGRY_DIV_LNE_YN
	               ,a.CTGRY_DIV_LNE_CSS_CD
	               ,a.DELETE_YN
	               ,a.CTGRY_OUTPT_TP_CD
	               ,a.OUTPT_SECT_CD
	               ,a.OUTPT_LINK_URL
	               ,a.SORT_SEQ
	               ,a.APL_MALL_ID
	               ,a.DSP_BRND_ID
	               ,a.EXPSR_LVL_CD
	               ,a.RPRST_IMG_FILE_NM
	               ,a.RPRST_IMG_FILE_URL
	               ,a.RPRST_IMG_ALTRTV_CONT
	               ,a.PC_MOBILE_TMPLAT_IND_USE_YN
	               ,a.PC_TMPLAT_SN
	               ,a.MOBILE_TMPLAT_SN
	               ,count(a.GOD_NO) GOD_CNT
	                -->
	    FROM (
	       SELECT 
	                t1.DSP_CTGRY_NO
	                <!-- 
	               ,t1.UPPER_DSP_CTGRY_NO
	               ,t1.DSP_CTGRY_NM
	               ,t1.CTGRY_TP_CD
	               ,t1.GOD_DSP_UNIT_CD
	               ,t1.CTGRY_DPTH_CD
	               ,t1.DSP_GOD_SORT_STDR_CD
	               ,t1.LEAF_CTGRY_YN
	               ,t1.DSP_YN
	               ,t1.SPCIFY_URL_DSP_YN
	               ,t1.CTGRY_DIV_LNE_YN
	               ,t1.CTGRY_DIV_LNE_CSS_CD
	               ,t1.DELETE_YN
	               ,t1.CTGRY_OUTPT_TP_CD
	               ,t1.OUTPT_SECT_CD
	               ,t1.OUTPT_LINK_URL
	               ,t1.SORT_SEQ
	               ,t1.APL_MALL_ID
	               ,t1.DSP_BRND_ID
	               ,t1.EXPSR_LVL_CD
	               ,t1.RPRST_IMG_FILE_NM
	               ,t1.RPRST_IMG_FILE_URL
	               ,t1.RPRST_IMG_ALTRTV_CONT
	               ,t1.PC_MOBILE_TMPLAT_IND_USE_YN
	               ,t1.PC_TMPLAT_SN
	               ,t1.MOBILE_TMPLAT_SN
	 			   -->
	               ,t2.GOD_NO
	
	        FROM 
	        (
	                SELECT 
	                    t1.GOD_NO 
	                FROM GOD t1 
	                WHERE 1 = 1 
	                AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT' 
	                AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
	                <!--  
	                AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD') 
	                AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS') &lt;= sysdate 
	                AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate 
	                -->
	                AND t1.DSP_YN = 'Y' 
	                AND t1.SPCIFY_URL_DSP_YN = 'N' 
					<if test="special == 'OUTLET'">
					  AND t1.OTLT_YN = 'Y'
					</if>
					<if test='empYn == "N"'>
					  AND t1.EMP_ONLY_YN = 'N'
					</if>	
					<if test="searchConditionBrandIds != null">
					  AND t1.BRND_ID IN
					  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
					  	 #{brands}
					  	</foreach>
					</if>
		  			<!-- NEW -->
					<if test="newGodCondition != null">
					  	AND t1.REG_DT &gt;= #{newGodCondition}
					</if>

	        ) t3
	        , DSP_CTGRY_CNNC_GOD t2 
	        , DSP_CTGRY t4
	
	        WHERE 
	          t3.GOD_NO = t2.GOD_NO
	          AND t2.DSP_CTGRY_NO = t4.DSP_CTGRY_NO
	          AND t2.DSP_YN = 'Y'
	          AND t4.APL_MALL_ID = 'DXM'
	          AND t4.DELETE_YN = 'N'
	          AND t4.DSP_YN = 'Y'
	          AND t4.SPCIFY_URL_DSP_YN = 'N'
	     ) a
	     <if test="sttSectCd != null">
		 	JOIN DSP_BST_GOD t8 ON a.GOD_NO = t8.GOD_NO AND t8.stt_sect_cd = #{sttSectCd}
		 </if>
          
          GROUP BY 
                a.DSP_CTGRY_NO
                <!-- 
               ,a.UPPER_DSP_CTGRY_NO
               ,a.DSP_CTGRY_NM
               ,a.CTGRY_TP_CD
               ,a.GOD_DSP_UNIT_CD
               ,a.CTGRY_DPTH_CD
               ,a.DSP_GOD_SORT_STDR_CD
               ,a.LEAF_CTGRY_YN
               ,a.DSP_YN
               ,a.SPCIFY_URL_DSP_YN
               ,a.CTGRY_DIV_LNE_YN
               ,a.CTGRY_DIV_LNE_CSS_CD
               ,a.DELETE_YN
               ,a.CTGRY_OUTPT_TP_CD
               ,a.OUTPT_SECT_CD
               ,a.OUTPT_LINK_URL
               ,a.SORT_SEQ
               ,a.APL_MALL_ID
               ,a.DSP_BRND_ID
               ,a.EXPSR_LVL_CD
               ,a.RPRST_IMG_FILE_NM
               ,a.RPRST_IMG_FILE_URL
               ,a.RPRST_IMG_ALTRTV_CONT
               ,a.PC_MOBILE_TMPLAT_IND_USE_YN
               ,a.PC_TMPLAT_SN
               ,a.MOBILE_TMPLAT_SN
                -->
	    ) b    
	    <!-- 
	    LEFT OUTER JOIN DSP_CTGRY_LANG t4 ON b.DSP_CTGRY_NO = T4.DSP_CTGRY_NO AND T4.LANG_CD = #{lang,jdbcType=VARCHAR}  
	 	-->
	 	
	 	
	 	

	</select>

	<select id="selectLocationDspCtgryList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="ctgryFoResultMap">
        SELECT /* [display.category.xml][selectLocationDspCtgryList][selectLocationDspCtgryList][주문욱] */ 
                t1.DSP_CTGRY_NO
               ,t1.UPPER_DSP_CTGRY_NO
               ,t1.DSP_CTGRY_NM
               ,t1.CTGRY_DPTH_CD
               ,t1.APL_MALL_ID
               ,t1.DSP_BRND_ID
               ,t1.EXPSR_LVL_CD
               ,t1.RPRST_IMG_FILE_NM
               ,t1.RPRST_IMG_FILE_URL
               ,t1.RPRST_IMG_ALTRTV_CONT
               ,t4.DSP_CTGRY_NO AS DCLANG_DSP_CTGRY_NO
               ,t4.LANG_CD
               ,t4.DSP_CTGRY_NM AS DCLANG_DSP_CTGRY_NM
               ,t4.RPRST_IMG_FILE_URL AS DCLANG_RPRST_IMG_FILE_URL
               ,t4.RPRST_IMG_ALTRTV_CONT AS DCLANG_RPRST_IMG_ALTRTV_CONT
               ,t4.RPRST_IMG_FILE_NM AS DCLANG_RPRST_IMG_FILE_NM
        FROM DSP_CTGRY t1 
        	LEFT OUTER JOIN DSP_CTGRY_LANG t4 ON T1.DSP_CTGRY_NO = T4.DSP_CTGRY_NO AND T4.LANG_CD = #{lang,jdbcType=VARCHAR}
        WHERE 1 = 1
        <!-- 2015년6월3일 DBA 충고로 조건에 추가 -->
          AND t1.APL_MALL_ID = #{mallId,jdbcType=VARCHAR}
          AND t1.DELETE_YN = 'N'
          AND t1.DSP_YN = 'Y'
          <if test="upperCategoryNos != null and upperCategoryNos != '' and upperCategoryNos.length > 0">
			AND t1.DSP_CTGRY_NO IN
			<foreach item="ctgryNo" collection="upperCategoryNos" open="(" separator="," close=")">
			#{ctgryNo}
			</foreach>
         </if>
	</select>

	<select id="selectDspCtgryGodTotCnt3" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">

	SELECT /* [display.category.xml][selectDspCtgryGodTotCnt3][selectDspCtgryGodTotCnt3][주문욱] */ 
	       count(GOD_NO) AS TOT FROM(
		SELECT 
			t1.GOD_NO
			, t1.com_id
        FROM 
			<include refid="godSearchCondition" />
	</select>
	
	<select id="selectDspCtgryGodFoList3" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgryGodFoList3][selectDspCtgryGodFoList3][주문욱] */ 
	       b.* FROM (

	SELECT ROWNUM NO, a.*
    		FROM   (

		SELECT 
                t2.DSP_CTGRY_NO
               ,t2.GOD_NO AS DCCGOD_GOD_NO
               ,t2.RPRST_GOD_YN
               ,t2.SORT_SEQ

               ,t1.GOD_NO
               ,t1.ERP_GOD_NO
               ,t1.DSGN_GRP_NO
               ,t1.GOD_NM
               ,t1.MOBILE_GOD_NM
               ,t1.TAG_NM
               ,t1.COLOR_TAG_NM
               ,t1.THEMA_TAG_NM
               ,t1.GOD_APRV_SECT_CD
               ,t1.GOD_SALE_SECT_CD
               ,t1.SALE_BEG_DATE
               ,t1.SALE_END_DATE
               ,t1.COLOR_NM
               ,t1.COLOR_CD
               ,t1.CLOR_CHIP_IMG_URL
               ,t1.GOD_TP_CD
               ,t1.PARTMAL_SECT_CD
               ,t1.BRND_ID AS GOD_BRND_ID
               ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
               ,t1.STD_CTGRY_NO
               ,t1.TDF_SECT
               ,t1.SESON_GRP_CD
               ,t1.SESON_CD
               ,t1.PRDLST_CD
               ,t1.SRS_ID
               ,t1.LNE_ID

               ,t1.RESVE_SALE_GOD_YN
               ,t1.RESVE_ORD_PAY_SECT_CD
               ,t1.RESVE_ORD_PART_PAY_AMT
               ,t1.RESVE_ORD_PAY_CLOS_DT
               ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
               ,t1.DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_PSB_YN
               ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_CST_PLC_SN
               ,t1.GOD_WT
               ,t1.GOD_VOL
               ,t1.SHOP_PKUP_PSB_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.FIRST_DSP_DT
               ,t1.PRC_CMPR_SITE_EXPSR_YN
               ,t1.GOD_SRCH_SNM
               ,t1.COM_ID
               ,t1.BUY_AGE_LMIT_CD
               ,t1.RECOMEND_SEX_CD
               ,t1.RECOMEND_AGE_CD
               ,t1.SAFE_CRTFC_TGT_YN
               ,t1.KC_CRTFC_NO
               ,t1.INV_MANAGE_YN
               ,t1.LMTT_INV_YN
               ,t1.ERP_INV_INTRLCK_YN
               ,t1.MIN_ORD_QTY
               ,t1.MAX_ORD_QTY
               ,t1.OTLT_YN
				<!--  
               ,t1.RTL_PRC
               ,t1.CSMR_PRC
               -->
               ,t1.EMP_PRC
               ,t1.REGTR_ID
               ,t1.REG_DT
               ,t1.UDTER_ID
               ,t1.UDT_DT
               
               ,t5.BRND_ID
               ,t5.UPPER_BRND_ID
               ,t5.BRND_NM
               ,t5.BRND_DSCR
               ,t5.BRND_IMG_URL
               ,t5.USE_YN
               ,t5.SORT_SEQ AS BRND_SORT_SEQ
               
               ,t3.GOD_NO AS GLGNM_GOD_NO
               ,t3.LANG_CD
               ,t3.GOD_NM AS GLGNM_GOD_NM
               ,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
               ,t3.TAG_NM AS GLGNM_TAG_NM
               ,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
               ,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
               ,t3.COLOR_NM AS GLGNM_COLOR_NM

			   ,t9.RTL_PRC AS RTL_PRC
               ,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
               ,CASE
               		WHEN t9.GOD_DC_RT > 0 THEN
						ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
               	ELSE
			        	(CASE
			            	WHEN t9.RTL_PRC > t9.CSMR_PRC
			             	THEN
			                	ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
			              	ELSE
			                	0
			        	END)               	
               	END AS DGPRC_GOD_DC_RT	
      		   ,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT

               <!-- , (SELECT COUNT(gge.GOD_NO) FROM GOD_GOD_EVL gge WHERE gge.GOD_NO = T1.GOD_NO ) AS GODAS -->
               , t10.GOD_EVL_COUNT AS GODAS
        FROM 
			<include refid="godSearchCondition" />

		AND ROWNUM &lt;= #{endIndex}) b
		WHERE NO &gt;= #{beginIndex}
	</select>
	
	<sql id="godSearchCondition">
        	GOD t1 
        	<!-- JOIN GOD_ITM t7 ON t1.GOD_NO = t7.GOD_NO -->
        	<if test="prcSectCd != null">
        	JOIN DSP_GOD_PRC t9 ON (
        		t1.GOD_NO = t9.GOD_NO 
        		AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
        		<!-- AND t9.PRC_SECT_CD = #{prcSectCd,jdbcType=VARCHAR} -->
        		<if test='spcPrmTp != null and spcPrmTp != ""'>
        		AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
		        AND t9.PRC_SECT_CD = CASE
		                             WHEN (SELECT 1
		                                     FROM DSP_GOD_PRC A
		                                    WHERE A.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND A.GOD_NO = t1.GOD_NO AND ROWNUM = 1)
		                                     IS NOT NULL
		                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
		        </if>
		        <if test='spcPrmTp == null or spcPrmTp == ""'>
				AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
		        </if>
        		AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
        	)
			</if>
 
        	JOIN DSP_CTGRY_CNNC_GOD t2 ON t1.GOD_NO = T2.GOD_NO AND T2.DSP_YN = 'Y'
        	JOIN DSP_CTGRY t6 ON t2.DSP_CTGRY_NO = t6.DSP_CTGRY_NO AND t6.DSP_YN = 'Y'
        	JOIN SYS_BRND t5 ON T1.BRND_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
        	LEFT OUTER JOIN GOD_LANGBY_GOD_NM t3 ON t1.GOD_NO=T3.GOD_NO AND T3.LANG_CD = #{lang,jdbcType=VARCHAR}
        	LEFT OUTER JOIN DSP_BST_GOD_EVL ON t1.GOD_NO=T10.GOD_NO
 			<!--
			<if test="special == 'BRAND'">
			JOIN DSP_BRND_BST_GOD t8 ON t1.BRND_ID = t8.BRND_ID AND t1.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
			</if>
			<if test="special != 'BRAND'">
        	JOIN DSP_CTGRY_BST_GOD t8 ON t2.DSP_CTGRY_NO = t8.DSP_CTGRY_NO AND t2.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
        	</if>
			-->
		WHERE 1 = 1 
		  AND t2.DSP_CTGRY_NO like #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
		  <!--  
		  AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD')
          AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS')  &lt;= sysdate
          AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate
          -->
          AND t1.DSP_YN = 'Y'

          AND t1.SPCIFY_URL_DSP_YN = 'N'
           
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	

		  <if test="searchConditionBrandIds != null">
		  AND t1.BRND_ID IN
		  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
		  	 #{brands}
		  	</foreach>
		  </if>

		  AND t6.DELETE_YN = 'N'
		  <!-- 대카테고리 NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= #{newGodCondition}
		  </if>
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  	
		  </trim>
		  )
		  </if>

		  <if test="searchConditionMaterials != null">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>

		ORDER BY
		 t1.GOD_SALE_SECT_CD ASC,
		<choose>
	      <when test="sortColumn eq 'NEW_GOD'">
	          t1.REG_DT DESC,
	      </when>
	      <when test="sortColumn eq 'SALE_QTY'">
	      <!-- 2015-5-9 BEST 등에서 사용할 예정 데이터가 없어 주석처리
			  t8.STT_RANK ASC, -->
	      </when>
	      <when test="sortColumn eq 'DC_RT'">
	      	  t9.GOD_DC_RT DESC,
	      </when>
	      <when test="sortColumn eq 'LWET_PRC'">
			  t9.LAST_SALE_PRC ASC,
	      </when>
	      <when test="sortColumn eq 'MX_PRC'">
			  t9.LAST_SALE_PRC DESC,
	      </when>
	      <when test="sortColumn eq 'GODAS'">
			  GODAS DESC,
	      </when>
	      <otherwise>
	           t1.REG_DT DESC,
	      </otherwise>
   		</choose>
   			 t1.GOD_NO ASC
			) a 
    		WHERE 1 = 1 
    		<!-- 조건필터 중 사이즈 자사 대상-->
		    <if test="searchConditionSizes != null">
				AND EXISTS (
					SELECT 1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
					   AND a.COM_ID = s2.COM_ID
					   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
					   AND s1.OPT_CD_1 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
					   AND s1.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						  #{size}
					   </foreach>
					UNION ALL
					SELECT	1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
					   AND a.COM_ID = s2.COM_ID
					   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				 	   AND s1.OPT_CD_2 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
					   AND s1.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						   #{size}
					   </foreach>
					UNION ALL
					SELECT 1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
					   AND a.COM_ID = s2.COM_ID
				 	   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
					   AND s1.OPT_CD_3 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
					   AND s1.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						   #{size}
					   </foreach>
				)
			</if>
			<if test="searchConditionStyles != null">
				AND EXISTS (
					SELECT 1
					FROM GOD_STYLE i
					WHERE 
						i.STYLE_CD IN
					  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
					  	 #{style}
					  	</foreach>
						AND a.GOD_NO = i.GOD_NO
				)
			</if>
	</sql>
	
	<select id="selectGodTagResveFoList" parameterType="godTagResve" resultType="godTagResve">
	<![CDATA[
        SELECT  /* [display.category.xml][selectGodTagResveFoList][selectGodTagResveFoList][주문욱] */ 
                GOD_NO
               ,RESVE_BEG_DT
               ,RESVE_END_DT
               ,TAG_NM
               ,COLOR_TAG_NM
               ,THEMA_TAG_NM
               ,RESVE_YN
               ,REGTR_ID
               ,REG_DT
               ,UDTER_ID
               ,UDT_DT
        FROM GOD_TAG_RESVE
        WHERE 1 = 1
            AND GOD_NO = #{godNo,jdbcType=VARCHAR}
            AND RESVE_BEG_DT <= sysdate
            AND RESVE_END_DT >= sysdate
        ORDER BY RESVE_BEG_DT desc
     ]]>
	</select>
	
	<select id="selectGodLangbyTagSesveFoList" parameterType="godLangbyTagResve" resultType="godLangbyTagResve">
	<![CDATA[
	    SELECT /* [display.category.xml][selectGodLangbyTagSesveFoList][selectGodLangbyTagSesveFoList][주문욱] */ 
                GOD_NO
               ,LANG_CD
               ,RESVE_BEG_DT
               ,RESVE_END_DT
               ,TAG_NM
               ,COLOR_TAG_NM
               ,THEMA_TAG_NM
               ,RESVE_YN
               ,REGTR_ID
               ,REG_DT
               ,UDTER_ID
               ,UDT_DT
        FROM GOD_LANGBY_TAG_RESVE
        WHERE 1 = 1 
	        AND  GOD_NO = #{godNo,jdbcType=VARCHAR}
	        AND  LANG_CD = #{langCd,jdbcType=VARCHAR}
            AND RESVE_BEG_DT <= sysdate
            AND RESVE_END_DT >= sysdate
        ORDER BY RESVE_BEG_DT desc
    ]]>
	</select>
	
	<select id="selectGodIconFoList" parameterType="string" resultMap="godIconFoResultMap">
        SELECT /* [display.category.xml][selectGodIconFoList][selectGodIconFoList][주문욱] */ 
                t2.GOD_NO
               ,t2.ICON_TURN AS GTCNNC_ICON_TURN
               
               ,t1.ICON_TURN
               ,t1.ICON_NM
               ,t1.ICON_IMG_URL
               ,t1.ICON_DSCR
               ,t1.AUTO_DSP_YN
               
        FROM GOD_ICON t1 JOIN GOD_ICON_CNNC t2 ON t1.ICON_TURN = t2.ICON_TURN
        WHERE 1 = 1
            AND t2.GOD_NO = #{value}
        ORDER BY t2.ICON_TURN ASC
	</select>
	
	<select id="selectGodIconFoList2" parameterType="java.util.HashMap" resultMap="godIconFoResultMap">
        SELECT /* [display.category.xml][selectGodIconFoList2][selectGodIconFoList2][주문욱] */ 
                t2.GOD_NO
               ,t2.ICON_TURN AS GTCNNC_ICON_TURN
               
               ,t1.ICON_TURN
               ,t1.ICON_NM
               ,t1.ICON_IMG_URL
               ,t1.ICON_DSCR
               ,t1.AUTO_DSP_YN
               
        FROM GOD_ICON t1 JOIN GOD_ICON_CNNC t2 ON t1.ICON_TURN = t2.ICON_TURN
        WHERE 1 = 1
        	<if test="godNoList != null">
            	AND (0, t2.GOD_NO) IN (<foreach item="godNo" collection="godNoList" separator=",">(0, #{godNo})</foreach>)            
		  	</if>
        ORDER BY t2.ICON_TURN ASC
	</select>
	
	<select id="selectGodImgList" parameterType="string" resultType="godImg">
        SELECT /* [display.category.xml][selectGodImgList][selectGodImgList][주문욱] */ 
                GOD_NO
               ,IMG_TURN
               ,IMG_SIZE_CD
               ,IMG_URL
               ,RPRST_IMG_YN
               ,IMG_DSCR
               ,IMG_APRV_YN
               ,IMG_USE_YN
               ,IMG_LAST_UDT_DT
        FROM GOD_IMG
        WHERE 1 = 1
        	AND IMG_USE_YN = 'Y'
            AND GOD_NO = #{value}
        ORDER BY IMG_TURN ASC
	</select>

	<select id="selectMbGodImgList" parameterType="map" resultType="godImg">
        SELECT /* [display.category.xml][selectMbGodImgList][상품 이미지 리스트 조회][박상혁] */ 
                GOD_NO
               ,IMG_TURN
               ,IMG_SIZE_CD
               ,IMG_URL
               ,RPRST_IMG_YN
               ,IMG_DSCR
               ,IMG_APRV_YN
               ,IMG_USE_YN
               ,IMG_LAST_UDT_DT
        FROM GOD_IMG
        WHERE 1 = 1
        	AND IMG_USE_YN = 'Y'
        	AND IMG_SIZE_CD = '280X370'
            AND GOD_NO IN
           <foreach item="godNo" collection="godNos" open="(" separator="," close=")">
		  	 #{godNo}
		  	</foreach>
		  	
        ORDER BY IMG_TURN ASC
	</select>
	
	<select id="selectDspCtgrySpecialLimitGodList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgrySpecialLimitGodList][selectDspCtgrySpecialLimitGodList][주문욱] */ 
	       b.* FROM (
	SELECT ROWNUM NO, a.*
    		FROM   (

		SELECT 
 
                t2.DSP_CTGRY_NO
               ,t2.GOD_NO AS DCCGOD_GOD_NO
               ,t2.RPRST_GOD_YN
               ,t2.SORT_SEQ

               ,t1.GOD_NO
               ,t1.ERP_GOD_NO
               ,t1.DSGN_GRP_NO
               ,t1.GOD_NM
               ,t1.MOBILE_GOD_NM
               ,t1.TAG_NM
               ,t1.COLOR_TAG_NM
               ,t1.THEMA_TAG_NM
               ,t1.GOD_APRV_SECT_CD
               ,t1.GOD_SALE_SECT_CD
               ,t1.SALE_BEG_DATE
               ,t1.SALE_END_DATE
               ,t1.COLOR_NM
               ,t1.COLOR_CD
               ,t1.CLOR_CHIP_IMG_URL
               ,t1.GOD_TP_CD
               ,t1.PARTMAL_SECT_CD
               ,t1.BRND_ID AS GOD_BRND_ID
               ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
               ,t1.STD_CTGRY_NO
               ,t1.TDF_SECT
               ,t1.SESON_GRP_CD
               ,t1.SESON_CD
               ,t1.PRDLST_CD
               ,t1.SRS_ID
               ,t1.LNE_ID

               ,t1.RESVE_SALE_GOD_YN
               ,t1.RESVE_ORD_PAY_SECT_CD
               ,t1.RESVE_ORD_PART_PAY_AMT
               ,t1.RESVE_ORD_PAY_CLOS_DT
               ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
               ,t1.DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_PSB_YN
               ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_CST_PLC_SN
               ,t1.GOD_WT
               ,t1.GOD_VOL
               ,t1.SHOP_PKUP_PSB_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.FIRST_DSP_DT
               ,t1.PRC_CMPR_SITE_EXPSR_YN
               ,t1.GOD_SRCH_SNM
               ,t1.COM_ID
               ,t1.BUY_AGE_LMIT_CD
               ,t1.RECOMEND_SEX_CD
               ,t1.RECOMEND_AGE_CD
               ,t1.SAFE_CRTFC_TGT_YN
               ,t1.KC_CRTFC_NO
               ,t1.INV_MANAGE_YN
               ,t1.LMTT_INV_YN
               ,t1.ERP_INV_INTRLCK_YN
               ,t1.MIN_ORD_QTY
               ,t1.MAX_ORD_QTY
               ,t1.OTLT_YN
				<!--
               ,t1.RTL_PRC
               ,t1.CSMR_PRC
               -->
               ,t1.EMP_PRC
               ,t1.REGTR_ID
               ,t1.REG_DT
               ,t1.UDTER_ID
               ,t1.UDT_DT
               
               ,t5.BRND_ID
               ,t5.UPPER_BRND_ID
               ,t5.BRND_NM
               ,t5.BRND_DSCR
               ,t5.BRND_IMG_URL
               ,t5.USE_YN
               ,t5.SORT_SEQ AS BRND_SORT_SEQ
               
               ,t3.GOD_NO AS GLGNM_GOD_NO
               ,t3.LANG_CD
               ,t3.GOD_NM AS GLGNM_GOD_NM
               ,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
               ,t3.TAG_NM AS GLGNM_TAG_NM
               ,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
               ,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
               ,t3.COLOR_NM AS GLGNM_COLOR_NM

			   ,t9.RTL_PRC  AS RTL_PRC
               ,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
               ,CASE
               		WHEN t9.GOD_DC_RT > 0 THEN
						ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
               	ELSE
			        	(CASE
			            	WHEN t9.RTL_PRC > t9.CSMR_PRC
			             	THEN
			                	ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
			              	ELSE
			                	0
			        	END)               	
               	END AS DGPRC_GOD_DC_RT
      		   ,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT

        FROM 
			<include refid="godSearchCondition" />
			
			AND ROWNUM &lt;= #{endIndex}) b
		WHERE NO &gt;= #{beginIndex}
	</select>
	
	
	<resultMap type="com.plgrim.ncp.biz.display.result.GodTagResveFoResult" id="resultMapGodTagResve">
        <result property="godNo" column="GOD_NO" />
        <result property="godTagResve.tagNm" column="TAG_NM" />
        <result property="godLangbyTagResve.tagNm" column="GLTR_TAG_NM"/>
	</resultMap>
	<select id="selectGodTagResve" parameterType="map" resultMap="resultMapGodTagResve">
		SELECT /* [display.category.xml][selectGodTagResve][selectGodTagResve][주문욱] */ 
		       * FROM(
			SELECT ROWNUM AS NO, a.* FROM (
				SELECT 
				     T20.TAG_NM
				   , T21.TAG_NM AS GLTR_TAG_NM 
				FROM 
   					GOD_TAG_RESVE_CNNC T19
    				LEFT OUTER JOIN GOD_TAG_RESVE T20 ON T19.TAG_RESVE_SN = T20.TAG_RESVE_SN
    				LEFT OUTER JOIN GOD_LANGBY_TAG_RESVE T21 ON t20.TAG_RESVE_SN = t21.TAG_RESVE_SN AND t21.LANG_CD=#{lang,jdbcType=VARCHAR}
				WHERE 1 = 1
					AND T19.GOD_NO = #{godNo,jdbcType=VARCHAR}
					AND T20.USE_YN = 'Y'
					AND T20.RESVE_BEG_DT &lt;= sysdate
            		AND T20.RESVE_END_DT &gt;= sysdate

					ORDER BY T19.REG_DT DESC
			) a
		) b
		WHERE 1=1
		AND b.NO = 1
	</select>
	
	<select id="selectGodTagResve2" parameterType="map" resultMap="resultMapGodTagResve">
            SELECT /* [display.category.xml][selectGodTagResve2][selectGodTagResve2][주문욱] */ 
                  a.GOD_NO
                , a.TAG_NM
                , T21.TAG_NM AS GLTR_TAG_NM 
             FROM (
                SELECT 
                      T19.GOD_NO
                     ,T19.TAG_RESVE_SN
                     ,T20.TAG_NM
                FROM 
                       GOD_TAG_RESVE_CNNC T19
                JOIN GOD_TAG_RESVE T20 ON T19.TAG_RESVE_SN = T20.TAG_RESVE_SN AND T20.USE_YN = 'Y'
                WHERE 1 = 1
                <if test="godNoList != null">
                    AND (0, T19.GOD_NO) IN(
                    <foreach item="goodNo" collection="godNoList" separator="," >(0, #{goodNo})</foreach>
                    )              	
		  		</if>
                    AND T20.RESVE_BEG_DT &lt;= sysdate
                    AND T20.RESVE_END_DT &gt;= sysdate
                    ORDER BY T19.GOD_NO, T19.REG_DT DESC
            ) a
            LEFT OUTER JOIN GOD_LANGBY_TAG_RESVE T21 ON a.TAG_RESVE_SN = t21.TAG_RESVE_SN AND t21.LANG_CD=#{lang,jdbcType=VARCHAR}
	</select>
	
	<select id="selectDspCtgryCnncGodNoList_bak" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="string">
		SELECT  /* [display.category.xml][selectDspCtgryCnncGodNoList][selectDspCtgryCnncGodNoList][주문욱] */ 
      	DISTINCT t1.GOD_NO, t1.PRDLST_CD
		FROM
        	GOD t1 
        	JOIN DSP_CTGRY_CNNC_GOD t2 ON t1.GOD_NO = T2.GOD_NO AND T2.DSP_YN = 'Y'
        	JOIN DSP_CTGRY t6 ON t2.DSP_CTGRY_NO = t6.DSP_CTGRY_NO AND t6.DSP_YN = 'Y'
        	JOIN SYS_BRND t5 ON T1.BRND_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
		WHERE 1 = 1 
		  AND t2.DSP_CTGRY_NO like #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
		  <!--  
		  AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD')
          AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS')  &lt;= sysdate
          AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate
          -->
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null">
		  AND t1.BRND_ID IN
		  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
		  	 #{brands}
		  	</foreach>
		  </if>
		  AND t6.DELETE_YN = 'N'
		  <!-- NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= #{newGodCondition}
		  </if>
	</select>
	
	<select id="selectDspCtgryCnncGodNoList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="string">
	SELECT /* [display.category.xml][selectDspCtgryCnncGodNoList][selectDspCtgryCnncGodNoList][주문욱] */ 
		 a.GOD_NO
		FROM (
		SELECT /*+ index(t1 PK_GOD) */   
      			t1.GOD_NO
      		  , t1.PRDLST_CD
      		  , t1.com_id
		FROM
        	GOD t1 
            <if test="lang != 'KOR' ">
              /*해외판매여부 체크*/
            JOIN	GOD_LANGBY_GOD_NM glgn
                ON 	glgn.GOD_NO = t1.GOD_NO
                AND glgn.LANG_CD = #{lang}
                AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
            </if>
        	JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID
		WHERE 1 = 1
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT', 'SALE_PROGRS_PKUP')
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_GRP_ID IN
			<foreach item="brand" collection="searchConditionBrandIds" open="(" separator="," close=")">
				#{brand}
			</foreach>
		  </if>
		  <!-- 대카테고리 NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= sysdate-14
		  </if>
		  AND t1.GOD_NO IN (
		  	SELECT 
                DISTINCT t2.GOD_NO
            FROM DSP_CTGRY_CNNC_GOD t2
            JOIN DSP_CTGRY t6 ON t2.dsp_ctgry_no = t6.dsp_ctgry_no AND t6.dsp_yn = 'Y'
            where t6.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%' AND t2.dsp_yn = 'Y' 
                        AND NOT EXISTS (
                         
                            SELECT 1 
                              FROM dsp_ctgry 
                             WHERE dsp_ctgry_no = t6.upper_dsp_ctgry_no 
                               AND DSP_YN = 'N'
                            )
		  )
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>
        <if test="lang != 'KOR' ">
        /*해외판매여부 체크*/
        AND t1.OVSEA_DLV_PSB_YN = 'Y'
        </if>
	) a
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC K
	                                    WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>
    WHERE 1 = 1 
    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
			SELECT 1
			  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
			 WHERE a.GOD_NO = s1.GOD_NO
			   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
			   AND a.COM_ID = s2.COM_ID
			   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
	  		   AND s1.OPT_CD_1 = s2.OPT_CD
			   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
			   AND s1.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
			   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
				   #{size}
			   </foreach>
			UNION ALL
			SELECT	1
			  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
			 WHERE a.GOD_NO = s1.GOD_NO
			   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
			   AND a.COM_ID = s2.COM_ID
			   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
			   AND s1.OPT_CD_2 = s2.OPT_CD
			   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
			   AND s1.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
			   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
				  #{size}
			   </foreach>
			UNION ALL
			SELECT 1
			  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
			 WHERE a.GOD_NO = s1.GOD_NO
			   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
			   AND a.COM_ID = s2.COM_ID
			   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
			   AND s1.OPT_CD_3 = s2.OPT_CD
			   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
			   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
			   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					#{size}
			   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE 
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>

	</select>
	
	<select id="selectMbDspCtgryCnncGodNoList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="com.plgrim.ncp.biz.display.data.DspCtgryResultMbExt">
	SELECT /* [display.category.xml][selectMbDspCtgryCnncGodNoList][selectMbDspCtgryCnncGodNoList][박상혁] */
		 a.*
		FROM (
		SELECT /*+ USE_NL(T1,T5) */
      			t1.GOD_NO 	AS godNo
      		   ,DECODE(t1.BRND_GRP_ID, NULL, t1.BRND_ID, t1.BRND_GRP_ID)	AS brndId
      		   , t1.com_id
		FROM
        	GOD t1 
        	JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
		WHERE 1 = 1
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT', 'SALE_PROGRS_PKUP')
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_GRP_ID IN
		  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
		  	 #{brands}
		  	</foreach>
		  </if>
		  <!-- 대카테고리 NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= #{newGodCondition}
		  </if>
		  AND t1.GOD_NO IN (
		  	SELECT 
                DISTINCT t2.GOD_NO
            FROM DSP_CTGRY_CNNC_GOD t2
            JOIN DSP_CTGRY t6 ON t2.dsp_ctgry_no = t6.dsp_ctgry_no AND t6.dsp_yn = 'Y'
            where t6.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%' AND t2.dsp_yn = 'Y'
            AND NOT EXISTS
                          (SELECT /*+ NO_UNNEST */ 1
                             FROM dsp_ctgry
                            WHERE     dsp_ctgry_no =
                                         t6.upper_dsp_ctgry_no
                                  AND DSP_YN =
                                         'N') 
		  )
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>
	) a 
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.godNo = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC K
	                                    WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
		LEFT OUTER JOIN DSP_BST_GOD t8 ON a.godNo = t8.GOD_NO AND t8.stt_sect_cd = #{sttSectCd,jdbcType=VARCHAR}
	</if>
    WHERE 1 = 1 
    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_1 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT	1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_2 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
			  	 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
		 		   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_3 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE 
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>

	</select>

	<select id="selectDspCtgryGodFoList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgryGodFoList][selectDspCtgryGodFoList][주문욱] */
		f.*
         ,(
             SELECT  LISTAGG(
             				(
             				CASE WHEN A.clor_chip_img_url IS NOT NULL
    							THEN A.clor_chip_img_url
    							ELSE B.color_style_cd
    						END)
             			, ',') WITHIN GROUP (ORDER BY  B.COLOR_STYLE_CD)  AS COLOR_STYLE_CD
               FROM GOD A
           JOIN INF_COLOR_GRP B ON (A.COLOR_CD = B.COLOR_GRP_CD AND B.LANGUAGE = DECODE( #{lang,jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
              WHERE A.DSP_YN = 'Y'
                AND A.GOD_APRV_SECT_CD = 'APRV_COMPT'
                AND A.GOD_SALE_SECT_CD IN ('SLDOUT', 'SALE_PROGRS')
            AND A.PARTMAL_SECT_CD ='MCOM'
                AND EXISTS
                       (SELECT 1
                          FROM DSP_CTGRY_CNNC_GOD T1
                               INNER JOIN DSP_CTGRY T2
                                  ON (T1.DSP_CTGRY_NO = T2.DSP_CTGRY_NO AND T2.DSP_YN = 'Y' AND T2.DELETE_YN = 'N')
                         WHERE T1.GOD_NO = A.GOD_NO AND T1.DSP_YN = 'Y'
                       )
              AND f.DSGN_GRP_NO  = A.DSGN_GRP_NO
             )  AS COLOR_STYLE_CD
	FROM(
		SELECT
			e.*
			,T11.IMG_URL AS IMG_FRONT_URL
			,T12.IMG_URL AS IMG_BACK_URL
			,T13.MNFCTUR_DATE
		FROM(
			SELECT
				d.* ,ROWNUM AS NO
			FROM(
				SELECT
					c.*
				FROM(
					SELECT
						 b.*
						<if test="lang != 'KOR' ">
						,t3.GOD_NO AS GLGNM_GOD_NO
						,t3.LANG_CD
						,t3.GOD_NM AS GLGNM_GOD_NM
						,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
						,t3.TAG_NM AS GLGNM_TAG_NM
						,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
						,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
						,t3.COLOR_NM AS GLGNM_COLOR_NM
						</if>
						,nvl(T10.GOD_EVL_COUNT, 0) AS GODAS
					FROM(
						SELECT /*+ use_nl(t9) */
							 a.*
							,t9.RTL_PRC AS RTL_PRC
							,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
							,CASE
								WHEN t9.GOD_DC_RT > 0 THEN
									ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
							 ELSE
								(CASE
									WHEN t9.RTL_PRC > t9.CSMR_PRC
									THEN
										ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
									ELSE
									0
								END)
							 END AS DGPRC_GOD_DC_RT
							,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT
							,t8.STT_RANK
						FROM (
							<!-- SELECT /*+ leading(t1) use_nl(t2@sub) use_nl(t5) */  -->
							SELECT /*+ index(t1 PK_GOD) */
									t1.GOD_NO
								   ,t1.ERP_GOD_NO
								   ,t1.DSGN_GRP_NO
								   ,t1.GOD_NM
								   ,t1.MOBILE_GOD_NM
								   ,t1.TAG_NM
								   ,t1.COLOR_TAG_NM
								   ,t1.THEMA_TAG_NM
								   ,t1.TEXT_ICON_CONT
								   ,t1.GOD_APRV_SECT_CD
								   ,t1.GOD_SALE_SECT_CD
								   ,t1.SALE_BEG_DATE
								   ,t1.SALE_END_DATE
								   ,t1.COLOR_NM
								   ,t1.COLOR_CD
								   ,t1.CLOR_CHIP_IMG_URL
								   ,t1.GOD_TP_CD
								   ,t1.PARTMAL_SECT_CD
								   ,t1.BRND_ID AS GOD_BRND_ID
								   ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
								   ,t1.STD_CTGRY_NO
								   ,t1.TDF_SECT
								   ,t1.SESON_GRP_CD
								   ,t1.SESON_CD
								   ,t1.PRDLST_CD
								   <!--
								   ,t1.SRS_ID
								   ,t1.LNE_ID
								   ,t1.RESVE_SALE_GOD_YN
								   ,t1.RESVE_ORD_PAY_SECT_CD
								   ,t1.RESVE_ORD_PART_PAY_AMT
								   ,t1.RESVE_ORD_PAY_CLOS_DT
								   ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
								   ,t1.DMSTC_DLV_CST_PLC_SN
								   ,t1.OVSEA_DLV_PSB_YN
								   ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
								   ,t1.OVSEA_DLV_CST_PLC_SN
								   ,t1.GOD_WT
								   ,t1.GOD_VOL
								   ,t1.SHOP_PKUP_PSB_YN
								   ,t1.DSP_YN
								   ,t1.SPCIFY_URL_DSP_YN
								   ,t1.FIRST_DSP_DT
								   ,t1.PRC_CMPR_SITE_EXPSR_YN
								   ,t1.GOD_SRCH_SNM
								   ,t1.COM_ID
								   ,t1.BUY_AGE_LMIT_CD
								   ,t1.RECOMEND_SEX_CD
								   ,t1.RECOMEND_AGE_CD
								   ,t1.SAFE_CRTFC_TGT_YN
								   ,t1.KC_CRTFC_NO
								   ,t1.INV_MANAGE_YN
								   ,t1.LMTT_INV_YN
								   ,t1.ERP_INV_INTRLCK_YN
								   ,t1.MIN_ORD_QTY
								   ,t1.MAX_ORD_QTY
									-->
								   ,t1.OTLT_YN
								   <!--
								   ,t1.RTL_PRC
								   ,t1.CSMR_PRC
								   ,t1.EMP_PRC
									-->
									<!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
									<choose>
										<when test="sortColumn == 'NEW_GOD' or sortColumn == '' or sortColumn == null ">
											/* 20160418_김병철_sr#17763 [등록일 기준 14일 이내 --> 최초승인일 기준 14일 이내] */
											, CASE
													WHEN t1.PARTMAL_SECT_CD = 'MCOM'	THEN	(	SELECT	MAX	((	SELECT	/*+ index(t23 ix1_god_hist) */ t23.UDT_DT AS UDT_DT
																													FROM	GOD_HIST t23
																													WHERE 	t23.GOD_APRV_SECT_CD	= 'APRV_COMPT'
																													AND		t23.GOD_NO 				= t22.GOD_NO
																													AND 	rownum 					= 1
																												)) REG_DT
																									FROM	GOD t22
																									WHERE 	t22.DSGN_GRP_NO = t1.DSGN_GRP_NO
																								)
													ELSE	(	SELECT	/*+ index(t23 ix1_god_hist) */ t25.UDT_DT AS UDT_DT
																FROM 	GOD_HIST t25
																WHERE 	t1.GOD_NO 				= t25.GOD_NO
																AND 	t25.GOD_APRV_SECT_CD 	= 'APRV_COMPT'
																AND 	rownum 					= 1
															)
											END AS REG_DT
										</when>
										<otherwise>
										,t1.REG_DT
										</otherwise>
									</choose>
								   <!--
								   ,t1.UDTER_ID
								   ,t1.UDT_DT
									-->
								   ,t5.BRND_ID
								   ,t5.UPPER_BRND_ID
								   <choose>
								   <when test="lang != 'KOR' ">
								   /* 브랜드명 다국어 변환 */
								   ,t55.BRND_NM
								   </when>
								   <otherwise>
								   ,t5.BRND_NM
								   </otherwise>
								   </choose>
								   <!--
								   ,t5.BRND_DSCR
								   ,t5.BRND_IMG_URL
								   ,t5.USE_YN
								   ,t5.SORT_SEQ AS BRND_SORT_SEQ
								   -->
								   , t1.com_id
							FROM
								GOD t1
							JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID
							<if test="lang != 'KOR' ">
							/* 브랜드명 다국어 변환 */
							JOIN SYS_BRND_LANG t55 ON  T5.BRND_ID = T55.BRND_ID AND T55.LANG_CD = #{lang,jdbcType=VARCHAR}
							</if>
							WHERE 1 = 1
							  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
							  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
							  AND t1.DSP_YN = 'Y'
							  AND t1.SPCIFY_URL_DSP_YN = 'N'
							  <if test="special == 'OUTLET'">
							  AND t1.OTLT_YN = 'Y'
							  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
							  </if>
							  <if test='empYn == "N"'>
							  AND t1.EMP_ONLY_YN = 'N'
							  </if>
							  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
							  AND t1.BRND_GRP_ID IN
								<foreach item="brand" collection="searchConditionBrandIds" open="(" separator="," close=")">
									#{brand}
								</foreach>
							  </if>
							  <if test="grpBrndId != null and grpBrndId != ''">
							  AND t1.BRND_GRP_ID IN
									(
									SELECT
										brnd_id
									FROM (
										SELECT
											SB.brnd_id, SB.UPPER_BRND_ID
										FROM SYS_BRND SB
										CONNECT BY PRIOR SB.BRND_ID = SB.UPPER_BRND_ID
										AND SB.USE_YN = 'Y'
										AND SB.BRND_GRP_YN = 'Y'
										START WITH SB.BRND_ID = #{grpBrndId,jdbcType=VARCHAR}
										ORDER SIBLINGS BY SB.SORT_SEQ
									) BB
									where bb.UPPER_BRND_ID is not null
									)
							  </if>
							  <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
							  <!-- 대카테고리 NEW
							  <if test="useNew != null">
								AND t1.REG_DT &gt;= sysDate-14
							  </if>
							   -->
							  <!--
							  AND t1.GOD_NO IN (
								SELECT
									DISTINCT t2.GOD_NO
							   -->
							  AND exists (SELECT /*+ qb_name(sub) */ 1
								FROM DSP_CTGRY_CNNC_GOD t2
								JOIN DSP_CTGRY t6 ON t2.dsp_ctgry_no = t6.dsp_ctgry_no AND t6.dsp_yn = 'Y'
								where t6.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%' AND t2.dsp_yn = 'Y'
								and t2.god_no=t1.god_no
								AND NOT EXISTS (

												SELECT 1
												  FROM dsp_ctgry
												 WHERE dsp_ctgry_no = t6.upper_dsp_ctgry_no
												   AND DSP_YN = 'N'
												)
							  )
							  <!-- 검색필터 -->
							  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
								AND t5.BRND_ID IN
								<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
								 #{bestBrand}
								</foreach>
							  </if>
							  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
								AND t5.BRND_ID IN
								<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
								 #{brand}
								</foreach>
							  </if>
							  <if test="searchConditionColors != null || searchConditionColors2 != null" >
							  AND (
							  <trim suffixOverrides="OR" >
								<if test="searchConditionColors != null and searchConditionColors.length > 0" >
								t1.COLOR_CD IN
								<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
								 #{color}
								</foreach>
								OR
								</if>
								<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
								t1.CLOR_CHIP_IMG_URL IN
								<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
								 #{color2}
								</foreach>
								OR
								</if>
							  </trim>
							  )
							  </if>
							  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
								  AND EXISTS (
								  SELECT 1
								  FROM GOD_IEM_DETAIL gid
								  WHERE gid.GOD_NO = t1.GOD_NO
								  AND gid.GOD_IEM_CD = 'MATR'
								  AND gid.GOD_IEM_VAL_CD IN
								  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
									  #{matr}
								  </foreach>
								  )
							  </if>

							<if test="lang != 'KOR' ">
							/* 해외판매여부 체크 */
							AND t1.OVSEA_DLV_PSB_YN = 'Y'
							</if>
						) a
						<if test="prcSectCd != null">
							JOIN DSP_GOD_PRC t9 ON (
								a.GOD_NO = t9.GOD_NO
								AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
								<if test='spcPrmTp != null and spcPrmTp != ""'>
								AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
								AND t9.PRC_SECT_CD = CASE
													 WHEN (SELECT 1
															 FROM DSP_GOD_PRC K
															WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
															 IS NOT NULL
													 THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
								</if>
								<if test='spcPrmTp == null or spcPrmTp == ""'>
								AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
								</if>
								AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
							)
						</if>
						LEFT OUTER JOIN DSP_BST_GOD t8 ON a.GOD_NO = t8.GOD_NO AND t8.stt_sect_cd = 'RECENT_14_DAY'
						WHERE 1 = 1
						<!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
						<!-- 대카테고리 NEW -->
						<if test="useNew != null">
							AND a.REG_DT &gt;= sysDate-14
						</if>

						<!-- 조건필터 중 사이즈 자사 대상-->
						<if test="searchConditionSizes != null">
							AND EXISTS (
									SELECT 1
									  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
									 WHERE a.GOD_NO = s1.GOD_NO
							 		   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
									   AND a.COM_ID = s2.COM_ID
									   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
									   AND s1.OPT_CD_1 = s2.OPT_CD
									   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
									   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
									   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
									  	   #{size}
									   </foreach>
									UNION ALL
									SELECT	1
									  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
									 WHERE a.GOD_NO = s1.GOD_NO
									   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
									   AND a.COM_ID = s2.COM_ID
									   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
									   AND s1.OPT_CD_2 = s2.OPT_CD
									   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
									   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
									   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
										   #{size}
									   </foreach>
									UNION ALL
									SELECT 1
									  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
									 WHERE a.GOD_NO = s1.GOD_NO
									   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
									   AND a.COM_ID = s2.COM_ID
									   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
									   AND s1.OPT_CD_3 = s2.OPT_CD
									   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
									   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
							 		   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
										   #{size}
									   </foreach>
							)
						</if>
						<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
							AND EXISTS (
								SELECT 1
								FROM GOD_STYLE i
								WHERE
									i.STYLE_CD IN
									<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
									 #{style}
									</foreach>
									AND a.GOD_NO = i.GOD_NO
							)
						</if>

					) b
					<if test="lang != 'KOR' ">
					/* 해외판매여부 체크 */
					JOIN GOD_LANGBY_GOD_NM t3 ON b.GOD_NO = T3.GOD_NO AND T3.LANG_CD = #{lang,jdbcType=VARCHAR} AND T3.OVSEA_DSP_STAT_CD = 'DSP_APRV'
					</if>
					LEFT OUTER JOIN DSP_BST_GOD_EVL T10 On b.GOD_NO=T10.GOD_NO
				) c
				ORDER BY
				 c.GOD_SALE_SECT_CD ASC,
				<choose>
					<when test="sortColumn == 'NEW_GOD'">
						c.REG_DT DESC, c.DSGN_GRP_NO ASC,
					</when>
					<when test="sortColumn == 'SALE_QTY'">
						c.STT_RANK ASC,
					</when>
					<when test="sortColumn == 'DC_RT'">
						c.DGPRC_GOD_DC_RT DESC,
					</when>
					<when test="sortColumn == 'LWET_PRC'">
						c.DGPRC_LAST_SALE_PRC ASC,
					</when>
					<when test="sortColumn == 'MX_PRC'">
						c.DGPRC_LAST_SALE_PRC DESC,
					</when>
					<when test="sortColumn == 'GODAS'">
						c.GODAS DESC,
					</when>
					<otherwise>
						c.REG_DT DESC, c.DSGN_GRP_NO ASC,
					</otherwise>
				</choose>
					c.GOD_NO ASC
			) d
		) e
	LEFT OUTER JOIN GOD_IMG T11 ON e.GOD_NO = T11.GOD_NO AND T11.IMG_TP_CD = 'THNAIL' AND T11.IMG_TURN = 0 AND T11.IMG_SIZE_CD = '197X260'
	LEFT OUTER JOIN GOD_IMG T12 ON e.GOD_NO = T12.GOD_NO AND T12.IMG_TP_CD = 'THNAIL' AND T12.IMG_TURN = 1 AND T12.IMG_SIZE_CD = '197X260'
	LEFT OUTER JOIN GOD_NTFC_DETAIL T13 ON e.GOD_NO = T13.GOD_NO AND T13.LANG_CD = #{lang,jdbcType=VARCHAR}
	WHERE e.NO &lt;= #{endIndex}
	) f
	WHERE NO &gt;= #{beginIndex}
	</select>






	<select id="selectDspCtgryConnSaleIdxGodList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgryConnSaleIdxGodList][주문욱] */
		f.*
         ,(
             SELECT  LISTAGG(
             				(
             				CASE WHEN A.clor_chip_img_url IS NOT NULL
    							THEN A.clor_chip_img_url
    							ELSE B.color_style_cd
    						END)
             			, ',') WITHIN GROUP (ORDER BY  B.COLOR_STYLE_CD)  AS COLOR_STYLE_CD
               FROM GOD A
           JOIN INF_COLOR_GRP B ON (A.COLOR_CD = B.COLOR_GRP_CD AND B.LANGUAGE = DECODE( #{lang,jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
              WHERE A.DSP_YN = 'Y'
                AND A.GOD_APRV_SECT_CD = 'APRV_COMPT'
                AND A.GOD_SALE_SECT_CD IN ('SLDOUT', 'SALE_PROGRS')
            AND A.PARTMAL_SECT_CD ='MCOM'
                AND EXISTS
                       (SELECT 1
                          FROM DSP_CTGRY_CNNC_GOD T1
                               INNER JOIN DSP_CTGRY T2
                                  ON (T1.DSP_CTGRY_NO = T2.DSP_CTGRY_NO AND T2.DSP_YN = 'Y' AND T2.DELETE_YN = 'N')
                         WHERE T1.GOD_NO = A.GOD_NO AND T1.DSP_YN = 'Y'
                       )
              AND f.DSGN_GRP_NO  = A.DSGN_GRP_NO
             )  AS COLOR_STYLE_CD
	FROM(
	SELECT
		e.*
		,T11.IMG_URL AS IMG_FRONT_URL
		,T12.IMG_URL AS IMG_BACK_URL
		,T13.MNFCTUR_DATE
	FROM(
	SELECT
		d.* ,ROWNUM AS NO
	FROM(
	SELECT
		c.*
	FROM(
	SELECT
		 b.*
        <if test="lang != 'KOR' ">
		,t3.GOD_NO AS GLGNM_GOD_NO
		,t3.LANG_CD
		,t3.GOD_NM AS GLGNM_GOD_NM
		,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
		,t3.TAG_NM AS GLGNM_TAG_NM
		,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
		,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
		,t3.COLOR_NM AS GLGNM_COLOR_NM
        </if>
		,nvl(T10.GOD_EVL_COUNT, 0) AS GODAS
	FROM(
	SELECT /*+ use_nl(t9) */
		 a.*
	    ,t9.RTL_PRC AS RTL_PRC
	    ,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
        ,CASE
			WHEN t9.GOD_DC_RT > 0 THEN
				ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
		 ELSE
     		(CASE
         		WHEN t9.RTL_PRC > t9.CSMR_PRC
          		THEN
             		ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
           		ELSE
             	0
     		END)
         END AS DGPRC_GOD_DC_RT
        ,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT
        ,t9.BST_GOD_SALE_IDEX
        ,t9.SALE_IDEX
		FROM (
		<!-- SELECT /*+ leading(t1) use_nl(t2@sub) use_nl(t5) */  -->
		SELECT /*+ index(t1 PK_GOD) */
      			t1.GOD_NO
               ,t1.ERP_GOD_NO
               ,t1.DSGN_GRP_NO
               ,t1.GOD_NM
               ,t1.MOBILE_GOD_NM
               ,t1.TAG_NM
               ,t1.COLOR_TAG_NM
               ,t1.THEMA_TAG_NM
               ,t1.TEXT_ICON_CONT
               ,t1.GOD_APRV_SECT_CD
               ,t1.GOD_SALE_SECT_CD
               ,t1.SALE_BEG_DATE
               ,t1.SALE_END_DATE
               ,t1.COLOR_NM
               ,t1.COLOR_CD
               ,t1.CLOR_CHIP_IMG_URL
               ,t1.GOD_TP_CD
               ,t1.PARTMAL_SECT_CD
               ,t1.BRND_ID AS GOD_BRND_ID
               ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
               ,t1.STD_CTGRY_NO
               ,t1.TDF_SECT
               ,t1.SESON_GRP_CD
               ,t1.SESON_CD
               ,t1.PRDLST_CD
               <!--
               ,t1.SRS_ID
               ,t1.LNE_ID
               ,t1.RESVE_SALE_GOD_YN
               ,t1.RESVE_ORD_PAY_SECT_CD
               ,t1.RESVE_ORD_PART_PAY_AMT
               ,t1.RESVE_ORD_PAY_CLOS_DT
               ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
               ,t1.DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_PSB_YN
               ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_CST_PLC_SN
               ,t1.GOD_WT
               ,t1.GOD_VOL
               ,t1.SHOP_PKUP_PSB_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.FIRST_DSP_DT
               ,t1.PRC_CMPR_SITE_EXPSR_YN
               ,t1.GOD_SRCH_SNM
               ,t1.COM_ID
               ,t1.BUY_AGE_LMIT_CD
               ,t1.RECOMEND_SEX_CD
               ,t1.RECOMEND_AGE_CD
               ,t1.SAFE_CRTFC_TGT_YN
               ,t1.KC_CRTFC_NO
               ,t1.INV_MANAGE_YN
               ,t1.LMTT_INV_YN
               ,t1.ERP_INV_INTRLCK_YN
               ,t1.MIN_ORD_QTY
               ,t1.MAX_ORD_QTY
                -->
               ,t1.OTLT_YN
			   <!--
               ,t1.RTL_PRC
               ,t1.CSMR_PRC
               ,t1.EMP_PRC
                -->
				<!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
				<choose>
					<when test="sortColumn == 'NEW_GOD' or sortColumn == '' or sortColumn == null ">
						/* 20160418_김병철_sr#17763 [등록일 기준 14일 이내 --> 최초승인일 기준 14일 이내] */
						, CASE
						    	WHEN t1.PARTMAL_SECT_CD = 'MCOM'	THEN	(	SELECT	MAX	((	SELECT	/*+ index(t23 ix1_god_hist) */ t23.UDT_DT AS UDT_DT
					                                              								FROM	GOD_HIST t23
					                                              								WHERE 	t23.GOD_APRV_SECT_CD	= 'APRV_COMPT'
					                                              								AND		t23.GOD_NO 				= t22.GOD_NO
					                                              								AND 	rownum 					= 1
	                                      													)) REG_DT
	                              												FROM	GOD t22
	                              												WHERE 	t22.DSGN_GRP_NO = t1.DSGN_GRP_NO
						        											)
						    	ELSE	(	SELECT	/*+ index(t23 ix1_god_hist) */ t25.UDT_DT AS UDT_DT
						          			FROM 	GOD_HIST t25
						        			WHERE 	t1.GOD_NO 				= t25.GOD_NO
						          			AND 	t25.GOD_APRV_SECT_CD 	= 'APRV_COMPT'
						          			AND 	rownum 					= 1
						          		)
						END AS REG_DT
					</when>
					<otherwise>
		           	,t1.REG_DT
					</otherwise>
				</choose>
               <!--
               ,t1.UDTER_ID
               ,t1.UDT_DT
                -->
               ,t5.BRND_ID
               ,t5.UPPER_BRND_ID
               <choose>
               <when test="lang != 'KOR' ">
               /* 브랜드명 다국어 변환 */
               ,t55.BRND_NM
               </when>
               <otherwise>
               ,t5.BRND_NM
               </otherwise>
               </choose>
               <!--
               ,t5.BRND_DSCR
               ,t5.BRND_IMG_URL
               ,t5.USE_YN
               ,t5.SORT_SEQ AS BRND_SORT_SEQ
			   -->
			   , t1.com_id
		FROM
        	GOD t1
        	JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID
            <if test="lang != 'KOR' ">
            /* 브랜드명 다국어 변환 */
            JOIN SYS_BRND_LANG t55 ON  T5.BRND_ID = T55.BRND_ID AND T55.LANG_CD = #{lang,jdbcType=VARCHAR}
            </if>
		WHERE 1 = 1
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N'
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_GRP_ID IN
			<foreach item="brand" collection="searchConditionBrandIds" open="(" separator="," close=")">
				#{brand}
			</foreach>
		  </if>
		  <if test="grpBrndId != null and grpBrndId != ''">
	      AND t1.BRND_GRP_ID IN
	        	(
	        	SELECT
				    brnd_id
				FROM (
				    SELECT
				        SB.brnd_id, SB.UPPER_BRND_ID
				    FROM SYS_BRND SB
				    CONNECT BY PRIOR SB.BRND_ID = SB.UPPER_BRND_ID
				    AND SB.USE_YN = 'Y'
				    AND SB.BRND_GRP_YN = 'Y'
				    START WITH SB.BRND_ID = #{grpBrndId,jdbcType=VARCHAR}
				    ORDER SIBLINGS BY SB.SORT_SEQ
				) BB
				where bb.UPPER_BRND_ID is not null
	        	)
	      </if>
	      <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
		  <!-- 대카테고리 NEW
		  <if test="useNew != null">
		  	AND t1.REG_DT &gt;= sysDate-14
		  </if>
		   -->
		  <!--
		  AND t1.GOD_NO IN (
		  	SELECT
                DISTINCT t2.GOD_NO
           -->
          AND exists (SELECT /*+ qb_name(sub) */ 1
            FROM DSP_CTGRY_CNNC_GOD t2
            JOIN DSP_CTGRY t6 ON t2.dsp_ctgry_no = t6.dsp_ctgry_no AND t6.dsp_yn = 'Y'
            where t6.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%' AND t2.dsp_yn = 'Y'
            and t2.god_no=t1.god_no
            AND NOT EXISTS (

                            SELECT 1
                              FROM dsp_ctgry
                             WHERE dsp_ctgry_no = t6.upper_dsp_ctgry_no
                               AND DSP_YN = 'N'
                            )
		  )
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>

        <if test="lang != 'KOR' ">
        /* 해외판매여부 체크 */
        AND t1.OVSEA_DLV_PSB_YN = 'Y'
        </if>
	) a
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC K
	                                    WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>
 	<!-- LEFT OUTER JOIN DSP_BST_GOD t8 ON a.GOD_NO = t8.GOD_NO AND t8.stt_sect_cd = 'RECENT_14_DAY' -->
    WHERE 1 = 1
    <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
    <!-- 대카테고리 NEW -->
	<if test="useNew != null">
		AND a.REG_DT &gt;= sysDate-14
	</if>

    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_1 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT	1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_2 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_3 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>

	) b
    <if test="lang != 'KOR' ">
    /* 해외판매여부 체크 */
    JOIN GOD_LANGBY_GOD_NM t3 ON b.GOD_NO = T3.GOD_NO AND T3.LANG_CD = #{lang,jdbcType=VARCHAR} AND T3.OVSEA_DSP_STAT_CD = 'DSP_APRV'
    </if>
	LEFT OUTER JOIN DSP_BST_GOD_EVL T10 On b.GOD_NO=T10.GOD_NO
	) c
	ORDER BY
	 c.GOD_SALE_SECT_CD ASC,
	<choose>
		<when test="sortColumn == 'NEW_GOD'">
			c.REG_DT DESC, c.DSGN_GRP_NO ASC,
		</when>
		<when test="sortColumn == 'SALE_QTY'">
			c.BST_GOD_SALE_IDEX DESC NULLS LAST, C.SALE_IDEX DESC NULLS LAST,
		</when>
		<when test="sortColumn == 'DC_RT'">
			c.DGPRC_GOD_DC_RT DESC,
		</when>
		<when test="sortColumn == 'LWET_PRC'">
			c.DGPRC_LAST_SALE_PRC ASC,
		</when>
		<when test="sortColumn == 'MX_PRC'">
			c.DGPRC_LAST_SALE_PRC DESC,
		</when>
		<when test="sortColumn == 'GODAS'">
			c.GODAS DESC,
		</when>
		<otherwise>
	        c.REG_DT DESC, c.DSGN_GRP_NO ASC,
		</otherwise>
	</choose>
		c.GOD_NO ASC
	) d
	) e
	LEFT OUTER JOIN GOD_IMG T11 ON e.GOD_NO = T11.GOD_NO AND T11.IMG_TP_CD = 'THNAIL' AND T11.IMG_TURN = 0 AND T11.IMG_SIZE_CD = '197X260'
		LEFT OUTER JOIN GOD_IMG T12 ON e.GOD_NO = T12.GOD_NO AND T12.IMG_TP_CD = 'THNAIL' AND T12.IMG_TURN = 1 AND T12.IMG_SIZE_CD = '197X260'
		LEFT OUTER JOIN GOD_NTFC_DETAIL T13 ON e.GOD_NO = T13.GOD_NO AND T13.LANG_CD = #{lang,jdbcType=VARCHAR}
		WHERE e.NO &lt;= #{endIndex}
		) f
	WHERE NO &gt;= #{beginIndex}
	</select>













	<select id="selectDspCtgryGodFoList_bak" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgryGodFoList][selectDspCtgryGodFoList][주문욱] */ 
		f.*
	FROM(
	SELECT
		e.*
	FROM(
	SELECT 
		d.* ,ROWNUM AS NO
	FROM(
	SELECT
		c.*
	FROM(
	SELECT 
		 b.*
		,t3.GOD_NO AS GLGNM_GOD_NO
		,t3.LANG_CD
		,t3.GOD_NM AS GLGNM_GOD_NM
		,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
		,t3.TAG_NM AS GLGNM_TAG_NM
		,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
		,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
		,t3.COLOR_NM AS GLGNM_COLOR_NM
		<!-- ,(SELECT COUNT(gge.GOD_NO) FROM GOD_GOD_EVL gge WHERE gge.GOD_NO = b.GOD_NO ) AS GODAS  -->
		,T10.GOD_EVL_COUNT AS GODAS
		,T11.IMG_URL AS IMG_FRONT_URL
		,T12.IMG_URL AS IMG_BACK_URL
		,T13.MNFCTUR_DATE
	FROM(
	SELECT 
		 a.*
		<!-- ,t8.STT_RANK -->
		,t9.RTL_PRC AS RTL_PRC
	    ,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
        ,CASE
			WHEN t9.GOD_DC_RT > 0 THEN
				ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
		 ELSE
			(CASE
				WHEN t9.RTL_PRC > t9.CSMR_PRC THEN
             	ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
           	 ELSE
				0
     		END)               	
		 END AS DGPRC_GOD_DC_RT
        ,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT
		FROM (
		SELECT 
      	DISTINCT t1.GOD_NO
               ,t1.ERP_GOD_NO
               ,t1.DSGN_GRP_NO
               ,t1.GOD_NM
               ,t1.MOBILE_GOD_NM
               ,t1.TAG_NM
               ,t1.COLOR_TAG_NM
               ,t1.THEMA_TAG_NM
               ,t1.TEXT_ICON_CONT
               ,t1.GOD_APRV_SECT_CD
               ,t1.GOD_SALE_SECT_CD
               ,t1.SALE_BEG_DATE
               ,t1.SALE_END_DATE
               ,t1.COLOR_NM
               ,t1.COLOR_CD
               ,t1.CLOR_CHIP_IMG_URL
               ,t1.GOD_TP_CD
               ,t1.PARTMAL_SECT_CD
               ,t1.BRND_ID AS GOD_BRND_ID
               ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
               ,t1.STD_CTGRY_NO
               ,t1.TDF_SECT
               ,t1.SESON_GRP_CD
               ,t1.SESON_CD
               ,t1.PRDLST_CD
               <!--
               ,t1.SRS_ID
               ,t1.LNE_ID
               ,t1.RESVE_SALE_GOD_YN
               ,t1.RESVE_ORD_PAY_SECT_CD
               ,t1.RESVE_ORD_PART_PAY_AMT
               ,t1.RESVE_ORD_PAY_CLOS_DT
               ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
               ,t1.DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_PSB_YN
               ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_CST_PLC_SN
               ,t1.GOD_WT
               ,t1.GOD_VOL
               ,t1.SHOP_PKUP_PSB_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.FIRST_DSP_DT
               ,t1.PRC_CMPR_SITE_EXPSR_YN
               ,t1.GOD_SRCH_SNM
               ,t1.COM_ID
               ,t1.BUY_AGE_LMIT_CD
               ,t1.RECOMEND_SEX_CD
               ,t1.RECOMEND_AGE_CD
               ,t1.SAFE_CRTFC_TGT_YN
               ,t1.KC_CRTFC_NO
               ,t1.INV_MANAGE_YN
               ,t1.LMTT_INV_YN
               ,t1.ERP_INV_INTRLCK_YN
               ,t1.MIN_ORD_QTY
               ,t1.MAX_ORD_QTY
                -->
               ,t1.OTLT_YN
			   <!-- 
               ,t1.RTL_PRC
               ,t1.CSMR_PRC
               ,t1.EMP_PRC
               ,t1.REGTR_ID
                -->
                
               ,t1.REG_DT
               <!--
               ,t1.UDTER_ID
               ,t1.UDT_DT
                -->
               ,t5.BRND_ID
               ,t5.UPPER_BRND_ID
               ,t5.BRND_NM
               <!-- 
               ,t5.BRND_DSCR
               ,t5.BRND_IMG_URL
               ,t5.USE_YN
               ,t5.SORT_SEQ AS BRND_SORT_SEQ
			   -->
			   , t1.com_id
		FROM
        	GOD t1 
        	JOIN DSP_CTGRY_CNNC_GOD t2 ON t1.GOD_NO = T2.GOD_NO AND T2.DSP_YN='Y'
        	JOIN DSP_CTGRY t6 ON t2.DSP_CTGRY_NO = t6.DSP_CTGRY_NO AND t6.DSP_YN = 'Y'
        	JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
		WHERE 1 = 1
		  AND t2.DSP_CTGRY_NO like #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
		  <!--  
		  AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD')
          AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS')  &lt;= sysdate
          AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate
          -->
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_ID IN
		  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
		  	 #{brands}
		  	</foreach>
		  </if>
		  AND t6.DELETE_YN = 'N'
		  <!-- 대카테고리 NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= #{newGodCondition}
		  </if>
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>

	) a 
	<!-- JOIN GOD_ITM t7 ON t1.GOD_NO = t7.GOD_NO -->
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<!-- AND t9.PRC_SECT_CD = #{prcSectCd,jdbcType=VARCHAR} -->
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC K
	                                    WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>
 	<!--
	<if test="special == 'BRAND'">
		LEFT OUTER JOIN DSP_BRND_BST_GOD t8 ON a.BRND_ID = t8.BRND_ID AND a.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
	</if>
	<if test="special != 'BRAND'">
		LEFT OUTER JOIN DSP_CTGRY_BST_GOD t8 ON a.DSP_CTGRY_NO = t8.DSP_CTGRY_NO AND a.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
	</if>
	-->
    WHERE 1 = 1 
    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_1 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT	1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_2 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
		 		   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_3 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE 
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>

	) b
	LEFT OUTER JOIN GOD_LANGBY_GOD_NM t3 ON b.GOD_NO=T3.GOD_NO AND T3.LANG_CD = #{lang,jdbcType=VARCHAR}
	LEFT OUTER JOIN DSP_BST_GOD_EVL T10 On b.GOD_NO=T10.GOD_NO
	LEFT OUTER JOIN GOD_IMG T11 ON b.GOD_NO = T11.GOD_NO AND T11.IMG_TP_CD = 'THNAIL' AND T11.IMG_TURN = 0 AND T11.IMG_SIZE_CD = '164X216'
	LEFT OUTER JOIN GOD_IMG T12 ON b.GOD_NO = T12.GOD_NO AND T12.IMG_TP_CD = 'THNAIL' AND T12.IMG_TURN = 1 AND T12.IMG_SIZE_CD = '164X216'
	LEFT OUTER JOIN GOD_NTFC_DETAIL T13 ON b.GOD_NO = T13.GOD_NO AND T13.LANG_CD = #{lang,jdbcType=VARCHAR}
	) c
	ORDER BY
	 c.GOD_SALE_SECT_CD ASC,
	<choose>
		<when test="sortColumn == 'NEW_GOD'">
			c.REG_DT DESC,
		</when>
		<when test="sortColumn == 'SALE_QTY'">
		<!-- 2015-5-9 BEST 등에서 사용할 예정 데이터가 없어 주석처리
			c.STT_RANK ASC, -->
		</when>
		<when test="sortColumn == 'DC_RT'">
			c.DGPRC_GOD_DC_RT DESC,
		</when>
		<when test="sortColumn == 'LWET_PRC'">
			c.DGPRC_LAST_SALE_PRC ASC,
		</when>
		<when test="sortColumn == 'MX_PRC'">
			c.DGPRC_LAST_SALE_PRC DESC,
		</when>
		<when test="sortColumn == 'GODAS'">
			c.GODAS DESC,
		</when>
		<otherwise>
	        c.REG_DT DESC,
		</otherwise>
	</choose>
		c.GOD_NO ASC
	) d 
	) e 
	WHERE e.NO &lt;= #{endIndex}
	) f
	WHERE NO &gt;= #{beginIndex}
	</select>
	
	<select id="selectDspCtgryGodTotCnt" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">
	SELECT /* [display.category.xml][selectDspCtgryGodTotCnt][selectDspCtgryGodTotCnt][주문욱] */
		 count(a.GOD_NO)
		FROM (
		SELECT /*+ index(t1 PK_GOD) */   
      			t1.GOD_NO
      		  , t1.PRDLST_CD
      		  , t1.com_id
      		  <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
               <choose>
                  <when test="sortColumn == 'NEW_GOD' or sortColumn == '' or sortColumn == null ">
                  	/* 20160418_김병철_sr#17763 [등록일 기준 14일 이내 --> 최초승인일 기준 14일 이내] */
                  	, CASE
					    	WHEN t1.PARTMAL_SECT_CD = 'MCOM'	THEN	(	SELECT	MAX	((	SELECT	/*+ index(t23 ix1_god_hist) */ t23.UDT_DT AS UDT_DT
				                                              								FROM	GOD_HIST t23
				                                              								WHERE 	t23.GOD_APRV_SECT_CD	= 'APRV_COMPT'
				                                              								AND		t23.GOD_NO 				= t22.GOD_NO
				                                              								AND 	rownum 					= 1
                                      													)) REG_DT
                              												FROM	GOD t22
                              												WHERE 	t22.DSGN_GRP_NO = t1.DSGN_GRP_NO
					        											)
					    	ELSE	(	SELECT	/*+ index(t23 ix1_god_hist) */ t25.UDT_DT AS UDT_DT
					          			FROM 	GOD_HIST t25
					        			WHERE 	t1.GOD_NO 				= t25.GOD_NO
					          			AND 	t25.GOD_APRV_SECT_CD 	= 'APRV_COMPT'
					          			AND 	rownum 					= 1    
					          		)
					END AS REG_DT
                  </when>
                  <otherwise>
                    ,t1.REG_DT
                  </otherwise>
              </choose>
		FROM
        	GOD t1 
            <if test="lang != 'KOR' ">
                /* 해외판매여부 체크 */
                JOIN GOD_LANGBY_GOD_NM GLGN ON T1.GOD_NO = GLGN.GOD_NO AND GLGN.LANG_CD = #{lang,jdbcType=VARCHAR} AND GLGN.OVSEA_DSP_STAT_CD = 'DSP_APRV'
            </if>
        	JOIN SYS_BRND t5 ON T1.BRND_GRP_ID = T5.BRND_ID
            <if test="lang != 'KOR' ">
            /* 브랜드명 다국어 변환 */
            JOIN SYS_BRND_LANG t55 ON  T5.BRND_ID = T55.BRND_ID AND T55.LANG_CD =  #{lang,jdbcType=VARCHAR}
            </if>
		WHERE 1 = 1
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_GRP_ID IN
			<foreach item="brand" collection="searchConditionBrandIds" open="(" separator="," close=")">
				#{brand}
			</foreach>
		  </if>
		  <if test="grpBrndId != null and grpBrndId != ''">
	      AND t1.BRND_GRP_ID IN
	        	(
	        	SELECT
				    brnd_id
				FROM (
				    SELECT
				        SB.brnd_id, SB.UPPER_BRND_ID
				    FROM SYS_BRND SB
				    CONNECT BY PRIOR SB.BRND_ID = SB.UPPER_BRND_ID
				    AND SB.USE_YN = 'Y'
				    AND SB.BRND_GRP_YN = 'Y'
				    START WITH SB.BRND_ID = #{grpBrndId,jdbcType=VARCHAR}
				    ORDER SIBLINGS BY SB.SORT_SEQ
				) BB
				where bb.UPPER_BRND_ID is not null
	        	)
	      </if>
	      <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
		  <!-- 대카테고리 NEW
		  <if test="useNew != null">
		  	AND t1.REG_DT &gt;= sysdate-14
		  </if>
		   -->
		  <!-- 		  
		  AND t1.GOD_NO IN (
		  	SELECT 
                DISTINCT t2.GOD_NO
           -->      
		  AND exists (SELECT /*+ qb_name(sub) */ 1
            FROM DSP_CTGRY_CNNC_GOD t2
            JOIN DSP_CTGRY t6 ON t2.dsp_ctgry_no = t6.dsp_ctgry_no AND t6.dsp_yn = 'Y'  
            where t6.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%' AND t2.dsp_yn = 'Y'
              and t2.god_no=t1.god_no 
             			AND NOT EXISTS (
                         
                            SELECT 1 
                              FROM dsp_ctgry 
                             WHERE dsp_ctgry_no = t6.upper_dsp_ctgry_no 
                               AND DSP_YN = 'N'
                            )
		  				
		  )
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>
        <if test="lang != 'KOR' ">
        /* 해외판매여부 체크 */
        AND t1.OVSEA_DLV_PSB_YN = 'Y'
        </if>
	) a
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC K
	                                    WHERE K.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND K.GOD_NO = T9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>
    WHERE 1 = 1 
    <!-- 20160329_jinpyo.park _sr#17444 [리스팅 정렬 로직 개선] -->
	<!-- 대카테고리 NEW -->
	<if test="useNew != null">
		AND a.REG_DT &gt;= sysdate-14
	</if>
    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_1 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT	1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_2 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_3 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE 
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>
	</select>

	<select id="selectDspCtgryGodTotCnt_bak" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">

	SELECT /* [display.category.xml][selectDspCtgryGodTotCnt][selectDspCtgryGodTotCnt][주문욱] */ 
		 count(a.GOD_NO)
		FROM (
		SELECT 
      	DISTINCT t1.GOD_NO
      	, t1.PRDLST_CD
      	, t1.com_id
		FROM
        	GOD t1 
        	JOIN DSP_CTGRY_CNNC_GOD t2 ON t1.GOD_NO = T2.GOD_NO AND T2.DSP_YN='Y'
        	JOIN DSP_CTGRY t6 ON t2.DSP_CTGRY_NO = t6.DSP_CTGRY_NO AND t6.DSP_YN = 'Y'
        	JOIN SYS_BRND t5 ON T1.BRND_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
		WHERE 1 = 1
		  AND t2.DSP_CTGRY_NO like #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
		  <!--  
		  AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD')
          AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS')  &lt;= sysdate
          AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate
          -->
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  <if test="searchConditionBrandIds != null and searchConditionBrandIds.length > 0">
		  AND t1.BRND_ID IN
		  	<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
		  	 #{brands}
		  	</foreach>
		  </if>
		  AND t6.DELETE_YN = 'N'
		  <!-- NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= #{newGodCondition}
		  </if>
		  <!-- 검색필터 -->
		  <if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
		  	 #{bestBrand}
		  	</foreach>
		  </if>
		  <if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0">
		  	AND t5.BRND_ID IN
		  	<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
		  	 #{brand}
		  	</foreach>
		  </if>
		  <if test="searchConditionColors != null || searchConditionColors2 != null" >
		  AND (
		  <trim suffixOverrides="OR" >
		  	<if test="searchConditionColors != null and searchConditionColors.length > 0" >
		  	t1.COLOR_CD IN
		  	<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
		  	 #{color}
		  	</foreach>
		  	OR 
		  	</if>
		  	<if test="searchConditionColors2 != null and searchConditionColors2.length > 0" >
		  	t1.CLOR_CHIP_IMG_URL IN
		  	<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
		  	 #{color2}
		  	</foreach>
		  	OR
		  	</if>
		  </trim>
		  )
		  </if>
		  <if test="searchConditionMaterials != null and searchConditionMaterials.length > 0">
			  AND EXISTS (
			  SELECT 1
			  FROM GOD_IEM_DETAIL gid
			  WHERE gid.GOD_NO = t1.GOD_NO
			  AND gid.GOD_IEM_CD = 'MATR'
			  AND gid.GOD_IEM_VAL_CD IN
			  <foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
				  #{matr}
			  </foreach>
			  )
		  </if>

	) a 
	<!-- JOIN GOD_ITM t7 ON t1.GOD_NO = t7.GOD_NO -->
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
            AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>
 	<!--
	<if test="special == 'BRAND'">
		LEFT OUTER JOIN DSP_BRND_BST_GOD t8 ON a.BRND_ID = t8.BRND_ID AND a.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
	</if>
	<if test="special != 'BRAND'">
		LEFT OUTER JOIN DSP_CTGRY_BST_GOD t8 ON a.DSP_CTGRY_NO = t8.DSP_CTGRY_NO AND a.GOD_NO = t8.GOD_NO AND to_char(t8.reg_dt, 'yyyyMMdd') = to_char(sysdate-1, 'yyyyMMdd') AND t8.stt_sect_cd = #{sttSectCd}
	</if>
	-->
    WHERE 1 = 1 
    <!-- 조건필터 중 사이즈 자사 대상-->
    <if test="searchConditionSizes != null">
		AND EXISTS (
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_1 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT	1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
			   	   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_2 = s2.OPT_CD
				   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
				UNION ALL
				SELECT 1
				  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
				 WHERE a.GOD_NO = s1.GOD_NO
				   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   AND a.COM_ID = s2.COM_ID
				   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT')
				   AND s1.OPT_CD_3 = s2.OPT_CD
		 		   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
				   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
				   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
					   #{size}
				   </foreach>
		)
	</if>
	<if test="searchConditionStyles != null and searchConditionStyles.length > 0">
		AND EXISTS (
			SELECT 1
			FROM GOD_STYLE i
			WHERE 
				i.STYLE_CD IN
			  	<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
			  	 #{style}
			  	</foreach>
				AND a.GOD_NO = i.GOD_NO
		)
	</if>

	</select>
	
	<select id="selectDspCtgryBestGodFoList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
	SELECT /* [display.category.xml][selectDspCtgryBestGodFoList][selectDspCtgryBestGodFoList][주문욱] */ 
		 b.*
		,t3.GOD_NO AS GLGNM_GOD_NO
		,t3.LANG_CD
		,t3.GOD_NM AS GLGNM_GOD_NM
		,t3.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
		,t3.TAG_NM AS GLGNM_TAG_NM
		,t3.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
		,t3.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
		,t3.COLOR_NM AS GLGNM_COLOR_NM
	FROM(
	SELECT 
		 a.*
		,t8.STT_RANK
		<if test="special != 'BRAND'">
		,t8.DSP_CTGRY_NO
		</if>
		,t9.RTL_PRC AS RTL_PRC
	    ,t9.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC
        ,CASE
			WHEN t9.GOD_DC_RT > 0 THEN
				ROUND ( (t9.RTL_PRC - t9.DC_PRC) / t9.RTL_PRC * 100)
         	ELSE
     			(CASE
         			WHEN t9.RTL_PRC > t9.CSMR_PRC THEN
             			ROUND ( (t9.RTL_PRC - t9.CSMR_PRC) / t9.RTL_PRC * 100)
           		  ELSE
             		0
     			END)               	
		 END AS DGPRC_GOD_DC_RT
        ,t9.CPN_DC_RT AS DGPRC_CPN_DC_RT
		FROM (
		SELECT 
      	DISTINCT t1.GOD_NO
               ,t1.ERP_GOD_NO
               ,t1.DSGN_GRP_NO
               ,t1.GOD_NM
               ,t1.MOBILE_GOD_NM
               ,t1.TAG_NM
               ,t1.COLOR_TAG_NM
               ,t1.THEMA_TAG_NM
               ,t1.GOD_APRV_SECT_CD
               ,t1.GOD_SALE_SECT_CD
               ,t1.SALE_BEG_DATE
               ,t1.SALE_END_DATE
               ,t1.COLOR_NM
               ,t1.COLOR_CD
               ,t1.CLOR_CHIP_IMG_URL
               ,t1.GOD_TP_CD
               ,t1.PARTMAL_SECT_CD
               ,t1.BRND_ID AS GOD_BRND_ID
               ,t1.BRND_GRP_ID AS GOD_BRND_GRP_ID
               ,t1.STD_CTGRY_NO
               ,t1.TDF_SECT
               ,t1.SESON_GRP_CD
               ,t1.SESON_CD
               ,t1.PRDLST_CD
               ,t1.SRS_ID
               ,t1.LNE_ID

               ,t1.RESVE_SALE_GOD_YN
               ,t1.RESVE_ORD_PAY_SECT_CD
               ,t1.RESVE_ORD_PART_PAY_AMT
               ,t1.RESVE_ORD_PAY_CLOS_DT
               ,t1.RESVE_ORD_DLIVY_PREARNGE_DATE
               ,t1.DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_PSB_YN
               ,t1.OVSEA_DLV_DMSTC_DLV_CST_PLC_SN
               ,t1.OVSEA_DLV_CST_PLC_SN
               ,t1.GOD_WT
               ,t1.GOD_VOL
               ,t1.SHOP_PKUP_PSB_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.FIRST_DSP_DT
               ,t1.PRC_CMPR_SITE_EXPSR_YN
               ,t1.GOD_SRCH_SNM
               ,t1.COM_ID
               ,t1.BUY_AGE_LMIT_CD
               ,t1.RECOMEND_SEX_CD
               ,t1.RECOMEND_AGE_CD
               ,t1.SAFE_CRTFC_TGT_YN
               ,t1.KC_CRTFC_NO
               ,t1.INV_MANAGE_YN
               ,t1.LMTT_INV_YN
               ,t1.ERP_INV_INTRLCK_YN
               ,t1.MIN_ORD_QTY
               ,t1.MAX_ORD_QTY
               ,t1.OTLT_YN
				<!--  
               ,t1.RTL_PRC
               ,t1.CSMR_PRC
               -->
               ,t1.EMP_PRC
               ,t1.REGTR_ID
               ,t1.REG_DT
               ,t1.UDTER_ID
               ,t1.UDT_DT
               
               ,t5.BRND_ID
               ,t5.UPPER_BRND_ID
               ,t5.BRND_NM
               ,t5.BRND_DSCR
               ,t5.BRND_IMG_URL
               ,t5.USE_YN
               ,t5.SORT_SEQ AS BRND_SORT_SEQ

		FROM
        	GOD t1 
        	JOIN DSP_CTGRY_CNNC_GOD t2 ON t1.GOD_NO = T2.GOD_NO AND T2.DSP_YN='Y'
        	JOIN DSP_CTGRY t6 ON t2.DSP_CTGRY_NO = t6.DSP_CTGRY_NO AND t6.DSP_YN = 'Y'
        	JOIN SYS_BRND t5 ON T1.BRND_ID = T5.BRND_ID AND T5.USE_YN = 'Y'
		WHERE 1 = 1 
		  AND t1.GOD_APRV_SECT_CD = 'APRV_COMPT'
		  AND t1.GOD_SALE_SECT_CD IN ('SALE_PROGRS','SLDOUT')
		  <!--  
		  AND t1.GOD_TP_CD IN ('GNRL_GOD', 'SET_GOD', 'PCKAGE_GOD')
          AND to_date(t1.SALE_BEG_DATE, 'YYYYMMDDHH24MISS')  &lt;= sysdate
          AND to_date(t1.SALE_END_DATE, 'YYYYMMDDHH24MISS') &gt;= sysdate
          -->
          AND t1.DSP_YN = 'Y'
          AND t1.SPCIFY_URL_DSP_YN = 'N' 
		  <if test="special == 'OUTLET'">
		  AND t1.OTLT_YN = 'Y'
		  <!-- AND t1.RTL_PRC != t1.CSMR_PRC -->
		  </if>
		  <if test='empYn == "N"'>
		  AND t1.EMP_ONLY_YN = 'N'
		  </if>	
		  AND t6.DELETE_YN = 'N'
		  <!-- NEW -->
		  <if test="newGodCondition != null">
		  	AND t1.REG_DT &gt;= sysdate-14
		  </if>
	) a 
	<!-- JOIN GOD_ITM t7 ON t1.GOD_NO = t7.GOD_NO -->
    <if test="prcSectCd != null">
    	JOIN DSP_GOD_PRC t9 ON (
			a.GOD_NO = t9.GOD_NO 
			AND t9.MALL_ID = #{mallId,jdbcType=VARCHAR}
			<!-- AND t9.PRC_SECT_CD = #{prcSectCd,jdbcType=VARCHAR} -->
			<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND t9.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
	        AND t9.PRC_SECT_CD = CASE
	                             WHEN (SELECT 1
	                                     FROM DSP_GOD_PRC t1
	                                    WHERE t1.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND t1.GOD_NO = t9.GOD_NO AND ROWNUM = 1)
	                                     IS NOT NULL
	                             THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END		          
	        </if>
	        <if test='spcPrmTp == null or spcPrmTp == ""'>
			AND t9.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}	          
	        </if>
			AND t9.LANG_CD = #{lang,jdbcType=VARCHAR}
		)
	</if>

		<if test="special == 'BRAND'">
			LEFT OUTER JOIN DSP_BRND_BST_GOD t8 ON (
				a.GOD_NO = t8.GOD_NO 
				AND t8.stt_sect_cd = #{sttSectCd}
				AND t8.BRND_ID  IN
				<foreach item="brands" collection="searchConditionBrandIds" open="(" separator="," close=")">
			  	 #{brands}
			  	</foreach>
			  	AND t8.STT_RANK &lt;= #{sttRank}
			 )
		</if>
		<if test="special != 'BRAND'">
			LEFT OUTER JOIN DSP_CTGRY_BST_GOD t8 ON ( 
				a.GOD_NO = t8.GOD_NO 
				AND t8.stt_sect_cd = #{sttSectCd}
				<if test="dspCtgryNos != null">
					AND t8.DSP_CTGRY_NO IN 
					<foreach item="dcNos" collection="dspCtgryNos" open="(" separator="," close=")">
				  	 #{dcNos}
				  	</foreach>
				</if>
			  	AND t8.STT_RANK &lt;= #{sttRank}
			)
		</if>		
	) b
	LEFT OUTER JOIN GOD_LANGBY_GOD_NM t3 ON b.GOD_NO=T3.GOD_NO AND T3.LANG_CD = #{lang,jdbcType=VARCHAR}
	ORDER BY
	 b.GOD_SALE_SECT_CD ASC,
	<choose>
		<when test="sortColumn eq 'NEW_GOD'">
			b.REG_DT DESC,
		</when>
		<when test="sortColumn eq 'SALE_QTY'">
		<!-- 2015-5-9 BEST 등에서 사용할 예정 데이터가 없어 주석처리-->
			b.STT_RANK ASC, 
		</when>
		<when test="sortColumn eq 'DC_RT'">
			b.DGPRC_GOD_DC_RT DESC,
		</when>
		<when test="sortColumn eq 'LWET_PRC'">
			b.DGPRC_LAST_SALE_PRC ASC,
		</when>
		<when test="sortColumn eq 'MX_PRC'">
			b.DGPRC_LAST_SALE_PRC DESC,
		</when>
		<otherwise>
	        b.REG_DT DESC,
		</otherwise>
	</choose>
		b.GOD_NO ASC
	</select>
	
	<select id="selectDspCtgryGodFoListTotCntNew" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">
		SELECT count(b.GOD_NO) /* [display.category.xml][selectDspCtgryGodFoListTotCntNew] [Emily] */
		  FROM (
				SELECT a.*,
						ROWNUM AS NO
				FROM (
						SELECT
								g.GOD_NO,
								g.PRDLST_CD,
								g.COM_ID,
								g.STD_CTGRY_NO
						FROM (    SELECT dccg.god_no
								,MIN(dccg.brnd_ctgry_sort_seq) AS brnd_ctgry_sort_seq
								,MIN(dccg.sort_seq) AS sort_seq
								FROM dsp_ctgry_cnnc_god dccg
								<if test="mallGubun != 'DXM'">, DSP_CTGRY_DSP_APL_BRND dc </if>
								<if test="mallGubun == 'DXM'">, DSP_CTGRY_DSP_APL dc </if>
								WHERE dc.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
								<if test="mallGubun != 'DXM'">
									AND dc.brnd_dsp_yn = 'Y'
									AND dccg.brnd_ctgry_dsp_yn = 'Y'
									AND dc.dsp_brnd_id =  #{searchConditionBrandId, jdbcType=VARCHAR}
								</if>
								<if test="mallGubun == 'DXM'">
									AND dc.dsp_yn = 'Y'
									AND dccg.dsp_yn = 'Y'
								</if>
								AND dccg.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
								AND dc.dsp_ctgry_no = dccg.dsp_ctgry_no
								GROUP BY dccg.god_no
						) t1
						JOIN god g ON t1.god_no = g.god_no
						JOIN dsp_god_prc dgp ON t1.god_no = g.god_no AND g.god_no = dgp.god_no
						JOIN sys_brnd sb ON g.brnd_grp_id = sb.brnd_id
		<if test="lang != 'KOR'">
			JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
			JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
		</if>
		WHERE 1 = 1
		AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
		AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
		AND g.SPCIFY_URL_DSP_YN = 'N'
		AND g.DSP_YN = 'Y'
		AND dgp.mall_id = #{mallId, jdbcType=VARCHAR}
		AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
			AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
		<if test='empYn == "N"'>
			AND g.EMP_ONLY_YN = 'N'
		</if>
		<if test="searchConditionBrandId != null and searchConditionBrandId != ''">
			<choose>
				<when test="searchConditionBrandId == 'MCBR' or searchConditionBrandId == 'BPBR' ">
					AND g.BRND_GRP_ID IN (
					SELECT BRND_ID
					FROM (
					SELECT sb.BRND_ID,
					sb.UPPER_BRND_ID
					FROM SYS_BRND sb
					CONNECT BY PRIOR sb.BRND_ID = sb.UPPER_BRND_ID
					AND sb.USE_YN = 'Y'
					AND sb.BRND_GRP_YN = 'Y'
					START WITH sb.BRND_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
					)
					)
				</when>
				<otherwise>
					AND g.BRND_GRP_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
				</otherwise>
			</choose>
		</if>
					<if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0 and searchConditionBrandBests != ''">
						AND sb.BRND_ID IN
						<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
							#{bestBrand}
						</foreach>
					</if>
					<if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0 and searchConditionBrandAtoZs != ''">
						AND sb.BRND_ID IN
						<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
							#{brand}
						</foreach>
					</if>
					<if test="(searchConditionColors != null and searchConditionColors != '' and searchConditionColors.length > 0) or (searchConditionColors2 != null and searchConditionColors2 != '' and searchConditionColors2.length > 0)" >
						AND (
						<trim suffixOverrides="OR" >
							<if test="searchConditionColors != null and searchConditionColors.length > 0 and searchConditionColors != ''" >
								g.COLOR_CD IN
								<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
									#{color}
								</foreach>
								OR
							</if>
							<if test="searchConditionColors2 != null and searchConditionColors2.length > 0 and searchConditionColors2 != ''" >
								g.CLOR_CHIP_IMG_URL IN
								<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
									#{color2}
								</foreach>
								OR
							</if>
						</trim>
						)
					</if>
					<if test="searchConditionMaterials != null and searchConditionMaterials.length > 0 and searchConditionMaterials != ''">
						AND EXISTS (
						SELECT 1
						FROM GOD_IEM_DETAIL gid
						WHERE gid.GOD_NO = g.GOD_NO
						AND gid.GOD_IEM_CD = 'MATR'
						AND gid.GOD_IEM_VAL_CD IN
						<foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
							#{matr}
						</foreach>
						)
					</if>
		        )a
		WHERE 1 = 1
        <if test="searchConditionSizes != null and searchConditionSizes.length > 0 and searchConditionSizes != ''">
			AND EXISTS (
					SELECT 1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
					   AND a.COM_ID = s2.COM_ID
			 		   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
					   AND s1.OPT_CD_1 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
					   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						   #{size}
					   </foreach>
					UNION ALL
					SELECT	1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
				   	   AND a.COM_ID = s2.COM_ID
					   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
					   AND s1.OPT_CD_2 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
					   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						   #{size}
					   </foreach>
					UNION ALL
					SELECT 1
					  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
					 WHERE a.GOD_NO = s1.GOD_NO
					   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
					   AND a.COM_ID = s2.COM_ID
					   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
					   AND s1.OPT_CD_3 = s2.OPT_CD
					   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
					   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
					   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
						   #{size}
					   </foreach>
			)
        </if>
        <if test="searchConditionStyles != null and searchConditionStyles.length > 0 and searchConditionStyles != ''">
            AND EXISTS (
            SELECT 1
            FROM GOD_STYLE i
            WHERE
            i.STYLE_CD IN
            <foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
                #{style}
            </foreach>
            AND a.GOD_NO = i.GOD_NO
            )
        </if>
		) b
		WHERE 1 = 1
	</select>

    <select id="selectDspCtgryGodFoListNew" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
		select /* [display.category.xml][selectDspCtgryGodFoListNew] [Emily] */
            c.GOD_NO,
            c.ERP_GOD_NO,
            c.GOD_NM,
            c.TAG_NM,
            c.THEMA_TAG_NM,
            c.GOD_SALE_SECT_CD,
            c.GOD_TP_CD,
            c.PARTMAL_SECT_CD,
            c.BRND_NM,
            c.RTL_PRC,
            c.DGPRC_LAST_SALE_PRC,
			(select gi1.img_url from god_img gi1 where c.GOD_NO = gi1.GOD_NO AND gi1.IMG_TP_CD = 'THNAIL' AND gi1.IMG_TURN = #{defaultImgTurn, jdbcType=NUMERIC} AND gi1.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR} AND gi1.IMG_USE_YN = 'Y') AS IMG_FRONT_URL,
			(select gi2.img_url from god_img gi2 where c.GOD_NO = gi2.GOD_NO AND gi2.IMG_TP_CD = 'THNAIL' AND gi2.IMG_TURN = 1 AND gi2.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR} AND gi2.IMG_USE_YN = 'Y') AS IMG_BACK_URL,
			<if test="lang != 'KOR' ">
			c.GLGNM_GOD_NO,
			c.LANG_CD,
			c.GLGNM_GOD_NM,
			c.GLGNM_TAG_NM,
			c.GLGNM_THEMA_TAG_NM,
			</if>
				(SELECT LISTAGG(
				icg.color_style_cd
				,',')
				WITHIN GROUP (ORDER BY icg.color_style_cd)
				AS color_style_cd
				FROM god god, inf_color_grp icg
				WHERE 1 = 1
				AND god.dsp_yn = 'Y'
				AND god.god_aprv_sect_cd = 'APRV_COMPT'
				AND god.god_sale_sect_cd IN ('SLDOUT', 'SALE_PROGRS', 'SALE_PROGRS_PKUP')
				AND god.partmal_sect_cd = 'MCOM'
				AND EXISTS
				(SELECT /*+ NO_UNNEST */
				1
				FROM dsp_ctgry_cnnc_god t1, dsp_ctgry_dsp_apl t2
				WHERE 1=1
				AND (t2.dsp_yn = 'Y' OR t2.brnd_dsp_yn = 'Y')
				AND (t1.dsp_yn = 'Y' OR t1.brnd_ctgry_dsp_yn = 'Y')
				AND t1.god_no = god.god_no
				AND t1.dsp_ctgry_no = t2.dsp_ctgry_no)
				AND c.dsgn_grp_no = god.dsgn_grp_no
				AND god.color_cd = icg.color_grp_cd
				AND icg.language = DECODE( #{lang, jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
				AS color_style_cd,
				(select cd_nm from mv_sys_cd where upper_cd = 'SESON_GRP' and cd = c.SESON_GRP_CD and lang_cd = #{lang, jdbcType=VARCHAR}) AS SESON_GRP_NM
		FROM
		(SELECT b.*,
				ROWNUM AS NO
          FROM (
                    SELECT a.*
                    FROM (
                        SELECT
								g.GOD_NO,
                                g.ERP_GOD_NO,
                                g.DSGN_GRP_NO,
                                g.GOD_NM,
                                g.TAG_NM,
                                g.THEMA_TAG_NM,

                               	<choose>
								    <when test="lang != 'KOR' ">
								   		DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SLDOUT', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD,
								   	</when>
									<otherwise>
										DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SALE_PROGRS', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD,
									</otherwise>
								</choose>

                                g.GOD_TP_CD,
                                g.PARTMAL_SECT_CD,
                                g.STD_CTGRY_NO,
                                g.SESON_GRP_CD,
                                g.SESON_CD,
                                g.COM_ID,
                                <choose>
                                    <when test="lang == 'KOR'">
                                        sb.BRND_NM,
                                    </when>
                                    <otherwise>
                                        sbl.BRND_NM,
                                    </otherwise>
                                </choose>
                                    g.FIRST_DSP_DT AS REG_DT,
                                    dgp.RTL_PRC AS RTL_PRC,
                                    dgp.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC,
                                    CASE WHEN dgp.GOD_DC_RT > 0 THEN ROUND((dgp.RTL_PRC - dgp.DC_PRC) / dgp.RTL_PRC * 100)
                                         ELSE (
                                                CASE WHEN dgp.RTL_PRC > dgp.CSMR_PRC THEN ROUND((dgp.RTL_PRC - dgp.CSMR_PRC) / dgp.RTL_PRC * 100)
                                                     ELSE 0 END
                                              )
                                         END AS DGPRC_GOD_DC_RT,
                                    dgp.BST_GOD_SALE_IDEX,
									dgp.NEW_GOD_IDEX,
                                    nvl(dbge.GOD_EVL_COUNT, 0) AS GODAS,
									<if test="lang != 'KOR' ">
										glgn.GOD_NO AS GLGNM_GOD_NO,
										glgn.LANG_CD,
										glgn.GOD_NM AS GLGNM_GOD_NM,
										glgn.TAG_NM AS GLGNM_TAG_NM,
										glgn.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM,
									</if>
                                    <if test="mallGubun != 'DXM'">
                                        nvl(t1.BRND_CTGRY_SORT_SEQ, t1.SORT_SEQ) AS SORT_SEQ
                                    </if>
                                    <if test="mallGubun == 'DXM'">
                                        t1.SORT_SEQ
                                    </if>
						FROM (
							SELECT dccg.god_no
							,MIN(dccg.brnd_ctgry_sort_seq) AS brnd_ctgry_sort_seq
							,MIN(dccg.sort_seq) AS sort_seq
							FROM dsp_ctgry_cnnc_god dccg
							<if test="mallGubun != 'DXM'">, DSP_CTGRY_DSP_APL_BRND dc </if>
							<if test="mallGubun == 'DXM'">, DSP_CTGRY_DSP_APL dc </if>
							WHERE dc.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
							<if test="mallGubun != 'DXM'">
								AND dc.brnd_dsp_yn = 'Y'
								AND dccg.brnd_ctgry_dsp_yn = 'Y'
								AND dc.dsp_brnd_id =  #{searchConditionBrandId, jdbcType=VARCHAR}
							</if>
							<if test="mallGubun == 'DXM'">
								AND dc.dsp_yn = 'Y'
								AND dccg.dsp_yn = 'Y'
							</if>
							AND dccg.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
							AND dc.dsp_ctgry_no = dccg.dsp_ctgry_no
							GROUP BY dccg.god_no
							) t1
						JOIN god g ON t1.god_no = g.god_no
						JOIN dsp_god_prc dgp ON t1.god_no = g.god_no AND g.god_no = dgp.god_no
						JOIN sys_brnd sb ON g.brnd_grp_id = sb.brnd_id
						LEFT OUTER JOIN DSP_BST_GOD_EVL dbge On g.GOD_NO = dbge.GOD_NO
		<if test="lang != 'KOR'">
			JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
			JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
		</if>
		WHERE 1 = 1
		AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
		AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
		AND g.SPCIFY_URL_DSP_YN = 'N'
		AND g.DSP_YN = 'Y'
		AND dgp.mall_id = #{mallId, jdbcType = VARCHAR}
		AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
			AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
		<if test='empYn == "N"'>
			AND g.EMP_ONLY_YN = 'N'
		</if>
		<if test="searchConditionBrandId != null and searchConditionBrandId != ''">
			<choose>
				<when test="searchConditionBrandId == 'MCBR' or searchConditionBrandId == 'BPBR' ">
					AND g.BRND_GRP_ID IN (
					SELECT BRND_ID
					FROM (
					SELECT sb.BRND_ID,
					sb.UPPER_BRND_ID
					FROM SYS_BRND sb
					CONNECT BY PRIOR sb.BRND_ID = sb.UPPER_BRND_ID
					AND sb.USE_YN = 'Y'
					AND sb.BRND_GRP_YN = 'Y'
					START WITH sb.BRND_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
					)
					)
				</when>
				<otherwise>
					AND g.BRND_GRP_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
				</otherwise>
			</choose>
		</if>
								<if test="searchConditionBrandBests != null and searchConditionBrandBests.length > 0 and searchConditionBrandBests != ''">
									AND sb.BRND_ID IN
									<foreach item="bestBrand" collection="searchConditionBrandBests" open="(" separator="," close=")">
										#{bestBrand}
									</foreach>
								</if>
								<if test="searchConditionBrandAtoZs != null and searchConditionBrandAtoZs.length > 0 and searchConditionBrandAtoZs != ''">
									AND sb.BRND_ID IN
									<foreach item="brand" collection="searchConditionBrandAtoZs" open="(" separator="," close=")">
										#{brand}
									</foreach>
								</if>
								<if test="(searchConditionColors != null and searchConditionColors != '' and searchConditionColors.length > 0) or (searchConditionColors2 != null and searchConditionColors2 != '' and searchConditionColors2.length > 0)" >
									AND (
									<trim suffixOverrides="OR" >
										<if test="searchConditionColors != null and searchConditionColors.length > 0 and searchConditionColors != ''" >
											g.COLOR_CD IN
											<foreach item="color" collection="searchConditionColors" open="(" separator="," close=")">
												#{color}
											</foreach>
											OR
										</if>
										<if test="searchConditionColors2 != null and searchConditionColors2.length > 0 and searchConditionColors2 != ''" >
											g.CLOR_CHIP_IMG_URL IN
											<foreach item="color2" collection="searchConditionColors2" open="(" separator="," close=")">
												#{color2}
											</foreach>
											OR
										</if>
									</trim>
									)
								</if>
								<if test="searchConditionMaterials != null and searchConditionMaterials.length > 0 and searchConditionMaterials != ''">
									AND EXISTS (
									SELECT 1
									FROM GOD_IEM_DETAIL gid
									WHERE gid.GOD_NO = g.GOD_NO
									AND gid.GOD_IEM_CD = 'MATR'
									AND gid.GOD_IEM_VAL_CD IN
									<foreach item="matr" collection="searchConditionMaterials" open="(" separator="," close=")">
										#{matr}
									</foreach>
									)
								</if>
					  ) a
                 WHERE 1 = 1
				<if test="searchConditionSizes != null and searchConditionSizes.length > 0 and searchConditionSizes != ''">
					AND EXISTS (
							SELECT 1
							  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
							 WHERE a.GOD_NO = s1.GOD_NO
							   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
							   AND a.COM_ID = s2.COM_ID
							   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
							   AND s1.OPT_CD_1 = s2.OPT_CD
							   AND s1.OPT_VAL_CD_1 = s2.OPT_VAL_CD
							   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
							   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
								   #{size}
							   </foreach>
							UNION ALL
							SELECT	1
							  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
							 WHERE a.GOD_NO = s1.GOD_NO
							   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
							   AND a.COM_ID = s2.COM_ID
							   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
							   AND s1.OPT_CD_2 = s2.OPT_CD
							   AND s1.OPT_VAL_CD_2 = s2.OPT_VAL_CD
							   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
							   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
								   #{size}
							   </foreach>
							UNION ALL
							SELECT 1
							  FROM GOD_ITM S1, GOD_STD_CTGRY_SIZE_COM_CNNC S2
							 WHERE a.GOD_NO = s1.GOD_NO
					 		   AND a.STD_CTGRY_NO = s2.STD_CTGRY_NO
							   AND a.COM_ID = s2.COM_ID
							   AND s1.ITM_STAT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
							   AND s1.OPT_CD_3 = s2.OPT_CD
					 		   AND s1.OPT_VAL_CD_3 = s2.OPT_VAL_CD
							   AND s2.STD_SIZE_SECT_CD || '^' || s2.STD_SIZE_CD IN
							   <foreach item="size" collection="searchConditionSizes" open="(" separator="," close=")">
								   #{size}
							   </foreach>
					)
				</if>
				<if test="searchConditionStyles != null and searchConditionStyles.length > 0 and searchConditionStyles != ''">
					AND EXISTS (
					SELECT 1
					FROM GOD_STYLE i
					WHERE
					i.STYLE_CD IN
					<foreach item="style" collection="searchConditionStyles" open="(" separator="," close=")">
						#{style}
					</foreach>
					AND a.GOD_NO = i.GOD_NO
					)
				</if>
				<if test="sortColumn != '' and sortColumn != null">
					ORDER BY
					a.GOD_SALE_SECT_CD ASC,
					<choose>
						<when test="sortColumn == 'MD_RECOMMEND_SEQ'">
							a.SORT_SEQ ASC, a.REG_DT DESC, a.DSGN_GRP_NO ASC,
						</when>
						<when test="sortColumn == 'NEW_GOD_SEQ'">
							a.NEW_GOD_IDEX DESC NULLS LAST,
						</when>
						<when test="sortColumn == 'SALE_QTY_SEQ'">
							a.BST_GOD_SALE_IDEX DESC NULLS LAST,
						</when>
						<when test="sortColumn == 'BEST_DC_SEQ'">
							a.DGPRC_GOD_DC_RT DESC,
						</when>
						<when test="sortColumn == 'LWET_PRC_SEQ'">
							a.DGPRC_LAST_SALE_PRC ASC,
						</when>
						<when test="sortColumn == 'BEST_PRC_SEQ'">
							a.DGPRC_LAST_SALE_PRC DESC,
						</when>
						<when test="sortColumn == 'PCH_PS_SEQ'">
							a.GODAS DESC,
						</when>
						<otherwise>
							a.SORT_SEQ ASC, a.REG_DT DESC, a.DSGN_GRP_NO ASC,
						</otherwise>
					</choose>
					a.GOD_NO ASC
				</if>
				<if test="sortColumn == '' || sortColumn == null">
					ORDER BY
					a.GOD_SALE_SECT_CD ASC,
                    a.NEW_GOD_IDEX DESC NULLS LAST,
					a.GOD_NO ASC
				</if>
		) b
        WHERE 1 = 1
		  AND ROWNUM &lt;= #{endIndex}
        ) c
		WHERE 1 = 1
		AND NO &gt;= #{beginIndex}

    </select>
    
    
    <select id="selectDspCtgryDspGodListTotCnt" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">
		SELECT /*+ index(g) */ /* [display.category.xml][selectDspCtgryDspGodListTotCnt] [Dian] */
			count(1)  
		FROM DUAL g
		
	</select>

    <select id="selectDspCtgryDspGodList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
		SELECT *
		FROM DUAL
    </select>

	<select id="selectRecommendationList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
		SELECT a.*,		/* [display.category.xml][selectRecommendationList] [Emily] */
		(
			SELECT LISTAGG(
				icg.COLOR_STYLE_CD
				, ',' ) WITHIN GROUP (ORDER BY icg.COLOR_STYLE_CD) AS COLOR_STYLE_CD
			FROM GOD god
			JOIN INF_COLOR_GRP icg ON (god.COLOR_CD = icg.COLOR_GRP_CD AND icg.LANGUAGE = DECODE( #{lang, jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
			WHERE 1 = 1
			AND god.DSP_YN = 'Y'
			AND god.GOD_APRV_SECT_CD = 'APRV_COMPT'
			AND god.GOD_SALE_SECT_CD IN ('SLDOUT', 'SALE_PROGRS')
			AND god.PARTMAL_SECT_CD = 'MCOM'
			AND EXISTS (
						SELECT 1
						FROM DSP_CTGRY_CNNC_GOD T1
						INNER JOIN DSP_CTGRY T2 ON (T1.DSP_CTGRY_NO = T2.DSP_CTGRY_NO AND T2.DSP_YN = 'Y' AND T2.DELETE_YN = 'N')
						WHERE T1.GOD_NO = god.GOD_NO AND T1.DSP_YN = 'Y'
			)
			AND a.DSGN_GRP_NO = god.DSGN_GRP_NO
			) AS COLOR_STYLE_CD
			,(select cd_nm from mv_sys_cd where upper_cd = 'SESON_GRP' and cd = c.SESON_GRP_CD and lang_cd = #{lang, jdbcType=VARCHAR}) AS SESON_GRP_NM
	    FROM (SELECT
				g.GOD_NO,
				g.ERP_GOD_NO,
				g.DSGN_GRP_NO,
				g.GOD_NM,
				g.MOBILE_GOD_NM,
				g.TAG_NM,
				g.COLOR_TAG_NM,
				g.THEMA_TAG_NM,
				g.TEXT_ICON_CONT,
				g.GOD_APRV_SECT_CD,
				g.GOD_SALE_SECT_CD,
				g.SALE_BEG_DATE,
				g.SALE_END_DATE,
				g.COLOR_NM,
				g.COLOR_CD,
				g.CLOR_CHIP_IMG_URL,
				g.GOD_TP_CD,
				g.PARTMAL_SECT_CD,
				g.BRND_ID AS GOD_BRND_ID,
				g.BRND_GRP_ID AS GOD_BRND_GRP_ID,
				g.STD_CTGRY_NO,
				g.TDF_SECT,
				g.SESON_GRP_CD,
				g.SESON_CD,
				g.PRDLST_CD,
				g.OTLT_YN,
				g.COM_ID,
				sb.BRND_ID,
				sb.UPPER_BRND_ID,
				<choose>
					<when test="lang == 'KOR'">
						sb.BRND_NM,
					</when>
					<otherwise>
						sbl.BRND_NM,
					</otherwise>
				</choose>
				g.FIRST_DSP_DT,
				dgp.RTL_PRC AS RTL_PRC,
				dgp.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC,
				CASE WHEN dgp.GOD_DC_RT > 0 THEN ROUND((dgp.RTL_PRC - dgp.DC_PRC) / dgp.RTL_PRC * 100)
				ELSE (
				CASE WHEN dgp.RTL_PRC > dgp.CSMR_PRC THEN ROUND((dgp.RTL_PRC - dgp.CSMR_PRC) / dgp.RTL_PRC * 100)
				ELSE 0 END
				)
				END AS DGPRC_GOD_DC_RT,
				dgp.CPN_DC_RT AS DGPRC_CPN_DC_RT,
				dgp.BST_GOD_SALE_IDEX,
				dgp.SALE_IDEX,
				dgp.NEW_GOD_IDEX,
				nvl(dbge.GOD_EVL_COUNT, 0) AS GODAS,
				<if test="lang != 'KOR' ">
					glgn.GOD_NO AS GLGNM_GOD_NO,
					glgn.LANG_CD,
					glgn.GOD_NM AS GLGNM_GOD_NM,
					glgn.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM,
					glgn.TAG_NM AS GLGNM_TAG_NM,
					glgn.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM,
					glgn.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM,
					glgn.COLOR_NM AS GLGNM_COLOR_NM,
				</if>
				<if test="mallGubun != 'DXM'">
					nvl(t1.BRND_CTGRY_SORT_SEQ, t1.SORT_SEQ) AS SORT_SEQ,
				</if>
				<if test="mallGubun == 'DXM'">
					t1.SORT_SEQ,
				</if>
				gi1.IMG_URL AS IMG_FRONT_URL,
				gi2.IMG_URL AS IMG_BACK_URL
		FROM GOD g
		JOIN SYS_BRND sb ON g.BRND_GRP_ID = sb.BRND_ID
		JOIN DSP_GOD_PRC dgp ON (
		g.GOD_NO = dgp.GOD_NO
		)
		<if test="lang != 'KOR'">
			JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
			JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
		</if>
		JOIN (SELECT DCCG.GOD_NO
		, MIN(DCCG.BRND_CTGRY_SORT_SEQ) AS BRND_CTGRY_SORT_SEQ
		, MIN(DCCG.SORT_SEQ) AS SORT_SEQ
		FROM DSP_CTGRY_DSP_APL DCDL
		JOIN DSP_CTGRY_CNNC_GOD DCCG
		ON (dccg.DSP_CTGRY_NO = DCDL.DSP_CTGRY_NO )
		WHERE 1 = 1
		AND DCDL.DSP_YN = 'Y'
		GROUP BY DCCG.GOD_NO
		) T1 ON T1.GOD_NO = g.GOD_NO
		LEFT OUTER JOIN DSP_BST_GOD_EVL dbge On g.GOD_NO = dbge.GOD_NO
		LEFT OUTER JOIN GOD_IMG gi1 ON g.GOD_NO = gi1.GOD_NO AND gi1.IMG_TP_CD = 'THNAIL' AND gi1.IMG_TURN = 0 AND gi1.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR}
		LEFT OUTER JOIN GOD_IMG gi2 ON g.GOD_NO = gi2.GOD_NO AND gi2.IMG_TP_CD = 'THNAIL' AND gi2.IMG_TURN = 1 AND gi2.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR}
		WHERE 1 = 1
		AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
		AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT')
		AND g.SPCIFY_URL_DSP_YN = 'N'
		AND g.DSP_YN = 'Y'
        AND dgp.mall_id = #{mallId, jdbcType=VARCHAR}
        AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
			AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
        <if test="recoGodNoList != null and recoGodNoList != ''">
            AND g.GOD_NO IN
            <foreach item="gNo" collection="recoGodNoList" open="(" separator="," close=")">
                #{gNo}
            </foreach>
        </if>
		) a
	  WHERE 1 = 1

	</select>

    <select id="selectNewSaleTopLifestyleCnt" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultType="int">
        SELECT count(b.GOD_NO) /* [display.category.xml][selectNewSaleTopLifestyleCnt] [Emily] */
        FROM (
        SELECT a.*,
        ROWNUM AS NO
        FROM (
        SELECT
		g.GOD_NO,
        g.PRDLST_CD,
        g.COM_ID
		FROM (
				SELECT dccg.god_no
				,MIN(dccg.brnd_ctgry_sort_seq) AS brnd_ctgry_sort_seq
				,MIN(dccg.sort_seq) AS sort_seq
				FROM dsp_ctgry_cnnc_god dccg, dsp_ctgry_dsp_apl dc
				WHERE dc.dsp_ctgry_no IN (#{menCtgryNo, jdbcType=VARCHAR}, #{womenCtgryNo, jdbcType=VARCHAR})
				<if test="mallGubun != 'DXM'">
					AND dc.brnd_dsp_yn = 'Y'
					AND dccg.brnd_ctgry_dsp_yn = 'Y'
				</if>
				<if test="mallGubun == 'DXM'">
					AND dc.dsp_yn = 'Y'
					AND dccg.dsp_yn = 'Y'
				</if>
				AND dccg.dsp_ctgry_no IN (#{menCtgryNo, jdbcType=VARCHAR}, #{womenCtgryNo, jdbcType=VARCHAR})
				AND dc.dsp_ctgry_no = dccg.dsp_ctgry_no || ''
				GROUP BY dccg.god_no) t1
					JOIN god g ON t1.god_no = g.god_no
					JOIN dsp_god_prc dgp ON t1.god_no = g.god_no AND g.god_no = dgp.god_no
					JOIN sys_brnd sb ON g.brnd_grp_id = sb.brnd_id
        <if test="lang != 'KOR'">
            JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
            JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
        </if>
        WHERE 1 = 1
        AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
        AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
        AND g.SPCIFY_URL_DSP_YN = 'N'
        AND g.DSP_YN = 'Y'
		AND dgp.mall_id = #{mallId, jdbcType=VARCHAR}
		AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
			AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
        <if test='empYn == "N"'>
            AND g.EMP_ONLY_YN = 'N'
        </if>
        <if test="searchConditionBrandId != null and searchConditionBrandId != ''">
            <choose>
                <when test="searchConditionBrandId == 'MCBR' or searchConditionBrandId == 'BPBR'">
                    AND g.BRND_GRP_ID IN (
                    SELECT BRND_ID
                    FROM (
                    SELECT sb.BRND_ID,
                    sb.UPPER_BRND_ID
                    FROM SYS_BRND sb
                    CONNECT BY PRIOR sb.BRND_ID = sb.UPPER_BRND_ID
                    AND sb.USE_YN = 'Y'
                    AND sb.BRND_GRP_YN = 'Y'
                    START WITH sb.BRND_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
                    )
                    )
                </when>
                <otherwise>
                    AND g.BRND_GRP_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
                </otherwise>
            </choose>
        </if>
        )a
        WHERE 1 = 1
        ) b
        WHERE 1 = 1
    </select>

    <select id="selectNewSaleTopLifestyleList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryGodFoResultMap">
        SELECT c.*, /* [display.category.xml][selectNewSaleTopLifestyleList] [Emily] */
                  (SELECT LISTAGG(
                    icg.color_style_cd
                    ,',')
                    WITHIN GROUP (ORDER BY icg.color_style_cd)
                    AS color_style_cd
                    FROM god god, inf_color_grp icg
                    WHERE 1 = 1
                    AND god.dsp_yn = 'Y'
                    AND god.god_aprv_sect_cd = 'APRV_COMPT'
                    AND god.god_sale_sect_cd IN ('SLDOUT', 'SALE_PROGRS', 'SALE_PROGRS_PKUP')
                    AND god.partmal_sect_cd = 'MCOM'
                    AND EXISTS
                    (SELECT /*+ NO_UNNEST */
                    1
                    FROM dsp_ctgry_cnnc_god t1, dsp_ctgry_dsp_apl t2
                    WHERE 1=1
                    AND (t2.dsp_yn = 'Y' OR t2.brnd_dsp_yn = 'Y')
                    AND (t1.dsp_yn = 'Y' OR t1.brnd_ctgry_dsp_yn = 'Y')
                    AND t1.god_no = god.god_no
                    AND t1.dsp_ctgry_no = t2.dsp_ctgry_no)
                    AND c.dsgn_grp_no = god.dsgn_grp_no
                    AND god.color_cd = icg.color_grp_cd
                    AND icg.language = DECODE( #{lang, jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
                    AS color_style_cd
                    ,(select cd_nm from mv_sys_cd where upper_cd = 'SESON_GRP' and cd = c.SESON_GRP_CD and lang_cd = #{lang, jdbcType=VARCHAR}) AS SESON_GRP_NM
        FROM
                (SELECT b.*,
                ROWNUM AS NO
                        FROM (
                        SELECT a.*

                        FROM (
                        		SELECT
						g.GOD_NO,
                        g.ERP_GOD_NO,
                        g.DSGN_GRP_NO,
                        g.GOD_NM,
                        g.MOBILE_GOD_NM,
                        g.TAG_NM,
                        g.COLOR_TAG_NM,
                        g.THEMA_TAG_NM,
                        g.TEXT_ICON_CONT,
                        g.GOD_APRV_SECT_CD,

					   <choose>
						    <when test="lang != 'KOR' ">
						   		DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SLDOUT', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD,
						   	</when>
							<otherwise>
								DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SALE_PROGRS', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD,
							</otherwise>
						</choose>


                        g.SALE_BEG_DATE,
                        g.SALE_END_DATE,
                        g.COLOR_NM,
                        g.COLOR_CD,
                        g.CLOR_CHIP_IMG_URL,
                        g.GOD_TP_CD,
                        g.PARTMAL_SECT_CD,
                        g.BRND_ID AS GOD_BRND_ID,
                        g.BRND_GRP_ID AS GOD_BRND_GRP_ID,
                        g.STD_CTGRY_NO,
                        g.TDF_SECT,
                        g.SESON_GRP_CD,
                        g.SESON_CD,
                        g.PRDLST_CD,
                        g.OTLT_YN,
                        g.COM_ID,
                        sb.BRND_ID,
                        sb.UPPER_BRND_ID,
                        <choose>
                            <when test="lang == 'KOR'">
                                sb.BRND_NM,
                            </when>
                            <otherwise>
                                sbl.BRND_NM,
                            </otherwise>
                        </choose>
                        g.FIRST_DSP_DT,
                        dgp.RTL_PRC AS RTL_PRC,
                        dgp.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC,
                        CASE WHEN dgp.GOD_DC_RT > 0 THEN ROUND((dgp.RTL_PRC - dgp.DC_PRC) / dgp.RTL_PRC * 100)
                        ELSE (
                        CASE WHEN dgp.RTL_PRC > dgp.CSMR_PRC THEN ROUND((dgp.RTL_PRC - dgp.CSMR_PRC) / dgp.RTL_PRC * 100)
                        ELSE 0 END
                        )
                        END AS DGPRC_GOD_DC_RT,
                        dgp.CPN_DC_RT AS DGPRC_CPN_DC_RT,
                        dgp.BST_GOD_SALE_IDEX,
                        dgp.SALE_IDEX,
                        dgp.NEW_GOD_IDEX,
                        nvl(dbge.GOD_EVL_COUNT, 0) AS GODAS,
                        <if test="lang != 'KOR' ">
                            glgn.GOD_NO AS GLGNM_GOD_NO,
                            glgn.LANG_CD,
                            glgn.GOD_NM AS GLGNM_GOD_NM,
                            glgn.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM,
                            glgn.TAG_NM AS GLGNM_TAG_NM,
                            glgn.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM,
                            glgn.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM,
                            glgn.COLOR_NM AS GLGNM_COLOR_NM,
                        </if>
                        <if test="mallGubun != 'DXM'">
                            nvl(t1.BRND_CTGRY_SORT_SEQ, t1.SORT_SEQ) AS SORT_SEQ,
                        </if>
                        <if test="mallGubun == 'DXM'">
                            dccg.SORT_SEQ,
                        </if>
                        gi1.IMG_URL AS IMG_FRONT_URL,
                        gi2.IMG_URL AS IMG_BACK_URL

						FROM (    SELECT dccg.god_no
                                    ,MIN(dccg.brnd_ctgry_sort_seq) AS brnd_ctgry_sort_seq
                                    ,MIN(dccg.sort_seq) AS sort_seq
                                    FROM dsp_ctgry_cnnc_god dccg, dsp_ctgry_dsp_apl dc
                                    WHERE dc.dsp_ctgry_no IN (#{menCtgryNo, jdbcType=VARCHAR}, #{womenCtgryNo, jdbcType=VARCHAR})
                                    <if test="mallGubun != 'DXM'">
                                        AND dc.brnd_dsp_yn = 'Y'
                                        AND dccg.brnd_ctgry_dsp_yn = 'Y'
                                    </if>
                                    <if test="mallGubun == 'DXM'">
                                        AND dc.dsp_yn = 'Y'
                                        AND dccg.dsp_yn = 'Y'
                                    </if>
                                    AND dccg.dsp_ctgry_no IN (#{menCtgryNo, jdbcType=VARCHAR}, #{womenCtgryNo, jdbcType=VARCHAR})
                                    AND dc.dsp_ctgry_no = dccg.dsp_ctgry_no || ''
                                    GROUP BY dccg.god_no) t1
									JOIN god g ON t1.god_no = g.god_no
									JOIN dsp_god_prc dgp ON t1.god_no = g.god_no AND g.god_no = dgp.god_no
									JOIN (
											SELECT SB.BRND_ID, SB.BRND_NM, SB.UPPER_BRND_ID
											  FROM SYS_BRND SB
									CONNECT BY PRIOR SB.BRND_ID = SB.UPPER_BRND_ID
											  AND SB.USE_YN = 'Y'
											  AND SB.BRND_GRP_YN = 'Y'
										  START WITH SB.BRND_ID = 'MCBR'
									)SB ON G.BRND_GRP_ID = SB.BRND_ID
                        			LEFT OUTER JOIN DSP_BST_GOD_EVL dbge On g.GOD_NO = dbge.GOD_NO
                        			LEFT OUTER JOIN GOD_IMG gi1 ON g.GOD_NO = gi1.GOD_NO AND gi1.IMG_TP_CD = 'THNAIL' AND gi1.IMG_TURN = 0 AND gi1.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR}
                        			LEFT OUTER JOIN GOD_IMG gi2 ON g.GOD_NO = gi2.GOD_NO AND gi2.IMG_TP_CD = 'THNAIL' AND gi2.IMG_TURN = 1 AND gi2.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR}
        			<if test="lang != 'KOR'">
            			JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
            			JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
        			</if>
					WHERE 1 = 1
					AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
					AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP')
					AND g.SPCIFY_URL_DSP_YN = 'N'
					AND g.DSP_YN = 'Y'
					AND dgp.mall_id = #{mallId, jdbcType=VARCHAR}
					AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
					<if test='spcPrmTp != null and spcPrmTp != ""'>
						AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
						AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
						FROM DSP_GOD_PRC dgp2
						WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
						IS NOT NULL
						THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
					</if>
					<if test='spcPrmTp == null or spcPrmTp == ""'>
						AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
					</if>
        <if test='empYn == "N"'>
            AND g.EMP_ONLY_YN = 'N'
        </if>
                        <if test="searchConditionBrandId != null and searchConditionBrandId != ''">
                            <choose>
                                <when test="searchConditionBrandId == 'MCBR' or searchConditionBrandId == 'BPBR' ">
                                    AND g.BRND_GRP_ID IN (
                                    SELECT BRND_ID
                                    FROM (
                                    SELECT sb.BRND_ID,
                                    sb.UPPER_BRND_ID
                                    FROM SYS_BRND sb
                                    CONNECT BY PRIOR sb.BRND_ID = sb.UPPER_BRND_ID
                                    AND sb.USE_YN = 'Y'
                                    AND sb.BRND_GRP_YN = 'Y'
                                    START WITH sb.BRND_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
                                    )
                                    )
                                </when>
                                <otherwise>
                                    AND g.BRND_GRP_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
                                </otherwise>
                            </choose>
                        </if>
                        ) a
                        ) b
                WHERE 1 = 1
                 AND ROWNUM &lt;= #{endIndex}
        ) c
        WHERE 1 = 1
        AND c.NO &gt;= #{beginIndex}
    </select>

	<select id="selectUpperCtgryListPC" parameterType="com.plgrim.ncp.biz.display.data.DspCtgryScFrDTO" resultType="java.lang.String">
		SELECT
		<choose>
			<when test="dspCtgry.dspCtgryNo != null and dspCtgry.dspCtgryNo != ''">
				<choose>
					<when test="lang != 'KOR'">
						dcl.dsp_ctgry_nm
					</when>
					<otherwise>
						dc.dsp_ctgry_nm
					</otherwise>
				</choose>
			</when>
			<otherwise>
				<choose>
					<when test="lang != 'KOR'">
						(SELECT brnd_nm||'_'||dc.dsp_brnd_id
						FROM sys_brnd_lang
						WHERE brnd_id = dc.dsp_brnd_id
						AND		lang_cd = #{lang,jdbcType=VARCHAR}) as brnd_nm
					</when>
					<otherwise>
						(SELECT brnd_nm||'_'||dc.dsp_brnd_id
						FROM sys_brnd
						WHERE brnd_id = dc.dsp_brnd_id) as brnd_nm
					</otherwise>
				</choose>
			</otherwise>
		</choose>
		FROM   dsp_ctgry dc
		<if test="lang != 'KOR'">
			LEFT OUTER JOIN dsp_ctgry_lang dcl on (dc.dsp_ctgry_no = dcl.dsp_ctgry_no and dcl.lang_cd = #{lang, jdbcType=VARCHAR})
		</if>
		WHERE 1 = 1
		<choose>
			<when test="dspCtgry.dspCtgryNo != null and dspCtgry.dspCtgryNo != ''">
				AND   dc.dsp_ctgry_no IN (
				SELECT dc.dsp_ctgry_no
				FROM (
				SELECT dc.dsp_ctgry_no
				FROM dsp_ctgry dc
				CONNECT BY PRIOR  dc.upper_dsp_ctgry_no = dc.dsp_ctgry_no
				AND dc.DSP_YN = 'Y'
				START WITH dc.dsp_ctgry_no = #{dspCtgry.dspCtgryNo, jdbcType=VARCHAR}
				) dc
				)
				AND dc.ctgry_dpth_cd != '0'
			</when>
			<otherwise>
				AND dc.dsp_ctgry_no = #{brandShopNo, jdbcType=VARCHAR}
			</otherwise>
		</choose>
		ORDER BY dc.ctgry_dpth_cd
	</select>

    <select id="selectUpperCtgryList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgryScFrDTO" resultType="java.lang.String">
        SELECT
                <choose>
                    <when test="dspCtgry.dspCtgryNo != null and dspCtgry.dspCtgryNo != ''">
						<choose>
							<when test="lang != 'KOR'">
								dcl.dsp_ctgry_nm||'_'||dcl.dsp_ctgry_no
							</when>
							<otherwise>
								dc.dsp_ctgry_nm||'_'||dc.dsp_ctgry_no
							</otherwise>
						</choose>
                    </when>
                    <otherwise>
						<choose>
							<when test="lang != 'KOR'">
								(SELECT brnd_nm||'_'||dc.dsp_brnd_id
								FROM sys_brnd_lang
								WHERE brnd_id = dc.dsp_brnd_id
								AND		lang_cd = #{lang,jdbcType=VARCHAR}) as brnd_nm
							</when>
							<otherwise>
								(SELECT brnd_nm||'_'||dc.dsp_brnd_id
								FROM sys_brnd
								WHERE brnd_id = dc.dsp_brnd_id) as brnd_nm
							</otherwise>
						</choose>
                    </otherwise>
                </choose>
        FROM   dsp_ctgry dc
		<if test="lang != 'KOR'">
			LEFT OUTER JOIN dsp_ctgry_lang dcl on (dc.dsp_ctgry_no = dcl.dsp_ctgry_no and dcl.lang_cd = #{lang, jdbcType=VARCHAR})
		</if>
        WHERE 1 = 1
        <choose>
            <when test="dspCtgry.dspCtgryNo != null and dspCtgry.dspCtgryNo != ''">
				AND   dc.dsp_ctgry_no IN (
											SELECT dc.dsp_ctgry_no
												FROM (
														SELECT dc.dsp_ctgry_no
														FROM dsp_ctgry dc
														CONNECT BY PRIOR  dc.upper_dsp_ctgry_no = dc.dsp_ctgry_no
														AND dc.DSP_YN = 'Y'
														START WITH dc.dsp_ctgry_no = #{dspCtgry.dspCtgryNo, jdbcType=VARCHAR}
											) dc
										)
				AND dc.ctgry_dpth_cd != '0'
            </when>
            <otherwise>
				AND dc.dsp_ctgry_no = #{brandShopNo, jdbcType=VARCHAR}
            </otherwise>
        </choose>
      ORDER BY dc.ctgry_dpth_cd
    </select>

	<select id="selectLowerCtgryList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgryScFrDTO" resultMap="dspCtgryFoResultMap">
		SELECT
				<if test="lang != 'KOR'">
					dcl.dsp_ctgry_nm,
				</if>
				<if test="lang == 'KOR'">
					dc.dsp_ctgry_nm,
				</if>
				dc.dsp_ctgry_no
		  FROM	dsp_ctgry dc
			<if test="lang != 'KOR'">
				JOIN	dsp_ctgry_lang dcl on (dcl.dsp_ctgry_no = dc.dsp_ctgry_no and dcl.lang_cd = #{lang, jdbcType=VARCHAR})
			</if>
		  <if test="brndId == null or brndId == ''">
			  JOIN 	dsp_ctgry_dsp_apl dcda ON dc.dsp_ctgry_no = dcda.dsp_ctgry_no
			 WHERE	1 = 1
			  AND 	dcda.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo, jdbcType=VARCHAR} || '___'
			  AND 	dcda.lang_cd = #{lang, jdbcType=VARCHAR}
			  AND	dcda.dsp_mbr_sect_cd = #{prcSectCd, jdbcType=VARCHAR}
		  </if>
		  <if test="brndId != null and brndId != ''">
			  JOIN dsp_ctgry_dsp_apl_brnd dcdab ON dc.dsp_ctgry_no = dcdab.dsp_ctgry_no
			  WHERE	1 = 1
			  AND 	dcdab.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo, jdbcType=VARCHAR} || '___'
			  AND 	dcdab.lang_cd = #{lang, jdbcType=VARCHAR}
			  AND	dcdab.dsp_brnd_id = #{brndId, jdbcType=VARCHAR}
			  AND 	dcdab.dsp_mbr_sect_cd = #{prcSectCd, jdbcType=VARCHAR}
		  </if>
	</select>

	<select id="selectTopNewSaleGodNo" parameterType="com.plgrim.ncp.biz.display.data.DspCtgryScFrDTO" resultType="java.lang.String">
		SELECT /*+ index(g) */
				'' AS GOD_NO
		FROM DUAL g		
	</select>

    <select id="selectCtgryCnncGodNo" parameterType="com.plgrim.ncp.biz.display.data.DspCtgryScFrDTO" resultType="java.lang.String">
         /* [display.category.xml][selectCtgryCnncGodNo] [Emily] */
        SELECT
		g.GOD_NO
		FROM (    SELECT dccg.god_no
                        FROM dsp_ctgry_cnnc_god dccg, dsp_ctgry_dsp_apl dc
                        WHERE dc.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
                        <if test="mallGubun != 'DXM'">
                            AND dc.brnd_dsp_yn = 'Y'
                            AND dccg.brnd_ctgry_dsp_yn = 'Y'
                        </if>
                        <if test="mallGubun == 'DXM'">
                            AND dc.dsp_yn = 'Y'
                            AND dccg.dsp_yn = 'Y'
                        </if>
                        AND dccg.dsp_ctgry_no LIKE #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR} || '%'
                        AND dc.dsp_ctgry_no = dccg.dsp_ctgry_no || ''
                        GROUP BY dccg.god_no) t1
					JOIN god g ON t1.god_no = g.god_no
					JOIN dsp_god_prc dgp ON t1.god_no = g.god_no AND g.god_no = dgp.god_no
		WHERE 1 = 1
		AND g.GOD_APRV_SECT_CD = 'APRV_COMPT'
		AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT')
		AND g.SPCIFY_URL_DSP_YN = 'N'
		AND g.DSP_YN = 'Y'
		AND dgp.mall_id = #{mallId, jdbcType=VARCHAR}
		AND dgp.lang_cd = #{lang, jdbcType=VARCHAR}
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR})
			AND dgp.PRC_SECT_CD = CASE WHEN (SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR} ELSE #{prcSectCd, jdbcType=VARCHAR} END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
        <if test='empYn == "N"'>
            AND g.EMP_ONLY_YN = 'N'
        </if>
		<if test="searchConditionBrandId != null and searchConditionBrandId != ''">
			<choose>
				<when test="searchConditionBrandId == 'MCBR' or searchConditionBrandId == 'BPBR' ">
					AND g.BRND_GRP_ID IN (
					SELECT BRND_ID
					FROM (
					SELECT sb.BRND_ID,
					sb.UPPER_BRND_ID
					FROM SYS_BRND sb
					CONNECT BY PRIOR sb.BRND_ID = sb.UPPER_BRND_ID
					AND sb.USE_YN = 'Y'
					AND sb.BRND_GRP_YN = 'Y'
					START WITH sb.BRND_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
					)
					)
				</when>
				<otherwise>
					AND g.BRND_GRP_ID = #{searchConditionBrandId, jdbcType=VARCHAR}
				</otherwise>
			</choose>
		</if>
    </select>

	<select id="selectCtgryNo" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryFoResultMap">
		SELECT /* [display.category.xml][selectCtgryNo][selectCtgryNo][주문욱] */
		t1.DSP_CTGRY_NO
		,t1.UPPER_DSP_CTGRY_NO
		,t1.DSP_CTGRY_NM
		,t1.CTGRY_TP_CD
		,t1.CTGRY_SECT_CD
		,t1.GOD_DSP_UNIT_CD
		,t1.CTGRY_DPTH_CD
		,t1.DSP_GOD_SORT_STDR_CD
		,t1.LEAF_CTGRY_YN
		,t1.DSP_YN
		,t1.SPCIFY_URL_DSP_YN
		,t1.CTGRY_DIV_LNE_YN
		,t1.CTGRY_DIV_LNE_CSS_CD
		,t1.DELETE_YN
		,t1.CTGRY_OUTPT_TP_CD
		,t1.OUTPT_SECT_CD
		,t1.OUTPT_LINK_URL
		,t1.SORT_SEQ
		,t1.APL_MALL_ID
		,t1.DSP_BRND_ID
		,t1.EXPSR_LVL_CD
		,t1.RPRST_IMG_FILE_NM
		,t1.RPRST_IMG_FILE_URL
		,t1.RPRST_IMG_ALTRTV_CONT
		,t1.BCRN_STYLE_CLASS_ID
		,t1.REGTR_ID
		,t1.REG_DT
		,t1.UDTER_ID
		,t1.UDT_DT
		FROM DSP_CTGRY t1
		WHERE 1 = 1
		<!-- 2015년6월3일 DBA 충고로 조건에 추가 -->
		AND	t1.DSP_CTGRY_NO LIKE #{dspCtgry.dspCtgryNo, jdbcType=VARCHAR} || '___'
		AND	t1.CTGRY_SECT_CD = #{dspCtgry.ctgrySectCd, jdbcType=VARCHAR}
		AND t1.DELETE_YN = 'N'
		AND t1.DSP_YN = 'Y'
	</select>

	<resultMap type="sysPopupNoti" id="mainPopupResult">
		<result property="popupNotiSn" column="POPUP_NOTI_SN"/>
	    <result property="notiRegDt" column="NOTI_REG_DT" />
	    <result property="dspTimeReptitYn" column="DSP_TIME_REPTIT_YN"/>
	    <result property="dspBegHour" column="DSP_BEG_HOUR"/>
	    <result property="dspEndHour" column="DSP_END_HOUR"/>
	    <result property="signlCrtfcYn" column="SIGNL_CRTFC_YN"/>
	    <result property="linkOutptTgtCd" column="LINK_OUTPT_TGT_CD"/>
	    <result property="notiSj" column="NOTI_SJ"/>
	    <result property="notiContSectCd" column="NOTI_CONT_SECT_CD"/>
	    <result property="imgFileNm" column="IMG_FILE_NM"/>
	    <result property="imgFileUrl" column="IMG_FILE_URL"/>
	    <result property="imgAltrtvCont" column="IMG_ALTRTV_CONT"/>
	    <result property="linkUrl" column="LINK_URL"/>
	    <result property="notiCont" column="NOTI_CONT"/>
	    <result property="todayStpViewConfigYn" column="TODAY_STP_VIEW_CONFIG_YN"/>
	    <result property="clseConfigYn" column="CLSE_CONFIG_YN"/>
	    <result property="mobilePopupMenmthdCd" column="MOBILE_POPUP_MENMTHD_CD"/>
	    <result property="popupUpendLc" column="POPUP_UPEND_LC"/>
	    <result property="popupLeftLc" column="POPUP_LEFT_LC"/>
	    <result property="dspEndDt" column="DSP_END_DT"/>
	</resultMap>

	<select id="selectMainPopup_cashe" parameterType="map" resultMap="mainPopupResult">
	SELECT  /* [display.category.xml][selectMainPopup_cashe][Main Popup 조회][주문욱] */ 
	     T1.DSP_CTGRY_NO
	     
	    ,T2.POPUP_NOTI_SN
	    ,T2.NOTI_REG_DT
	    ,T2.DSP_TIME_REPTIT_YN
	    ,T2.DSP_BEG_HOUR
	    ,T2.DSP_END_HOUR
	    ,T2.SIGNL_CRTFC_YN
	    ,T2.LINK_OUTPT_TGT_CD
	    ,T2.NOTI_SJ
	    ,T2.NOTI_CONT_SECT_CD
	    ,T2.IMG_FILE_NM
	    ,T2.IMG_FILE_URL
	    ,T2.IMG_ALTRTV_CONT
	    ,T2.LINK_URL
	    ,T2.NOTI_CONT
	    ,T2.TODAY_STP_VIEW_CONFIG_YN
	    ,T2.CLSE_CONFIG_YN
	    ,T2.MOBILE_POPUP_MENMTHD_CD
	    ,T2.POPUP_UPEND_LC
	    ,T2.POPUP_LEFT_LC
	    ,T2.DSP_END_DT
	
	FROM SYS_POPUP_NOTI_DSP_CTGRY_CNNC T1
	    JOIN SYS_POPUP_NOTI T2 ON T1.POPUP_NOTI_SN = T2.POPUP_NOTI_SN
	WHERE 
	        T2.DSP_YN = 'Y'
	    AND t2.DSP_BEG_DT &lt;= sysdate
        AND t2.DSP_END_DT &gt;= sysdate
        AND T1.DSP_CTGRY_NO = #{dspCtgryNo,jdbcType=VARCHAR}
	    AND EXISTS (
	        SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	            AND (
	                    T3.POPUP_NOTI_TGT_TP_CD = 'MALL_ID'
	                AND T3.MALL_ID = #{mallId,jdbcType=VARCHAR}
	            )
	        )
	    AND EXISTS (
	        SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	            AND (
	                    T3.POPUP_NOTI_TGT_TP_CD = 'LANG'
	                AND T3.LANG_CD = #{lang,jdbcType=VARCHAR}
	            )
	        )
	    AND EXISTS (
	        SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                 T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	            AND (
	                    T3.POPUP_NOTI_TGT_TP_CD = 'DVC'
	                AND T3.DVC_CD = #{device,jdbcType=VARCHAR}
	            )
	        )
	    <if test="aplMbrAtrb != null">
	    AND
	            <if test="aplMbrAtrb != 'GRPCO'">
	            EXISTS (
	                SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                 T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	                AND (
	                        T3.POPUP_NOTI_TGT_TP_CD = 'TGT_MBR_ATRB'
	                    AND T3.TGT_MBR_ATRB_CD = #{aplMbrAtrb,jdbcType=VARCHAR}
	                 )
	            )
	            </if>
	            <if test="aplMbrAtrb == 'GRPCO'">
	            EXISTS (
	                SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                 T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	                AND (
	                        T3.POPUP_NOTI_TGT_TP_CD = 'TGT_MBR_ATRB'
	                    AND T3.TGT_MBR_ATRB_CD = 'GRPCO_IND'
	                    AND T3.GRPCO_ID = #{grpcoId,jdbcType=VARCHAR}
	                 )
	            )
	            </if> 
	   </if>
	            
	    AND   EXISTS (
	                SELECT 1
	            FROM SYS_POPUP_NOTI_APL_TGT T3
	            WHERE 
	                 T1.POPUP_NOTI_SN = T3.POPUP_NOTI_SN
	                AND (
	                        T3.POPUP_NOTI_TGT_TP_CD = 'TGT_MBR_TP'
	                    AND T3.TGT_MBR_TP_CD = #{aplMbrTp,jdbcType=VARCHAR}
	                )
	            )

	
	 ORDER BY T1.REG_DT desc
	</select>
	
	
	<select id="selectMyBrand" parameterType="map" resultType="dspCtgry">
		select /* [display.category.xml][selectMyBrand][MyBrand의카테고리명 조회][Dian] */
			dsp_ctgry_no, dsp_ctgry_nm
		from dsp_ctgry 
		where 1=1
		<if test="dspCtgryNos != null">
			AND dsp_ctgry_no IN 
			<foreach item="dcNos" collection="dspCtgryNos" open="(" separator="," close=")">
		  	 #{dcNos}
		  	</foreach>
		</if>
		and delete_yn = 'N'
		and dsp_yn = 'Y'
	</select>
	
	<!-- 2017-10-20 전시 영역 구조 변경으로 인해 기존에 사용하지 않던 query 삭제를 위한 임시 주석 처리 -->
	<!--<select id="selectLeftMenuCtgry" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="subDspCtgryFoResultMap">
		SELECT  /* [display.category.xml][selectLeftMenuCtgry][모바일Left메뉴브랜드카테고리조회][Dian] */ 
	 		DC.*
	      , DCL.DSP_CTGRY_NO          AS DCLANG_DSP_CTGRY_NO
	      , DCL.LANG_CD
	      , DCL.DSP_CTGRY_NM          AS DCLANG_DSP_CTGRY_NM
	      , DCL.RPRST_IMG_FILE_URL    AS DCLANG_RPRST_IMG_FILE_URL
	      , DCL.RPRST_IMG_ALTRTV_CONT AS DCLANG_RPRST_IMG_ALTRTV_CONT
	      , DCL.RPRST_IMG_FILE_NM     AS DCLANG_RPRST_IMG_FILE_NM
		FROM   (
			SELECT 
					DC.DSP_CTGRY_NO
	              , DC.UPPER_DSP_CTGRY_NO
	              , DC.DSP_CTGRY_NM
	              , DC.CTGRY_TP_CD
	              , DC.GOD_DSP_UNIT_CD
	              , DC.CTGRY_DPTH_CD
	              , DC.DSP_GOD_SORT_STDR_CD
	              , DC.LEAF_CTGRY_YN
	              , DC.DSP_YN
	              , DC.SPCIFY_URL_DSP_YN
	              , DC.CTGRY_DIV_LNE_YN
	              , DC.CTGRY_DIV_LNE_CSS_CD
	              , DC.DELETE_YN
	              , DC.CTGRY_OUTPT_TP_CD
	              , DC.OUTPT_SECT_CD
	              , DC.OUTPT_LINK_URL
	              , DC.SORT_SEQ
	              , DC.APL_MALL_ID
	              , DC.DSP_BRND_ID
	              , DC.EXPSR_LVL_CD
	              , DC.RPRST_IMG_FILE_NM
	              , DC.RPRST_IMG_FILE_URL
	              , DC.RPRST_IMG_ALTRTV_CONT
	              , DC.BCRN_STYLE_CLASS_ID
	              , DC.PC_MOBILE_TMPLAT_IND_USE_YN
	              , DC.PC_TMPLAT_SN
	              , DC.MOBILE_TMPLAT_SN
	              , DC.REGTR_ID
	              , DC.REG_DT
	              , DC.UDTER_ID
	              , DC.UDT_DT
	              , ROWNUM SEQ
	        FROM   DSP_CTGRY DC
	        CONNECT BY PRIOR DC.DSP_CTGRY_NO = DC.UPPER_DSP_CTGRY_NO
	            AND    DC.APL_MALL_ID = #{mallId,jdbcType=VARCHAR} 
	            AND    DC.DELETE_YN = 'N'
	            AND    DC.DSP_YN = 'Y'
	            AND    DC.SPCIFY_URL_DSP_YN = 'N'
	            <if test="notIncBrndNo != null and notIncBrndNo != ''">
	            	<![CDATA[ AND DC.UPPER_DSP_CTGRY_NO <> #{notIncBrndNo,jdbcType=VARCHAR} ]]>
	            </if>
	        START  WITH DC.DSP_CTGRY_NO = #{dspCtgryTreeRootDspCtgryNo,jdbcType=VARCHAR}
	        ORDER  SIBLINGS BY DC.SORT_SEQ
	        ) DC
			LEFT   OUTER JOIN DSP_CTGRY_LANG DCL ON DCL.DSP_CTGRY_NO = DC.DSP_CTGRY_NO AND DCL.LANG_CD = #{lang,jdbcType=VARCHAR}
	 		<if test="ctgryDpthCd != null">
	          	WHERE DC.CTGRY_DPTH_CD = #{ctgryDpthCd}
	        </if>
	        ORDER BY DC.SORT_SEQ
	</select>-->

	<select id="otltGodCheck" parameterType="String" resultType="int">
		SELECT
		COUNT(DSP_CTGRY_NO)
		FROM  DSP_CTGRY
		WHERE 1 = 1
		  AND DSP_CTGRY_NO IN (SELECT DSP_CTGRY_NO
		  						 FROM DSP_CTGRY_CNNC_GOD
		  						WHERE GOD_NO = #{godNo, jdbcType=VARCHAR}
		  					  )
		  AND CTGRY_SECT_CD = 'OTLT_CTGRY'
	</select>

	<select id="selectCnncCtgryCnt" parameterType="String" resultType="int">
		SELECT
		COUNT(DSP_CTGRY_NO)
		FROM DSP_CTGRY_CNNC_GOD
		WHERE GOD_NO = #{godNo, jdbcType=VARCHAR}
	</select>

	<select id="selectDspCtgryCnncGodInfo" parameterType="String" resultType="com.plgrim.ncp.biz.display.result.DspCtgryCnncGodExcelResult">
		SELECT
		dc.DSP_CTGRY_NO,
		dc.DSP_CTGRY_NM,
		g.GOD_NO,
		g.ERP_GOD_NO,
		g.GOD_NM
		FROM  DSP_CTGRY_CNNC_GOD dccg, DSP_CTGRY dc, GOD g
		WHERE	dccg.DSP_CTGRY_NO = dc.DSP_CTGRY_NO
		AND	dccg.GOD_NO = g.GOD_NO
		AND  g.GOD_NO = #{godNo, jdbcType=VARCHAR}
	</select>

	<insert id="insertDspCtgryLangMetaTag" parameterType="dspCtgryLang">
		INSERT /* com.plgrim.ncp.base.repository.dsp.insertDspCtgryLang jackie 20150512 */
	    INTO DSP_CTGRY_LANG
		(
	        DSP_CTGRY_NO
	       ,LANG_CD
	       ,META_SJ_NM
	       ,META_DSCR_CONT
	       ,META_KWD
	       ,REGTR_ID
	       ,UDTER_ID
           ,REG_DT
           ,UDT_DT
		)
		VALUES
		(
	        #{dspCtgryNo,jdbcType=VARCHAR}
	       ,#{langCd,jdbcType=VARCHAR}
	       ,#{metaSjNm, jdbcType=VARCHAR}
	       ,#{metaDscrCont, jdbcType=VARCHAR}
	       ,#{metaKwd, jdbcType=VARCHAR}
	       ,#{regtrId,jdbcType=VARCHAR}
	       ,#{udterId,jdbcType=VARCHAR}
	       ,SYSDATE
	       ,SYSDATE
		)
	</insert>

	<update id="updateDspCtgryLangMetaTag" parameterType="dspCtgryLang">
		UPDATE /* com.plgrim.ncp.base.repository.dsp.updateDspCtgryLang jackie 20150512 */
		DSP_CTGRY_LANG SET
		META_SJ_NM = #{metaSjNm, jdbcType=VARCHAR}
		,META_DSCR_CONT = #{metaDscrCont, jdbcType=VARCHAR}
		,META_KWD = #{metaKwd, jdbcType=VARCHAR}
		,UDTER_ID = #{udterId,jdbcType=VARCHAR}
		,UDT_DT = SYSDATE
		WHERE   1 = 1
		AND     DSP_CTGRY_NO = #{dspCtgryNo,jdbcType=VARCHAR}
		AND     LANG_CD = #{langCd,jdbcType=VARCHAR}
	</update>
	
	<select id="selectDspCtgryFoInfo" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspCtgryFoResultMap" useCache="false">
        SELECT /* [display.category.xml][selectDspCtgryFoInfo][카테고리정보][Dian] */ 
                t1.DSP_CTGRY_NO
               ,t1.UPPER_DSP_CTGRY_NO
               ,t1.CTGRY_TP_CD
			   ,t1.CTGRY_SECT_CD
               ,t1.GOD_DSP_UNIT_CD
               ,t1.CTGRY_DPTH_CD
               ,t1.DSP_GOD_SORT_STDR_CD
               ,t1.LEAF_CTGRY_YN
               ,t1.DSP_YN
               ,t1.SPCIFY_URL_DSP_YN
               ,t1.CTGRY_DIV_LNE_YN
               ,t1.CTGRY_DIV_LNE_CSS_CD
               ,t1.DELETE_YN
               ,t1.CTGRY_OUTPT_TP_CD
               ,t1.OUTPT_SECT_CD
               ,t1.OUTPT_LINK_URL
               ,t1.SORT_SEQ
               ,t1.APL_MALL_ID
               ,t1.DSP_BRND_ID
               ,t1.EXPSR_LVL_CD
               ,t1.RPRST_IMG_FILE_NM
               ,t1.RPRST_IMG_FILE_URL
               ,t1.RPRST_IMG_ALTRTV_CONT
               ,t1.BCRN_STYLE_CLASS_ID
               ,t1.REGTR_ID
               ,t1.REG_DT
               ,t1.UDTER_ID
               ,t1.UDT_DT
               ,t4.DSP_CTGRY_NO AS DCLANG_DSP_CTGRY_NO
               ,t4.LANG_CD
               ,t4.DSP_CTGRY_NM AS DCLANG_DSP_CTGRY_NM
               ,t4.RPRST_IMG_FILE_URL AS DCLANG_RPRST_IMG_FILE_URL
               ,t4.RPRST_IMG_ALTRTV_CONT AS DCLANG_RPRST_IMG_ALTRTV_CONT
               ,t4.RPRST_IMG_FILE_NM AS DCLANG_RPRST_IMG_FILE_NM
                <if test="mallGubun == 'BRAND'">
               ,NVL(brnd.DSP_CTGRY_NM, t1.DSP_CTGRY_NM) as DSP_CTGRY_NM
			   ,NVL(brnd.PC_LIST_EXPSR_CNT_CD, t1.PC_LIST_EXPSR_CNT_CD) as PC_LIST_EXPSR_CNT_CD
			   ,NVL(brnd.MOBILE_LIST_EXPSR_CNT_CD, t1.MOBILE_LIST_EXPSR_CNT_CD) as MOBILE_LIST_EXPSR_CNT_CD
			   ,NVL(brnd.LIST_EXPSR_IMG_TURN, t1.LIST_EXPSR_IMG_TURN) as LIST_EXPSR_IMG_TURN
                </if>
                <if test="mallGubun != 'BRAND'">
               ,t1.DSP_CTGRY_NM
			   ,t1.PC_LIST_EXPSR_CNT_CD
			   ,t1.MOBILE_LIST_EXPSR_CNT_CD
			   ,t1.LIST_EXPSR_IMG_TURN
               </if>
        FROM DSP_CTGRY t1 
        <if test="mallGubun == 'BRAND'">
        	LEFT OUTER JOIN DSP_BRND_CTGRY brnd ON (t1.dsp_ctgry_no = brnd.dsp_ctgry_no AND brnd.dsp_brnd_id =  #{dspCtgry.dspBrndId, jdbcType=VARCHAR})	 
        </if>	
        	LEFT OUTER JOIN DSP_CTGRY_LANG t4 ON T1.DSP_CTGRY_NO = T4.DSP_CTGRY_NO AND T4.LANG_CD = #{lang,jdbcType=VARCHAR}
        WHERE 1 = 1
          AND t1.APL_MALL_ID = #{mallId,jdbcType=VARCHAR} 
          AND t1.DELETE_YN = 'N'
          AND t1.DSP_CTGRY_NO = #{dspCtgry.dspCtgryNo,jdbcType=VARCHAR}
        <if test="mallGubun == 'BRAND'">
			AND NVL(brnd.dsp_yn, t1.dsp_yn) = 'Y'
		</if>
		<if test="mallGubun != 'BRAND'">
			AND t1.DSP_YN = 'Y'
		</if>
	</select>

	<select id="selectGoodsFinderGodFoList" parameterType="com.plgrim.ncp.biz.display.data.DspCtgrySearchFoDTO" resultMap="dspGoodsFinderGodFoResultMap">
		SELECT
		c.* 	/* [display.category.xml][selectGoodsFinderGodFoList] [수트 파인더 상품 전시 리스트 조회] [Dave] */
		,(SELECT LISTAGG(icg.color_style_cd,',')
		WITHIN GROUP (ORDER BY icg.color_style_cd)
		AS color_style_cd /*ex) color01*/
		FROM god god, inf_color_grp icg
		WHERE 1 = 1
		AND god.dsp_yn = 'Y' /*전시 여부*/
		AND god.god_aprv_sect_cd = 'APRV_COMPT' /*상품 승인 구분 코드. 상품 승인 구분 : GOD_APRV_SECT. 승인 대기 : APRV_WAIT. 승인 거부 : APRV_REJ. 승인 완료 : APRV_COMPT*/
		AND god.god_sale_sect_cd IN ('SLDOUT', 'SALE_PROGRS', 'SALE_PROGRS_PKUP') /*상품 판매 구분 코드. 상품 판매 구분 : GOD_SALE_SECT. 판매중 : SALE_PROGRS. 임시 판매 중지 : TMPR_SALE_STPGE. 판매 종료 : SALE_END. 품절 : SLDOUT. 임시 품절 : TMPR_SLDOUT. 판매중(픽업) : SALE_PROGRS_PKUP*/
		AND god.partmal_sect_cd = 'MCOM' /*입점 구분 코드. 입점 구분 : PARTMAL_SECT. 자사 : MCOM. 입점 : PARTMAL*/
		AND c.dsgn_grp_no = god.dsgn_grp_no	/*디자인 그룹 번호. 자사의 경우 (상품.ERP 상품 번호)에서  마지막 색상 부분을 제외한 번호. 입점사는 (상품.ERP 상품 번호)와 동일하게 처리*/
		AND god.color_cd = icg.color_grp_cd /*색상 코드*/
		AND icg.language = DECODE( #{lang, jdbcType=VARCHAR} , 'ENG' , 'EN' , 'CHI' , 'ZH' , 'KO' ))
		AS color_style_cd
		,(select cd_nm from mv_sys_cd where upper_cd = 'SESON_GRP' and cd = c.SESON_GRP_CD and lang_cd = #{lang, jdbcType=VARCHAR})
		AS SESON_GRP_NM
		FROM (
		SELECT
		b.*
		,ROWNUM AS NO
		FROM (
		SELECT
		a.*
		FROM (
		SELECT
		g.GOD_NO /*상품 번호. 상품 유형 1자리 || 업체 코드 3자리 || YYMMDD || 5자리 Cycle Sequence*/
		,g.ERP_GOD_NO /*ERP 상품 번호. 상품 유형 1자리 || 8자리 Sequence || 색상 코드. SQ_GOD_ERP_GOD_NO 이용 채번*/
		,g.DSGN_GRP_NO /*디자인 그룹 번호. 자사의 경우 (상품.ERP 상품 번호)에서  마지막 색상 부분을 제외한 번호. 입점사는 (상품.ERP 상품 번호)와 동일하게 처리*/
		,g.GOD_NM /*상품 명*/
		,g.MOBILE_GOD_NM /*모바일 상품 명*/
		,g.TAG_NM /*태그 명*/
		,g.COLOR_TAG_NM /*색상 태그 명*/
		,g.THEMA_TAG_NM /*테마 태그 명*/
		,g.TEXT_ICON_CONT /*텍스트 아이콘 내용*/
		,g.GOD_APRV_SECT_CD /*상품 승인 구분 코드. 상품 승인 구분 : GOD_APRV_SECT. 승인 대기 : APRV_WAIT. 승인 거부 : APRV_REJ. 승인 완료 : APRV_COMPT*/
		<choose>
			<when test="lang != 'KOR' ">
				,DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SLDOUT', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD /*상품 판매 구분 코드 : 판매중(픽업) 이면 솔드아웃*/
			</when>
			<otherwise>
				,DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SALE_PROGRS', g.GOD_SALE_SECT_CD) as GOD_SALE_SECT_CD /*상품 판매 구분 코드 : 판매중(픽업) 이면 판매중*/
			</otherwise>
		</choose>

		,g.SALE_BEG_DATE /*판매 시작 일자*/
		,g.SALE_END_DATE /*판매 종료 일자*/
		,g.COLOR_NM /*색상 명*/
		,g.COLOR_CD /*색상 코드*/
		,g.CLOR_CHIP_IMG_URL /*컬러칩 이미지 URL*/
		,g.GOD_TP_CD /*상품 유형 코드. 상품구분 : GOD_TP. 일반상품 : GNRL_GOD. 사입 사은품 : PCHS_GFT. 전환 사은품 : CNVRS_GFT. 세트상품 : SET_GOD. 패키지 상품 : PCKAGE_GOD. 상품권 : GFCT. 마일리지 상품 : MILE_GOD*/
		,g.PARTMAL_SECT_CD /*입점 구분 코드. 입점 구분 : PARTMAL_SECT. 자사 : MCOM. 입점 : PARTMAL*/
		,g.BRND_ID AS GOD_BRND_ID /*브랜드 ID. 온라인에서 사용하는 브랜드 ID*/
		,g.BRND_GRP_ID AS GOD_BRND_GRP_ID /*브랜드 그룹 ID. 온라인에서 사용하는 브랜드 ID*/
		,g.STD_CTGRY_NO /*표준 카테고리 번호. 표준 카테고리 번호. 대카(3) + 중카(3) + 소카(3) + 세카(3) + 세세카(3)*/
		,g.TDF_SECT /*과면세 구분. 과면세 구분 : TDF_SECT. 과세 : TAXAT. 비과세 : TAXXMPT. 면세 : TAXXPT. 영세 : POOR*/
		,g.SESON_GRP_CD /*시즌 그룹 코드. 시즌 그룹 : SESON_GRP. SS : SS. FW : FW*/
		,g.SESON_CD /*시즌 코드. ERP에서 연계 받는 코드*/
		,g.PRDLST_CD /*품목 코드. ERP과 연동하여 처리 된건은 2자리*/
		,g.OTLT_YN /*아울렛 여부*/
		,g.COM_ID /*업체 ID*/
		,sb.BRND_ID /*브랜드 ID. 온라인에서 사용하는 브랜드 ID*/
		,sb.UPPER_BRND_ID /*상위 브랜드 ID. 온라인에서 사용하는 브랜드 ID*/
		<choose>
			<when test="lang == 'KOR'">
				,sb.BRND_NM /*브랜드 명*/
			</when>
			<otherwise>
				,sbl.BRND_NM /*브랜드 명*/
			</otherwise>
		</choose>
		,g.FIRST_DSP_DT AS REG_DT /*최초 전시 일시*/
		,dgp.RTL_PRC AS RTL_PRC /*정소가*/
		,dgp.LAST_SALE_PRC AS DGPRC_LAST_SALE_PRC /*최종 판매가 할인. 유형별 지정된 판매 금액 세트 할인도 균일가 처리할 수 있음*/
		,CASE WHEN dgp.GOD_DC_RT > 0 THEN ROUND((dgp.RTL_PRC - dgp.DC_PRC) / dgp.RTL_PRC * 100) /*상품 할인율 적립 유형 정액에 따른 적립 금액 > 0 Then ((정소가 - 할인가)/정소가*100))*/
		ELSE (
		CASE WHEN dgp.RTL_PRC > dgp.CSMR_PRC THEN ROUND((dgp.RTL_PRC - dgp.CSMR_PRC) / dgp.RTL_PRC * 100) /*정소가 > 실소가 Then ((정소가 - 실소가)/정소가*100))*/
		ELSE 0 END
		)
		END
		AS DGPRC_GOD_DC_RT /*할인율*/
		,dgp.CPN_DC_RT AS DGPRC_CPN_DC_RT /*쿠폰 할인율 할인 금액, 할인율 과는 별개로 할인을 제한하는 한도 금액*/
		,dgp.BST_GOD_SALE_IDEX /*베스트 상품 판매 지수*/
		,dgp.SALE_IDEX /*판매 지수*/
		,dgp.NEW_GOD_IDEX /*신상품 지수*/
		<if test="lang != 'KOR' ">
			,glgn.GOD_NO AS GLGNM_GOD_NO
			,glgn.LANG_CD
			,glgn.GOD_NM AS GLGNM_GOD_NM
			,glgn.MOBILE_GOD_NM AS GLGNM_MOBILE_GOD_NM
			,glgn.TAG_NM AS GLGNM_TAG_NM
			,glgn.COLOR_TAG_NM AS GLGNM_COLOR_TAG_NM
			,glgn.THEMA_TAG_NM AS GLGNM_THEMA_TAG_NM
			,glgn.COLOR_NM AS GLGNM_COLOR_NM
		</if>
		,gi1.IMG_URL AS IMG_FRONT_URL /*이미지 URL. 저장 위치 및 저장 파일명 예) /file/img/20150010112345.gif*/
		,gi2.IMG_URL AS IMG_BACK_URL /*이미지 URL. 저장 위치 및 저장 파일명 예) /file/img/20150010112345.gif*/
		FROM god g
		JOIN dsp_god_prc dgp ON g.god_no = dgp.god_no /*전시 상품 가격*/
		JOIN sys_brnd sb ON g.brnd_grp_id = sb.brnd_id /*시스템 브랜드*/
		LEFT OUTER JOIN DSP_BST_GOD_EVL dbge On g.GOD_NO = dbge.GOD_NO /*전시 베스트 상품평*/
		LEFT OUTER JOIN GOD_IMG gi1 ON g.GOD_NO = gi1.GOD_NO AND gi1.IMG_TP_CD = 'THNAIL' AND gi1.IMG_TURN = 2 AND gi1.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR} /*이미지 순번, 이미지 사이즈 코드*/
		LEFT OUTER JOIN GOD_IMG gi2 ON g.GOD_NO = gi2.GOD_NO AND gi2.IMG_TP_CD = 'THNAIL' AND gi2.IMG_TURN = 1 AND gi2.IMG_SIZE_CD = #{imgSizeCd, jdbcType=VARCHAR} /*이미지 순번, 이미지 사이즈 코드*/
		<if test="lang != 'KOR'">
			JOIN SYS_BRND_LANG sbl ON (sb.BRND_ID = sbl.BRND_ID AND sbl.LANG_CD = #{lang, jdbcType=VARCHAR})
			JOIN GOD_LANGBY_GOD_NM glgn ON g.GOD_NO = glgn.GOD_NO AND glgn.LANG_CD = #{lang,jdbcType=VARCHAR} AND glgn.OVSEA_DSP_STAT_CD = 'DSP_APRV'
		</if>

        /* 수트파인더 상품 조건 */
        <choose>
            <when test="goodsFinderFoDTOList != null and goodsFinderFoDTOList.size > 0">
                <foreach item="item" collection="goodsFinderFoDTOList" index="index">
                    JOIN GOD_FINDER_ANS_CNNC f${index} ON g.god_no = f${index}.god_no
                    AND f${index}.finder_no = #{finderNo, jdbcType=VARCHAR}
                    <if test="item.qestnTurn != null and item.qestnTurn != ''">
                        AND f${index}.QESTN_TURN = #{item.qestnTurn, jdbcType=INTEGER}
                    </if>
                    <if test="item.smpleSntnTurn != null and item.smpleSntnTurn != ''">
                        AND f${index}.SMPLE_SNTN_TURN IN (${item.smpleSntnTurn})
                    </if>
                </foreach>
            </when>
            <otherwise>
                JOIN GOD_FINDER_ANS_CNNC f ON g.god_no = f.god_no
                AND f.finder_no = #{finderNo, jdbcType=VARCHAR}
            </otherwise>
        </choose>
              /*파인더 기초대상 테이블 사용여부 조건 추가*/
              JOIN GOD_FINDER_GOD gfg ON gfg.FINDER_NO = #{finderNo, jdbcType=VARCHAR} AND gfg.GOD_NO = g.GOD_NO
		WHERE 1 = 1
        AND gfg.USE_YN = 'Y' /*파인더 기초대상 테이블 사용여부 조건 추가*/
		AND g.GOD_APRV_SECT_CD = 'APRV_COMPT' /*상품 승인 구분 코드. 상품 승인 구분 : GOD_APRV_SECT. 승인 대기 : APRV_WAIT. 승인 거부 : APRV_REJ. 승인 완료 : APRV_COMPT*/
		AND g.GOD_SALE_SECT_CD IN ('SALE_PROGRS', 'SLDOUT', 'SALE_PROGRS_PKUP') /*상품 판매 구분 코드. 상품 판매 구분 : GOD_SALE_SECT. 판매중 : SALE_PROGRS. 임시 판매 중지 : TMPR_SALE_STPGE. 판매 종료 : SALE_END. 품절 : SLDOUT. 임시 품절 : TMPR_SLDOUT. 판매중(픽업) : SALE_PROGRS_PKUP*/
		AND g.SPCIFY_URL_DSP_YN = 'N' /*안전 인증 대상 여부*/
		AND g.DSP_YN = 'Y' /*전시 여부*/
		AND dgp.mall_id = #{mallId, jdbcType = VARCHAR} /*몰 ID*/
		AND dgp.lang_cd = #{lang, jdbcType=VARCHAR} /*언어 코드*/
		<if test='spcPrmTp != null and spcPrmTp != ""'>
			/*가격 구분 코드. 가격 구분 : PRC_SECT. 일반 : GNRL. 임직원 : EMP. 싱글 : SIGNL > 해당 상품만 입력됨. B2E : B2E 키가 입력됨 > 해당 상품만 입력됨*/
			AND dgp.prc_sect_cd IN (#{spcPrmTp, jdbcType=VARCHAR}, #{prcSectCd, jdbcType=VARCHAR}) /*spcPrmTp : B2E, SIGNL, prcSectCd : GNRL, EMP */
			AND dgp.PRC_SECT_CD =
			CASE WHEN (
			SELECT 1
			FROM DSP_GOD_PRC dgp2
			WHERE dgp2.PRC_SECT_CD = #{spcPrmTp, jdbcType=VARCHAR} AND dgp2.GOD_NO = dgp.GOD_NO AND ROWNUM = 1)
			IS NOT NULL
			THEN #{spcPrmTp, jdbcType=VARCHAR}
			ELSE #{prcSectCd, jdbcType=VARCHAR}
			END
		</if>
		<if test='spcPrmTp == null or spcPrmTp == ""'>
			AND dgp.PRC_SECT_CD = #{prcSectCd, jdbcType=VARCHAR}
		</if>
		<if test='empYn == "N"'>
			AND g.EMP_ONLY_YN = 'N'
		</if>

        GROUP BY
        g.GOD_NO
        ,g.ERP_GOD_NO
        ,g.DSGN_GRP_NO
        ,g.GOD_NM
        ,g.MOBILE_GOD_NM
        ,g.TAG_NM
        ,g.COLOR_TAG_NM
        ,g.THEMA_TAG_NM
        ,g.TEXT_ICON_CONT
        ,g.GOD_APRV_SECT_CD
        <choose>
            <when test="lang != 'KOR' ">
                ,DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SLDOUT', g.GOD_SALE_SECT_CD)
            </when>
            <otherwise>
                ,DECODE(g.GOD_SALE_SECT_CD, 'SALE_PROGRS_PKUP', 'SALE_PROGRS', g.GOD_SALE_SECT_CD)
            </otherwise>
        </choose>
        ,g.SALE_BEG_DATE
        ,g.SALE_END_DATE
        ,g.COLOR_NM
        ,g.COLOR_CD
        ,g.CLOR_CHIP_IMG_URL
        ,g.GOD_TP_CD
        ,g.PARTMAL_SECT_CD
        ,g.BRND_ID
        ,g.BRND_GRP_ID
        ,g.STD_CTGRY_NO
        ,g.TDF_SECT
        ,g.SESON_GRP_CD
        ,g.SESON_CD
        ,g.PRDLST_CD
        ,g.OTLT_YN
        ,g.COM_ID
        ,sb.BRND_ID
        ,sb.UPPER_BRND_ID
        <choose>
            <when test="lang == 'KOR'">
                ,sb.BRND_NM
            </when>
            <otherwise>
                ,sbl.BRND_NM
            </otherwise>
        </choose>
        ,g.FIRST_DSP_DT
        ,dgp.RTL_PRC
        ,dgp.LAST_SALE_PRC
        ,CASE WHEN dgp.GOD_DC_RT > 0 THEN ROUND((dgp.RTL_PRC - dgp.DC_PRC) / dgp.RTL_PRC * 100)
        ELSE ( CASE WHEN dgp.RTL_PRC > dgp.CSMR_PRC THEN ROUND((dgp.RTL_PRC - dgp.CSMR_PRC) / dgp.RTL_PRC * 100) ELSE 0 END ) END
        ,dgp.CPN_DC_RT
        ,dgp.BST_GOD_SALE_IDEX
        ,dgp.SALE_IDEX
        ,dgp.NEW_GOD_IDEX
        <if test="lang != 'KOR' ">
            ,glgn.GOD_NO
            ,glgn.LANG_CD
            ,glgn.GOD_NM
            ,glgn.MOBILE_GOD_NM
            ,glgn.TAG_NM
            ,glgn.COLOR_TAG_NM
            ,glgn.THEMA_TAG_NM
            ,glgn.COLOR_NM
        </if>
        ,gi1.IMG_URL
        ,gi2.IMG_URL
		) a
		WHERE 1 = 1
		<if test="sortColumn != '' and sortColumn != null">
			ORDER BY
			a.GOD_SALE_SECT_CD ASC
			<choose>
				<when test="sortColumn == 'NEW_GOD_SEQ'">
					,a.NEW_GOD_IDEX DESC NULLS LAST /* 신상품순 */
				</when>
				<when test="sortColumn == 'SALE_QTY_SEQ'">
					,a.BST_GOD_SALE_IDEX DESC NULLS LAST /* 인기상품순 */
				</when>
				<when test="sortColumn == 'LWET_PRC_SEQ'">
					,a.DGPRC_LAST_SALE_PRC ASC /* 낮은가격순 */
				</when>
				<when test="sortColumn == 'BEST_PRC_SEQ'">
					,a.DGPRC_LAST_SALE_PRC DESC /* 높은가격순 */
				</when>
				<otherwise>
					,a.SORT_SEQ ASC
					,a.REG_DT DESC
					,a.DSGN_GRP_NO ASC
				</otherwise>
			</choose>
			,a.GOD_NO ASC
		</if>
		<if test="sortColumn == '' || sortColumn == null">
			ORDER BY
			a.GOD_SALE_SECT_CD ASC
			,a.NEW_GOD_IDEX DESC NULLS LAST
			,a.GOD_NO ASC
		</if>
		) b
			WHERE 1 = 1
			AND ROWNUM &lt;= #{endIndex}
		) c
			WHERE 1 = 1
			AND NO >= #{beginIndex}
	</select>
</mapper>