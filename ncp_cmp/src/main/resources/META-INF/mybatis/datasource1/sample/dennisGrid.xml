<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.plgrim.ncp.biz.example">
	<update id="mergeDennisGridData">
			MERGE INTO AA_EMP EMP
	   		USING (
					SELECT
						#{emp.empno} as EMPNO,
						#{emp.ename} as ENAME,
						'N' 		 as JOB,
						'100' 		 as SAL,
						'10'			 as DEPTNO	
					FROM DUAL    			
	   		) FCH ON (EMP.EMPNO = FCH.EMPNO)
	   		WHEN MATCHED THEN 
	   			UPDATE SET
		   			ENAME 	= FCH.ENAME,
		   			JOB 	= FCH.JOB,
		   			SAL 	= FCH.SAL,
		   			DEPTNO 	= FCH.DEPTNO
	   		WHEN NOT MATCHED THEN 
	   			INSERT 
	   				(EMPNO, ENAME, JOB, SAL, DEPTNO)
	     		VALUES 
	     			(FCH.EMPNO, FCH.ENAME, FCH.JOB, FCH.SAL, FCH.DEPTNO)
	</update>
	
</mapper>